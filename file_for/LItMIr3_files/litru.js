$(function(){xsJsData=(function(){var JsDataStr=$("div[jq=xsJsData]").attr("Data");var Data=jQuery.parseJSON(JsDataStr);return{Set:function(Key,Value,Prefix){if(!Prefix){Prefix="Prefix"}Data.Prefix.Key=Value},Get:function(Key,Prefix){if(!Prefix){Prefix="Prefix"}return eval("Data.Prefix."+Key+"")}}})()});function xsJsDataSet(a,b,c){xsJsData.Set(a,b,c)}function xsJsDataGet(a,b){return xsJsData.Get(a,b)}$(function(){$(document).ajaxStart(function(){}).ajaxStop(function(){}).ajaxError(function(c,d,b,a){if((typeof d.responseText!=="undefined")&&(d.responseText!="")){xsError(d.responseText)}})});var ErrorNotShow=false;var LastError="";$(function(){if(xsJsDataGet("Debug")){window.onerror=handlerFunction;$(document).ajaxError(function(c,d,b,a){xsError("Jquery "+d+" "+b.url+" "+a)})}});function handlerFunction(b,c,a){if(!ErrorNotShow){xsError(""+LastError+"")}return true}function xsError(a){$("<div />",{html:'<div style="text-align:center;">'+a+"</div>"}).dialog({minWidth:500,modal:true,title:"Ошибка"})}function xsMessage(c,b,a){if(c){$("<div />",{html:'<div style="text-align:center;">'+c+"</div>"}).dialog({minWidth:500,modal:true,title:b,buttons:[{"class":"okbutton",text:"Ok",click:function(){$(this).dialog("close")}}],close:function(d,e){if(a){ReloadPage()}}})}$(".okbutton").focus()}function xsThrowError(Str,Javascript){xsError(Str);if(Javascript){eval(Javascript)}ErrorNotShow=true;throw new Error(Str)}function xsThrowError2(a){LastError=a;throw new Error(a)}function xsJsonParse(b,c){if(c===undefined){var c=function(){}}ErrorNotShow=false;LastError="";if(!is_string(b)){c();xsThrowError2(" JSON is not string ")}try{var a=$.evalJSON(b)}catch(d){c();xsThrowError2(" Error JSON parse string: "+escapeHtml(b)+" ")}if(a.Error){c();xsThrowError(a.Content,a.Javascript)}return a}function IncompatibleWithHTML5Error(){xsMessage("Ваш браузер не поддерживает HTML5. Пожалуйста обновите Ваш браузер или установите один из рекомендумых","Не поддерживается HTML5")}$(function(){$("input[name='search_what']").change(function(){localStorage.search_what=this.value});$("[jq=t1]").mouseenter(function(){var a=$(this).find("[jq=t3]");var d=a.position();var c=d.top+a.height();var b=d.left;$(this).find("[jq=t2]").css("position","absolute").css("top",c).css("left",b).show()}).mouseleave(function(){$(this).find("[jq=t2]").hide()});$(".radio_styled").buttonset();new ScrollPanel().Init();new Litmir().Init();$("[jq=OpenQRCode]").click(function(){$("<div />",{html:'<div style="vertical-align:middle; text-align:center;"><img src="/ShowQRCode/?Text='+encodeURIComponent(document.location)+'" /></div>'}).dialog({title:"QR код текущей страницы",autoOpen:true,resizable:true,minHeight:200,minWidth:800,width:800,modal:true})});$("[jq=SendViaAjaxWithWindow]").click(function(){$.ajax({url:$(this).attr("Url"),success:function(a){var b=xsJsonParse(a);xsMessage(b.Content)}})});$("[jq=SendViaAjaxWithWindowAndReload]").click(function(){$.ajax({url:$(this).attr("Url"),success:function(a){var b=xsJsonParse(a);xsMessage(b.Content,"",true)}})})});$(function(){$(".scroll-pane").show();$(".scroll-pane").jScrollPane();$(".scroll-pane").hide();$(".scroll-panesmall").show();$(".scroll-panesmall").jScrollPane();$(".scroll-panesmall").hide();$(".scroll-panetiny").show();$(".scroll-panetiny").jScrollPane();$(".scroll-panetiny").hide()});var show;var showdiv1;var showdiv2;var showmenu;var shownote;var noteobj;var showoptions={};var focusoptions={};var moveoptions={};function hidetxt(a){if($("#"+a).css("display")=="none"){if(show){show.hide("fade","linear",300)}$("#"+a).show("fade","linear",300);show=$("#"+a)}else{$("#"+a).hide("fade","linear",300)}}function hidemenu(){if($("#menu").css("display")=="none"){$("#menu").show("blind","linear",300)}else{$("#menu").hide("blind","linear",300)}}function hideoptions(a){if($("#"+a).css("display")=="none"){$("#"+a).show("blind","linear",150)}else{$("#"+a).hide("blind","linear",150)}}function hideall(){if(!showdiv1){$("#div1").hide("fade","linear",300)}if(!showdiv2){$("#div2").hide("fade","linear",300)}if(!showmenu){$("#menu").hide("blind","linear",300)}if((!shownote)&&(noteobj!=null)){noteobj.dialog("close");noteobj=null}$.each(showoptions,function(b,a){if(!a){$("#"+b).hide("blind","linear",300)}})}function flash(a){$(a).children("li").effect("highlight","linear",300)}function ShowGenres(a,b){$.ajax({url:a,data:"suffix="+b,type:"POST",success:function(d){var e=xsJsonParse(d);$("#genres").html(e.Content);$("#genres").show("scale","linear",300);$("#genres").css("opacity","1");$("#genres").css("background","rgba(255,255,255,0.8)");$("body").css("overflow","hidden");var c=explode_comma($("#SelectedGenreIds"+b).val());if((c.length)&&(c[0]>0)){$(".SubGenre").each(function(){var f=$(this);var g=$(this).attr("SubgenreId");var h=false;$.each(c,function(j,k){if(g==k){h=true}});if(h){f.prop("checked",true)}else{f.prop("checked",false)}});$(".Genre").each(function(){var h=$(this);var g=$(this).attr("GenreId");var f=true;$("#genre_desc"+g+" input[type=checkbox]").each(function(){if(!$(this).prop("checked")&&$(this).attr("SubgenreId")){f=false}});if(f){$(h).prop("checked",true)}})}}})}function HideGenres(c){var b=$(".SubGenre:checked").size();$("#SelectedGenreCount"+c).html(b);var a=Array();$(".SubGenre:checked").each(function(){a.push($(this).attr("SubgenreId"))});$("#SelectedGenreIds"+c).val(implode_comma(a)).change();$("body").css("overflow","auto");$("#genres").hide("scale","linear",300)}function SaveGenres(b){var a=Array();$(".SubGenre:checked").each(function(){a.push($(this).attr("SubgenreId"))});$.ajax({url:b,type:"POST",data:"SubGenreIds="+implode_comma(a),success:function(c){$("<div />",{html:'<div class="xs_ok_msg" style="text-align:center;z-index:6000;">Ваш личный список жанров успешно сохранён</div>'}).dialog({minWidth:80,title:"Сообщение"});var d=xsJsonParse(c);$("#book_global").attr("href",d.Content)}})}var Star=0;function SelectStar(a){for(i=1;i<=a;i++){$("#star"+i).attr("src","/img/full_star.png")}for(i=a+1;i<=10;i++){$("#star"+i).attr("src","/img/empty_star.png")}}function ClearStar(){if(Star>0){for(i=1;i<=Star;i++){$("#star"+i).attr("src","/img/full_star.png")}for(i=Star+1;i<=10;i++){$("#star"+i).attr("src","/img/empty_star.png")}}else{for(i=1;i<=10;i++){$("#star"+i).attr("src","/img/empty_star.png")}}}function ChooseStar(a){Star=a;$("#Rate").val(a)}function DeleteStar(){Star=0;ClearStar()}function Litmir(){this.Init=function(){this.SetCookieGMTOffset();new xsUpdateActivity().Init();new xsLoginEnter().Init()};this.SetCookieGMTOffset=function(){NewDate=new Date();var b=-(NewDate.getTimezoneOffset()*60);$("[jq=TimeZone]").html(b);var e,a=new Date(),d=a.getTimezoneOffset(),c=new Date(a.getFullYear(),1,1).getTimezoneOffset(),g=new Date(a.getFullYear(),7,1).getTimezoneOffset(),f="";if(c===g){f="-1"}else{if(d===c){f="0"}else{if(d===g){f="1"}else{}}}$.ajax({url:"/setTime",type:"POST",data:({TimezoneOffset:b,DST:f})})}}function xsLoginEnter(){this.Init=function(){var a=this;a.Form=$("[jq=LoginEnter]");a.SubmitButton=a.Form.find("[type=submit]");a.LoginInput=a.Form.find("[jq=Login]");a.PasswordInput=a.Form.find("[jq=Password]");a.SubmitButton.click(function(b){if((a.LoginInput.val()!="")&&(a.PasswordInput.val()!="")){a.SubmitButton.val("Заходим ...");a.SubmitButton.attr("disabled","disabled");a.Form.submit()}else{b.preventDefault()}})}}function xsUpdateActivity(){this.CheckUserLastActivityPeriod="240";this.UpdateActivityFeed;this.Init=function(){var a=this;a.UpdateActivityFeed=$("[jq=update_activity_feed]");var d=xsJsDataGet("IsLogined");if(d){var b=intval(xsJsDataGet("TimeRemains"));b=b-3;a.Log(" TimeRemains: "+b+"s ");if(b>0){a.Log("TimeRemains > 0 ");var c=$("<div />");c.oneTime((b*1000),function(){a.UpdateActivityWithPeriodStart()})}else{a.Log(" TimeRemains < 0 ");a.UpdateActivityWithPeriodStart()}}};this.UpdateActivityWithPeriodStart=function(){var a=this;var b=$("<div />");a.UpdateActivity();b.everyTime((a.CheckUserLastActivityPeriod*1000),"Timer",function(c){a.UpdateActivity()})};this.UpdateActivity=function(){var a=this;a.Log("UpdateActivity");$.ajax({url:"/update_activity",global:false,success:function(c){var b=jQuery.parseJSON(c);a.Log(b.Content)},error:function(){}})};this.Log=function(b){var a=this}}function CKupdate(){for(instance in CKEDITOR.instances){var a=CKEDITOR.instances[instance].getData();CKEDITOR.instances[instance].updateElement()}return true}function PreBodyJs(){}function xsLoadImageSet(a){a.html('<img src="/img/ajax-loader.gif" />')}function GetWaitImageHtmlCode(){return'<img src="/img/ajax-loader.gif" />'}function LikeButtonPanel(){this.Init=function(){$(window).resize(this.ScrollingEvent).scroll(this.ScrollingEvent);$("body").append('<div id="LitmirLikeButtonPanel" style="position:fixed;"><table style=""><tr><td><div style="width:100px;"><div class="lt95"><div id="vk_like"></div></div></div></td></tr></table></div>');this.ScrollingEvent()};this.ScrollingEvent=function(){var a=$("#LitmirLikeButtonPanel");var b=$(window);a.css({top:"20px",left:((b.width()/2)+505)+"px"})}}function ScrollPanel(){this.Init=function(){$(window).resize(this.ScrollingEvent).scroll(this.ScrollingEvent);$("body").append('<div id="scrollingDiv" style="position:fixed; display:none;"><a class="lt48" href="javascript:window.scrollTo(0, 0);" style="opacity:0.95">Наверх</a></div>')};this.ScrollingEvent=function(){var a=$("#scrollingDiv");var b=$(window);a.css({top:(b.height()-a.height()-5)+"px",right:"10px"}).animate({opacity:"show"},1000)}}function isScrolledIntoView(c){var e=$(window).scrollTop();var d=e+$(window).height();var a=$(c).offset().top;var b=a+$(c).height();return((b<=d)&&(a>=e))}function ImageFit(e,c,d,b){var a=b;var f=d;if(b>c||d>e){if(e/d>c/b){a=(c);f=(d*(c/b))}else{f=(e);a=(b*(e/d))}}return new Array(Math.round(a),Math.round(f))}function strch(m,p,q){var k="",f=0,e=0,d=0,b=0,c=false,r="",h="",a="";var o=[];var n=[];var l="";var g=false;d=m.length;b=p.length;r=typeof p==="string";h=typeof q==="string";for(f=0;f<d;f++){g=false;if(r){a=m.charAt(f);for(e=0;e<b;e++){if(a==p.charAt(e)){g=true;break}}}else{for(e=0;e<b;e++){if(m.substr(f,p[e].length)==p[e]){g=true;f=(f+p[e].length)-1;break}}}if(g){l+=h?q.charAt(e):q[e]}else{l+=m.charAt(f)}}return l}function hex_md0(d){var c="0123456789abcdef";var b="d4271c63feba5098";var a="59be4a1f28c076d3";return $.md5(strch(($.md5(strch($.md5(d),c,b)+""+strch($.md5(d),c,a))),c,b))}function implode_comma(a){return a.join(",")}function explode_comma(a){return explode(",",a)}function implode(b,a){return a.join(b)}function escapeHtml(a){if(!a){return a}return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function html_entity_decode(c,f){var e={},d="",a="",b="";a=c.toString();if(false===(e=this.get_html_translation_table("HTML_ENTITIES",f))){return false}delete (e["&"]);e["&"]="&amp;";for(d in e){b=e[d];a=a.split(b).join(d)}a=a.split("&#039;").join("'");return a}function get_html_translation_table(j,f){var d={},h={},c=0,a="";var e={},b={};var k={},g={};k=(j?j.toUpperCase():"HTML_SPECIALCHARS");g=(f?f.toUpperCase():"ENT_COMPAT");e[0]="HTML_SPECIALCHARS";e[1]="HTML_ENTITIES";b[0]="ENT_NOQUOTES";b[2]="ENT_COMPAT";b[3]="ENT_QUOTES";if(!isNaN(k)){k=e[k]}if(!isNaN(g)){g=b[g]}if(g!="ENT_NOQUOTES"){d["34"]="&quot;"}if(g=="ENT_QUOTES"){d["39"]="&#039;"}if(k=="HTML_SPECIALCHARS"){d["38"]="&amp;";d["60"]="&lt;";d["62"]="&gt;"}else{if(k=="HTML_ENTITIES"){d["38"]="&amp;";d["60"]="&lt;";d["62"]="&gt;";d["160"]="&nbsp;";d["161"]="&iexcl;";d["162"]="&cent;";d["163"]="&pound;";d["164"]="&curren;";d["165"]="&yen;";d["166"]="&brvbar;";d["167"]="&sect;";d["168"]="&uml;";d["169"]="&copy;";d["170"]="&ordf;";d["171"]="&laquo;";d["172"]="&not;";d["173"]="&shy;";d["174"]="&reg;";d["175"]="&macr;";d["176"]="&deg;";d["177"]="&plusmn;";d["178"]="&sup2;";d["179"]="&sup3;";d["180"]="&acute;";d["181"]="&micro;";d["182"]="&para;";d["183"]="&middot;";d["184"]="&cedil;";d["185"]="&sup1;";d["186"]="&ordm;";d["187"]="&raquo;";d["188"]="&frac14;";d["189"]="&frac12;";d["190"]="&frac34;";d["191"]="&iquest;";d["192"]="&Agrave;";d["193"]="&Aacute;";d["194"]="&Acirc;";d["195"]="&Atilde;";d["196"]="&Auml;";d["197"]="&Aring;";d["198"]="&AElig;";d["199"]="&Ccedil;";d["200"]="&Egrave;";d["201"]="&Eacute;";d["202"]="&Ecirc;";d["203"]="&Euml;";d["204"]="&Igrave;";d["205"]="&Iacute;";d["206"]="&Icirc;";d["207"]="&Iuml;";d["208"]="&ETH;";d["209"]="&Ntilde;";d["210"]="&Ograve;";d["211"]="&Oacute;";d["212"]="&Ocirc;";d["213"]="&Otilde;";d["214"]="&Ouml;";d["215"]="&times;";d["216"]="&Oslash;";d["217"]="&Ugrave;";d["218"]="&Uacute;";d["219"]="&Ucirc;";d["220"]="&Uuml;";d["221"]="&Yacute;";d["222"]="&THORN;";d["223"]="&szlig;";d["224"]="&agrave;";d["225"]="&aacute;";d["226"]="&acirc;";d["227"]="&atilde;";d["228"]="&auml;";d["229"]="&aring;";d["230"]="&aelig;";d["231"]="&ccedil;";d["232"]="&egrave;";d["233"]="&eacute;";d["234"]="&ecirc;";d["235"]="&euml;";d["236"]="&igrave;";d["237"]="&iacute;";d["238"]="&icirc;";d["239"]="&iuml;";d["240"]="&eth;";d["241"]="&ntilde;";d["242"]="&ograve;";d["243"]="&oacute;";d["244"]="&ocirc;";d["245"]="&otilde;";d["246"]="&ouml;";d["247"]="&divide;";d["248"]="&oslash;";d["249"]="&ugrave;";d["250"]="&uacute;";d["251"]="&ucirc;";d["252"]="&uuml;";d["253"]="&yacute;";d["254"]="&thorn;";d["255"]="&yuml;"}else{throw Error("Table: "+k+" not supported");return false}}for(c in d){a=String.fromCharCode(c);h[a]=d[c]}return h}function is_string(a){return typeof(a)=="string"}function explode(a,b){var c={0:""};if(arguments.length!=2||typeof arguments[0]=="undefined"||typeof arguments[1]=="undefined"){return null}if(a===""||a===false||a===null){return false}if(typeof a=="function"||typeof a=="object"||typeof b=="function"||typeof b=="object"){return c}if(a===true){a="1"}return b.toString().split(a.toString())}function getCaretPos(c){var b=0;if(document.selection){c.focus();var a=document.selection.createRange();a.moveStart("character",-c.value.length);b=a.text.length}else{if(c.selectionStart||c.selectionStart=="0"){b=c.selectionStart}}return(b)}function setCaretTo(b,c){if(b.setSelectionRange){b.focus();b.setSelectionRange(c,c)}else{if(b.createTextRange){var a=b.createTextRange();a.collapse(true);a.moveEnd("character",c);a.moveStart("character",c);a.select()}}}function ReloadPage(){var a=parent.location;parent.location=a}function GoToURL(b){var a=$.url(b);if(a.attr("fragment")){var c=a.attr("protocol")+"://"+a.attr("host")+""+a.attr("path")+"?"+a.attr("query");document.location=c}document.location=b}function cofirm_and_go_to_url(b,a){if(confirm(b)){parent.location=""+a+""}}function trim(a){return rtrim(ltrim(a))}function in_array(e,d,a){var c=false,b,a=!!a;for(b in d){if((a&&d[b]===e)||(!a&&d[b]==e)){c=true;break}}return c}function array_unique(d){var c,b,a;for(b=d.length;b;){for(c=--b;c>0;){if(d[b]===d[--c]){for(a=c;--c&&d[b]===d[c];){}b-=d.splice(c+1,a-c).length}}}return d}function intval(b,c){var a;if(typeof(b)=="string"){a=parseInt(b);if(isNaN(a)){return 0}else{return a.toString(c||10)}}else{if(typeof(b)=="number"){return Math.floor(b)}else{return 0}}}function count(c){var b=0;for(var a in c){if(a){b++}}return b}function XS_is_array(a){return(a instanceof Array)}Array.max=function(a){if(count(a)==0){a=new Array("0")}return Math.max.apply(Math,a)};Array.min=function(a){return Math.min.apply(Math,a)};function rand(b,a){if(a){return Math.floor(Math.random()*(a-b+1))+b}else{return Math.floor(Math.random()*(b+1))}}function uniqid(d,c){if(typeof d=="undefined"){d=""}var b;var a=function(e,f){e=parseInt(e,10).toString(16);if(f<e.length){return e.slice(e.length-f)}if(f>e.length){return Array(1+(f-e.length)).join("0")+e}return e};if(!this.php_js){this.php_js={}}if(!this.php_js.uniqidSeed){this.php_js.uniqidSeed=Math.floor(Math.random()*123456789)}this.php_js.uniqidSeed++;b=d;b+=a(parseInt(new Date().getTime()/1000,10),8);b+=a(this.php_js.uniqidSeed,5);if(c){b+=(Math.random()*10).toFixed(8).toString()}return b}function js_redirect(a,b){var b=((b*1000)+1);setTimeout('location.replace("'+a+'")',""+b+"")}function preventSelection(c){var d=false;function e(f,h,g){if(f.attachEvent){f.attachEvent("on"+h,g)}else{if(f.addEventListener){f.addEventListener(h,g,false)}}}function b(){if(window.getSelection){window.getSelection().removeAllRanges()}else{if(document.selection&&document.selection.clear){document.selection.clear()}}}function a(h){var h=h||window.event;var g=h.target||h.srcElement;if(g.tagName.match(/INPUT|TEXTAREA/i)){return}var f=h.keyCode||h.which;if(h.ctrlKey&&f=="A".charCodeAt(0)){b();if(h.preventDefault){h.preventDefault()}else{h.returnValue=false}}}e(c,"mousemove",function(){if(d){b()}});e(c,"mousedown",function(g){var g=g||window.event;var f=g.target||g.srcElement;d=!f.tagName.match(/INPUT|TEXTAREA/i)});e(c,"mouseup",function(){if(d){b()}d=false});e(c,"keydown",a);e(c,"keyup",a)}$(function(){$("[jq=reset_form]").click(function(){$(this).parents("form").clearForm()})});(function(b){var a={LoadPage:function(d){var c=this;if(!c.opts.GetParam){c.opts.GetParam=new Object()}c.opts.GetParam.p=d;c.opts.Url=html_entity_decode(c.opts.Url);b.ajax({type:"GET",url:c.opts.Url,data:c.opts.GetParam,beforeSend:function(){c.trigger("beforeSend")},success:function(e){c.Page=d;c.html(e);c.xsPageLoad("set");if(c.opts.ScrollToTop){if(!isScrolledIntoView(c.find(":first-child"))){jQuery.scrollTo(c.find(":first-child"),100,{offset:{top:-50}})}}c.trigger("OnShow")}});return this},GetPage:function(){var c=this;return c.Page},ScrollToOnShow:function(){var c=this;c.xsPageLoad("LoadPage",c.Page);return this},LoadFirstPage:function(){var c=this;c.xsPageLoad("LoadPage",1);return this},Reload:function(){var c=this;c.xsPageLoad("LoadPage",c.Page);return this},init:function(d){var c=this;var e={ScrollToTop:true};c.opts=b.extend(e,d);c.xsPageLoad("set");return this},SetGoToLastPage:function(d){var c=this;c.opts.GetParam.GoToLastPost=d;return this},set:function(){var c=this;c.unbind("OnShow").bind("OnShow",c.opts.OnShow);c.unbind("beforeSend").bind("beforeSend",c.opts.beforeSend);var d=this.find("[jq=GetParam]").html();if(d){c.opts.GetParam=b.extend(c.opts.GetParam,jQuery.parseJSON(d))}c.Page=b("[jq=button_page]").find(".ps").attr("page");c.find("[jq=button_page]").find(".p").click(function(){var e=b(this).attr("href","javascript:void(0)").attr("page");c.xsPageLoad("LoadPage",e)});c.find("form[jq=PageSet]").each(function(){var e=b(this);e.ajaxForm(function(){var f=e.find("[name=p]").val();c.xsPageLoad("LoadPage",f)})});c.find("form[jq=OnPageSet]").each(function(){var e=b(this);e.ajaxForm(function(){var f=e.find("[name=o]").val();c.opts.GetParam.o=f;c.xsPageLoad("Reload")})});return this}};b.fn.xsPageLoad=function(c){if(a[c]){return a[c].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof c==="object"||!c){return a.init.apply(this,arguments)}else{b.error("Метод "+c+" в jQuery.xsPageLoad не существует")}}}})(jQuery);(function(b){var a={Init:function(d){var c=this;var e={Delay:500,Label:"TimerSearch"};c.opts=b.extend(e,d);c.unbind("SearchFuncOnShow").bind("SearchFuncOnShow",c.opts.OnShow);c.xsSearchFunc("PlaceLoadFunc");c.opts.Form.find("input[type=text]").unbind("keyup").keyup(function(f){if(f.keyCode==13){c.xsSearchFunc("FormSubmit")}});c.opts.Form.find("textarea").unbind("keyup").keyup(function(){c.opts.Form.stopTime(c.opts.Label).oneTime(c.opts.Delay,c.opts.Label,function(){c.xsSearchFunc("FormSubmit")})});c.opts.Form.find("select").unbind("change").change(function(){c.xsSearchFunc("FormSubmit")});c.opts.Form.find("input[type=checkbox]").unbind("change").change(function(){c.xsSearchFunc("FormSubmit")});c.opts.Form.find("input[type=radio]").unbind("change").change(function(){c.xsSearchFunc("FormSubmit")});c.opts.Form.find("input[type=hidden]").unbind("change").change(function(){c.xsSearchFunc("FormSubmit")});c.opts.Form.find("[jq=reset_form]").unbind("click").click(function(){c.opts.Form.clearForm();c.xsSearchFunc("FormSubmit")});return c},FormSubmit:function(){var c=this;c.opts.PlaceLoad.html('<div class="island" style="line-height:48px"><span style="font-family:RobotoBold;font-size:14px;font-size:1.4rem;margin-left:14px;">Идёт поиск ...</div><div style="text-align:center;"><img src="/img/ajax-loader.gif"></div>');c.opts.Form.ajaxSubmit({url:c.opts.Url,type:"POST",success:function(d){c.opts.PlaceLoad.html(d);c.xsSearchFunc("PlaceLoadFunc")}});return c},ReloadPage:function(){var c=this;c.opts.PlaceLoad.xsPageLoad("Reload");return c},PlaceLoadFunc:function(){var c=this;c.trigger("SearchFuncOnShow");makedrop();c.opts.PlaceLoad.xsPageLoad({Url:c.opts.Url,OnShow:function(){c.trigger("SearchFuncOnShow")}});return c}};b.fn.xsSearchFunc=function(c){if(a[c]){return a[c].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof c==="object"||!c){return a.Init.apply(this,arguments)}else{b.error("Метод "+c+" в jQuery.xsSearchFunc не существует")}}}})(jQuery);function makedrop(){$(".author_name").draggable({helper:"clone"});$(".author_container").droppable({drop:function(c,d){var e=d.draggable.text();var b=d.draggable.attr("AuthorId");var e=e+" - "+d.draggable.attr("AuthorRating");var a=$("[jq=SelectedAuthorList]");a.append('<div AuthorId="'+b+'"><div class="search_key search_clear"><a href="" onclick="return false;" jq="Delete">Удалить</a></div><div class="search_key search_item" style="margin:0px 23px;">'+e+"</div></div>");a.find("[AuthorId]").each(function(){var f=$(this);f.find("[jq=Delete]").click(function(){f.remove()})})}})}function ViewFormErrors(){this.Array;this.ParentStructAr;this.IsErrorExistsVar=false;this.Container;this.Init=function(){var a=this;$("[jq=FormError]").remove();a.Show()},this.Show=function(){var b=this;var a;if(!b.ParentStructAr){b.ParentStructAr=Array()}if(b.Array){$.each(b.Array,function(c,d){b.ParentStructAr.push(c);if(d.Errors){if(!d.Selector){a=b.GetSelector()}else{a=d.Selector}b.PrintError(a,d.Errors)}if(d.InnerList){b.HandleInnerList(d.InnerList)}if(d.Inner){var e=new ViewFormErrors();e.Array=d.Inner;e.ParentStructAr=b.ParentStructAr;e.Container=b.Container;e.Show();if(e.IsErrorExists()){b.SetErrorExists()}}b.ParentStructAr.splice(-1,1)})}},this.HandleInnerList=function(b){var a=this;$.each(b,function(c,d){a.ParentStructAr.push(c);if(d.Error){if(!d.Selector){Selector=a.GetSelector()}else{Selector=d.Selector}a.PrintError(Selector,d.Error)}if(d.List){var e=new ViewFormErrors();e.Array=d.List;e.ParentStructAr=a.ParentStructAr;e.Container=a.Container;e.Show();if(e.IsErrorExists()){a.SetErrorExists()}}a.ParentStructAr.splice(-1,1)})},this.GetSelector=function(){var b=this;var a="";$.each(b.ParentStructAr,function(d,c){if(d<1){a+=c}else{a+="\\["+c+"\\]"}});return'[name^="'+a+'"]'},this.PrintError=function(a,d){var b=this;var c="";b.SetErrorExists();if(a){c+='<div class="lt106"><ul jq="FormError">';$.each(d,function(f,e){c+="<li>"+e+"</li>"});c+="</ul></div>";if(b.Container){b.Container.find(a).first().after(c)}else{$(a).first().after(c)}}},this.IsErrorExists=function(){var a=this;if(a.IsErrorExistsVar){return true}else{return false}},this.SetErrorExists=function(){var a=this;a.IsErrorExistsVar=true}}(function(b){var a={Init:function(d){var c=this;if(!c.exists()){return c}var f='<div style="padding:5px; background-color:#E9E9E9; text-align:center;">';var e="</div>";var g={ShowHtml:f+"Показать далее ↓↓"+e,HideHtml:f+"Скрыть ↑↑"+e};c.opts=b.extend(g,d);c.unbind("onShow").bind("onShow",c.opts.onShow);c.unbind("onHide").bind("onHide",c.opts.onHide);c.unbind("beforeShow").bind("beforeShow",c.opts.beforeShow);c.unbind("beforeHide").bind("beforeHide",c.opts.beforeHide);if(!c.opts.maxHeight){if(c.css("max-height")){c.opts.maxHeight=c.css("max-height")}}c.ToggleButton=b("<div />").css("cursor","pointer");if(c[0].scrollHeight>(intval(c.opts.maxHeight)+100)){c.xsTextHide("Hide",1);c.after(c.ToggleButton)}return c},Show:function(){var c=this;c.trigger("beforeShow",c);c.ToggleButton.html(c.opts.HideHtml);c.css("max-height","none").css("overflow-y","visible");c.ToggleButton.unbind("click").click(function(){c.xsTextHide("Hide")});c.trigger("onShow",c);return c},Hide:function(d){var c=this;if(!d){c.trigger("beforeHide",c)}c.ToggleButton.html(c.opts.ShowHtml);c.css("max-height",c.opts.maxHeight).css("overflow-y","hidden");c.css("border-bottom","1px dashed #CCC");c.ToggleButton.unbind("click").click(function(){c.xsTextHide("Show")});if(!d){c.trigger("onHide",c)}return c}};b.fn.xsTextHide=function(c){if(a[c]){return a[c].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof c==="object"||!c){return a.Init.apply(this,arguments)}else{b.error("Метод "+c+" в не существует")}}}})(jQuery);(function(b){var a={Init:function(d){var c=this;if(!c.exists()){return c}var f='<div id="SearchHide" style="padding:5px; background-color:FFF; text-align:center;">';var e="</div>";var g={ShowHtml:f+"Показать доп. параметры ↓↓"+e,HideHtml:f+"Скрыть доп. параметры ↑↑"+e};c.opts=b.extend(g,d);c.unbind("onShow").bind("onShow",c.opts.onShow);c.unbind("onHide").bind("onHide",c.opts.onHide);c.unbind("beforeShow").bind("beforeShow",c.opts.beforeShow);c.unbind("beforeHide").bind("beforeHide",c.opts.beforeHide);if(!c.opts.maxHeight){if(c.css("max-height")){c.opts.maxHeight=c.css("max-height")}}c.ToggleButton=b("<div />").css("cursor","pointer");if(c[0].scrollHeight>(intval(c.opts.maxHeight)+100)){c.xsSearchHide("Hide",1);c.after(c.ToggleButton)}return c},Show:function(){var c=this;c.trigger("beforeShow",c);c.ToggleButton.html(c.opts.HideHtml);c.css("max-height","none").css("overflow-y","visible");c.ToggleButton.unbind("click").click(function(){c.xsSearchHide("Hide")});c.trigger("onShow",c);return c},Hide:function(d){var c=this;if(!d){c.trigger("beforeHide",c)}c.ToggleButton.html(c.opts.ShowHtml);c.css("max-height",c.opts.maxHeight).css("overflow-y","hidden");c.css("border-bottom","1px dashed #CCC");c.ToggleButton.unbind("click").click(function(){c.xsSearchHide("Show")});if(!d){c.trigger("onHide",c)}return c}};b.fn.xsSearchHide=function(c){if(a[c]){return a[c].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof c==="object"||!c){return a.Init.apply(this,arguments)}else{b.error("Метод "+c+" в не существует")}}}})(jQuery);function ShowEmailForm(c,a,f,b,e){var d="<table>";d+="	<tbody>";d+="		<tr>";d+='		    <td class="lts1">';d+="			Кому (имя друга):<br/>";d+='			<input type="text" value="" name="Name" id="Name" size="50">';d+="		    </td>";d+="		</tr>";d+="		<tr>";d+='		    <td class="lts1">';d+="			E-mail друга:<br/>";d+='			<input type="email" value="" name="Email" id="Email" size="50">';d+="		    </td>";d+="		</tr>";d+="		<tr>";d+='		    <td class="lts1">';d+="			Тема:<br/>";d+='			<input type="email" value="'+f+'" name="Subject" id="Subject" size="50">';d+="		    </td>";d+="		</tr>";d+="		<tr>";d+='		    <td class="lts1">';d+="			Сообщение:<br/>";d+='			<textarea name="Message" id="Message" cols="38" rows="5">'+b+"</textarea>";d+="		   </td>";d+="		</tr>";d+="	</tbody>";d+="  </table>";$("<div />",{html:d}).dialog({resizable:false,modal:true,width:400,title:"Отправить e-mail другу",buttons:{OK:function(){var g=$(this);$.ajax({url:e,type:"POST",data:"ObjType="+c+"&ObjID="+a+"&Name="+$("#Name").val()+"&Email="+$("#Email").val()+"&Subject="+$("#Subject").val()+"&Message="+$("#Message").val(),success:function(h){var k=xsJsonParse(h);if(k.Content=="Письмо успешно отправлено"){var l="email"+c+a;var j=$("#"+l).html();j++;$("#"+l).html(j)}xsMessage(k.Content)}})},"Отмена":function(){$(this).dialog("close")}}})}function ShowCommunityForm(k){var m=$("#commsg").text();var a=new Date();var c=a.getMinutes();var d=a.getHours();var j=a.getDate();var g=a.getMonth()+1;var h=a.getFullYear();if(c<=9){c="0"+c}if(d<=9){d="0"+d}if(j<=9){j="0"+j}if(g<=9){g="0"+g}var l=j+"."+g+"."+h+" "+d+":"+c;var f=a.getTime()/1000;var b=$.md5(Math.random());var e="<table>";e+="	<tbody>";e+="		<tr>";e+='		    <td class="lts1">';e+="			Сообщение:<br/>";e+='			<textarea name="Message" id="Message" cols="50" rows="12">'+m+"</textarea>";e+="		   </td>";e+="		</tr>";e+="		<tr>";e+='		   <td class="lts1">';e+='			<input type="checkbox" checked="checked" name="AttCover" id="AttCover'+b+'" value="1">';e+='			<label for="AttCover'+b+'">Прикреплять к сообщению обложку книги?</label><br/>';e+="		   </td>";e+="		</tr>";e+="		<tr>";e+='		   <td class="lts1">';e+="			Дата публикации сообщения:<br/>";e+='			<input type="text" name="publtimeval" id="publtimeval'+b+'" value="'+l+'">';e+='			<input type="hidden" name="publtime" id="publtime" value="'+f+'"><br/>';e+="			Если дата будет раньше текущей даты, то сообщение не попадёт в отложенные.<br/>";e+="		   </td>";e+="		</tr>";e+="	</tbody>";e+="  </table>";$("<div />",{html:e}).dialog({resizable:false,modal:true,width:400,title:"Написать в сообщество",buttons:{OK:function(){var n=$(this);$.ajax({url:"/CommunityPost",type:"POST",data:"message="+$("#Message").val()+"&attcover="+$("#AttCover"+b).prop("checked")+"&bookid="+k+"&publtime="+$("#publtime").val(),success:function(o){var p=xsJsonParse(o);xsMessage(p.Content)}})},"Отмена":function(){$(this).dialog("close")}}});var a=new Date();$("#publtimeval"+b).datetimepicker({controlType:"select",oneLine:true,timeFormat:"HH:mm",showSecond:false,showMillisec:false,showMicrosec:false,showTimeZone:false,minute:c,hour:d,day:j,month:g,year:h}).change(function(){$("#publtime").val($("#publtimeval"+b).datetimepicker("getDate").getTime()/1000)})}function sendNotification(d,b,a){if(!("Notification" in window)){alert("Ваш браузер не поддерживает HTML Notifications, его необходимо обновить.")}else{if(Notification.permission==="granted"){var c=new Notification(d,b);localStorage.setItem("url",a);c.onclick=function(){var e=localStorage.getItem("url");localStorage.removeItem("url");if(e){window.open(e,"_blank")}}}else{if(Notification.permission!=="denied"){Notification.requestPermission(function(e){if(e==="granted"){var f=new Notification(d,b);localStorage.setItem("url",a);f.onclick=function(){var g=localStorage.getItem("url");localStorage.removeItem("url");if(g){window.open(g,"_blank")}}}else{alert("Вы запретили показывать уведомления")}})}}}}function GetNotify(){$.ajax({url:"/NotifyGet",success:function(b){var a=jQuery.parseJSON(b);if(a.Text){sendNotification(a.Title,{body:a.Text,dir:"auto",icon:"/img/icon.jpg"},a.Url)}}})}function updatevip(a,b){$.ajax({url:"/UpdateVIP",data:"BookID="+a+"&key="+$.md5(Math.random()),success:function(d){var c=jQuery.parseJSON(d);if(c.Content=="0"){$(b).find("img").attr("src","/img/bstar.png")}else{$(b).find("img").attr("src","/img/star.png")}}})}function updatewidget(a,b){$.ajax({url:"/UpdateWidget",data:"BookID="+a+"&key="+$.md5(Math.random()),success:function(d){var c=jQuery.parseJSON(d);if(c.Content=="0"){$(b).find("img").attr("src","/img/brotate.png")}else{$(b).find("img").attr("src","/img/rotate.png")}}})}function hidebook(a,b){$("<div />",{html:'Сообщите причину закрытия:<br><input type="text" id="hide_reason" size="30">'}).dialog({resizable:false,modal:true,title:"",buttons:{"Да":function(){var d=$(this);var c=$("#hide_reason").val();$.ajax({url:"/BookSecretHide",data:"BookId="+a+"&HideReason="+c,success:function(e){var f=xsJsonParse(e);ReloadPage()}})},"Нет":function(){$(this).dialog("close")}}})}$(function(){var a=xsJsDataGet("IsLogined");if(a){setInterval(GetNotify,60000)}});$(function(){$.ui.dialog.prototype._focusTabbable=function(){};var a=$.ui.autocomplete.prototype._renderItem;$.ui.autocomplete.prototype._renderItem=function(d,f){var e=new RegExp(""+this.term,"i");var c=f.label.replace(e,"<span style='font-weight:bold;color:Blue;'>$&</span>");return $("<li></li>").data("item.autocomplete",f).append("<a>"+c+"</a>").appendTo(d)};jQuery.expr[":"].regex=function(j,f,e){var k=e[3].split(","),d=/^(data|css):/,c={method:k[0].match(d)?k[0].split(":")[0]:"attr",property:k.shift().replace(d,"")},h="ig",g=new RegExp(k.join("").replace(/^\s+|\s+$/g,""),h);return g.test(jQuery(j)[c.method](c.property))};jQuery.fn.exists=function(){return this.length>0};jQuery.fn.fullHTML=function(){var c=$("<div />");c.append(this.clone());return c.html()};var b=!!CSSStyleDeclaration.prototype.getPropertyValue;if(!b){CSSStyleDeclaration.prototype.getPropertyValue=function(c){return this.getAttribute(c)};CSSStyleDeclaration.prototype.setProperty=function(d,e,c){this.setAttribute(d,e);var c=typeof c!="undefined"?c:"";if(c!=""){var f=new RegExp(RegExp.escape(d)+"\\s*:\\s*"+RegExp.escape(e)+"(\\s*;)?","gmi");this.cssText=this.cssText.replace(f,d+": "+e+" !"+c+";")}};CSSStyleDeclaration.prototype.removeProperty=function(c){return this.removeAttribute(c)};CSSStyleDeclaration.prototype.getPropertyPriority=function(c){var d=new RegExp(RegExp.escape(c)+"\\s*:\\s*[^\\s]*\\s*!important(\\s*;)?","gmi");return d.test(this.cssText)?"important":""}}RegExp.escape=function(c){return c.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")};jQuery.fn.style=function(d,g,c){var f=this.get(0);if(typeof f=="undefined"){return}var e=this.get(0).style;if(typeof d!="undefined"){if(typeof g!="undefined"){var c=typeof c!="undefined"?c:"";e.setProperty(d,g,c)}else{return e.getPropertyValue(d)}}else{return e}}});function adlabs_ad_220043(){var a=Math.round(Math.random()*100000);document.write('<script language="javascript" type="text/javascript" src="http://id84931.luxup.ru/show/220043/?div=lx_220043&rt='+a+"&r="+escape(document.referrer)+'"><\/script>')}function adlabs_ad_220042(){var a=Math.round(Math.random()*100000);document.write('<script language="javascript" type="text/javascript" src="http://id84931.luxup.ru/show/220042/?div=lx_220042&rt='+a+"&r="+escape(document.referrer)+'"><\/script>')}function adlabs_ad_377665(){var a=Math.round(Math.random()*100000);document.write('<script language="javascript" type="text/javascript" src="http://id84931.luxup.ru/show/377665/?div=lx_377665&rt='+a+"&r="+escape(document.referrer)+'"><\/script>')}function marketgid(){var a=new Date();document.write('<script type="text/javascript" src="http://jsg.dt00.net/l/i/litmir.net.9625.js?t='+a.getYear()+a.getMonth()+'"" charset="utf-8" ><\/script>')}function marketgid2(){var a=new Date();document.write('<script type="text/javascript" src="http://jsc.dt00.net/l/i/litmir.net.12850.js?t='+a.getYear()+a.getMonth()+a.getDate()+a.getHours()+'" charset="utf-8"><\/script>')}function pay_click1(){var a=Math.floor(Math.random()*10000);document.write('<script language="javascript" type="text/javascript" src="http://n.adonweb.ru/payclick/adv-out/?Id=40406&RNum='+a+"&Referer="+escape(document.referrer)+'"><\/script>')}function pay_click2(){var a=Math.floor(Math.random()*10000);document.write('<script language="javascript" type="text/javascript" src="http://n.adonweb.ru/payclick/adv-out/?Id=40407&RNum='+a+"&Referer="+escape(document.referrer)+'"><\/script>')}function pingmedia_richmedia(){var a=Math.round(Math.random()*1000000000);var b="unknown";if(document.referrer){b=escape(document.referrer)}document.write('<script language="JavaScript" src="http://ad.adriver.ru/cgi-bin/erle.cgi?sid=175007&bt=16&target=blank&rnd='+a+"&tail256="+b+'"><\/script>')}function pingmedia_240_400(){if(typeof(c)=="undefined"){var c=1}var d=document.referrer?escape(document.referrer):"unknown";var b="http://ad.adriver.ru/cgi-bin/erle.cgi?sid=175007&bt=49&target=blank&tail256="+d;document.write('<div style="visibility:hidden;height:0px;"><iframe id="ar_container_'+c+'" width=1 height=1 marginwidth=0 marginheight=0 scrolling=no frameborder=0></iframe></div><div id="ad_ph_'+c+'"></div>');function a(g,j,e){var h;if(g<100){if(document.all&&!window.opera){h=window.frames["ar_container_"+j].document}else{if(document.getElementById){h=document.getElementById("ar_container_"+j).contentDocument}}if(!h){setTimeout("ar_getDoc("+(++g)+","+j+',"'+e+'")',100)}else{var f=Math.round(Math.random()*1000000000);h.write('<script language="JavaScript" type="text/javascript">var ar_bnum='+j+";<\/script>");h.write('<script language="JavaScript" type="text/javascript" src="'+e+"&rnd="+f+'"><\/script>')}}}(function(f,h){function g(m,k,l){if(m.addEventListener){m.addEventListener(k,l,false)}else{if(m.attachEvent){m.attachEvent("on"+k,l)}}}function j(m,k,l){if(m.removeEventListener){m.removeEventListener(k,l,false)}else{if(m.detachEvent){m.detachEvent("on"+k,l)}}}var e={top:0,height:400,cm:document.compatMode=="CSS1Compat",scroll:function(){var m=self.innerHeight||this.cm&&document.documentElement.clientHeight||document.body.clientHeight;var k=self.pageYOffset||this.cm&&document.documentElement.scrollTop||document.body.scrollTop;var l=self.scrollHeight||this.cm&&document.documentElement.scrollHeight||document.body.scrollHeight;if((k-this.top<=this.height*0.2&&k+m-this.top>=this.height*0.8)||(l-this.top<=this.height*0.8&&(l-k-m<1||l<m))){j(window,"scroll",this.sfunc);a(0,f,h)}},sfunc:function(){e.scroll()},init:function(){var k=this,l=document.getElementById("ad_ph_"+f);if(l){while(l.offsetParent){k.top+=l.offsetTop;l=l.offsetParent}g(window,"scroll",this.sfunc);k.scroll()}}};g(window,"load",function(){e.init()})})(c++,b)}function pingmedia_TopLine(){(function(a){if(typeof(ar_cn)=="undefined"){ar_cn=1}var e='setTimeout(function(e){if(!self.CgiHref){document.close();e=parent.document.getElementById("ar_container_"+ar_bnum);e.parentNode.removeChild(e);}},3000);',c=' type="text/javascript"',d=0,f=document,g=ar_cn;a+=escape(f.referrer||"unknown")+"&rnd="+Math.round(Math.random()*999999999);function b(){if(d++<100){var h=f.getElementById("ar_container_"+g);if(h){try{var l=h.contentDocument||(window.ActiveXObject&&window.frames["ar_container_"+g].document);if(l){l.write("<script"+c+">var ar_bnum="+g+";"+e+"<\/script><script"+c+' src="'+a+'"><\/script>');d=0}else{setTimeout(b,100)}}catch(k){try{h.src="javascript:{document.write('<sc'+'ript"+c+">var ar_bnum="+g+'; document.domain="'+f.domain+'";'+e+"</sc'+'ript>');document.write('<sc'+'ript"+c+' src="'+a+"\"></sc'+'ript>');}";return}catch(j){}}}else{setTimeout(b,100)}}}f.write('<div style="visibility:hidden;height:0px;left:-1000px;position:absolute;"><iframe id="ar_container_'+ar_cn+'" width=1 height=1 marginwidth=0 marginheight=0 scrolling=no frameborder=0></iframe></div><div id="ad_ph_'+ar_cn+'" style="display:none;"></div>');b();ar_cn++})("http://ad.adriver.ru/cgi-bin/erle.cgi?sid=175007&target=blank&bt=43&tail256=")}$(function(){$("[jq=Captcha]").each(function(){$("[jq=Reload]").click(function(){$.ajax({url:"/load_new_captcha",success:function(a){var b=xsJsonParse(a);$("[jq=LoadNew]").html(b.Content)}})})})});
/*
 * jQuery Cookie Plugin v1.4.0
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2013 Klaus Hartl
 * Released under the MIT license
 */
(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(jQuery)}}(function(f){var a=/\+/g;function d(j){return b.raw?j:encodeURIComponent(j)}function g(j){return b.raw?j:decodeURIComponent(j)}function h(j){return d(b.json?JSON.stringify(j):String(j))}function c(j){if(j.indexOf('"')===0){j=j.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\")}try{j=decodeURIComponent(j.replace(a," "))}catch(k){return}try{return b.json?JSON.parse(j):j}catch(k){}}function e(k,j){var l=b.raw?k:c(k);return f.isFunction(j)?j(l):l}var b=f.cookie=function(q,p,v){if(p!==undefined&&!f.isFunction(p)){v=f.extend({},b.defaults,v);if(typeof v.expires==="number"){var r=v.expires,u=v.expires=new Date();u.setDate(u.getDate()+r)}return(document.cookie=[d(q),"=",h(p),v.expires?"; expires="+v.expires.toUTCString():"",v.path?"; path="+v.path:"",v.domain?"; domain="+v.domain:"",v.secure?"; secure":""].join(""))}var w=q?undefined:{};var s=document.cookie?document.cookie.split("; "):[];for(var o=0,m=s.length;o<m;o++){var n=s[o].split("=");var j=g(n.shift());var k=n.join("=");if(q&&q===j){w=e(k,p);break}if(!q&&(k=e(k))!==undefined){w[j]=k}}return w};b.defaults={path:"/",expires:99999999};f.removeCookie=function(k,j){if(f.cookie(k)!==undefined){f.cookie(k,"",f.extend({},j,{expires:-1}));return true}return false}}));(function(e){function t(t){var r=t.data;t.isDefaultPrevented()||(t.preventDefault(),e(this).ajaxSubmit(r))}function r(t){var r=t.target,a=e(r);if(!a.is("[type=submit],[type=image]")){var n=a.closest("[type=submit]");if(0===n.length){return}r=n[0]}var i=this;if(i.clk=r,"image"==r.type){if(void 0!==t.offsetX){i.clk_x=t.offsetX,i.clk_y=t.offsetY}else{if("function"==typeof e.fn.offset){var o=a.offset();i.clk_x=t.pageX-o.left,i.clk_y=t.pageY-o.top}else{i.clk_x=t.pageX-r.offsetLeft,i.clk_y=t.pageY-r.offsetTop}}}setTimeout(function(){i.clk=i.clk_x=i.clk_y=null},100)}function a(){if(e.fn.ajaxSubmit.debug){var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}}var n={};n.fileapi=void 0!==e("<input type='file'/>").get(0).files,n.formdata=void 0!==window.FormData;var i=!!e.fn.prop;e.fn.attr2=function(){if(!i){return this.attr.apply(this,arguments)}var e=this.prop.apply(this,arguments);return e&&e.jquery||"string"==typeof e?e:this.attr.apply(this,arguments)},e.fn.ajaxSubmit=function(t){function r(r){var a,n,i=e.param(r,t.traditional).split("&"),o=i.length,s=[];for(a=0;o>a;a++){i[a]=i[a].replace(/\+/g," "),n=i[a].split("="),s.push([decodeURIComponent(n[0]),decodeURIComponent(n[1])])}return s}function o(a){for(var n=new FormData,i=0;a.length>i;i++){n.append(a[i].name,a[i].value)}if(t.extraData){var o=r(t.extraData);for(i=0;o.length>i;i++){o[i]&&n.append(o[i][0],o[i][1])}}t.data=null;var s=e.extend(!0,{},e.ajaxSettings,t,{contentType:!1,processData:!1,cache:!1,type:u||"POST"});t.uploadProgress&&(s.xhr=function(){var r=e.ajaxSettings.xhr();return r.upload&&r.upload.addEventListener("progress",function(e){var r=0,a=e.loaded||e.position,n=e.total;e.lengthComputable&&(r=Math.ceil(100*(a/n))),t.uploadProgress(e,a,n,r)},!1),r}),s.data=null;var l=s.beforeSend;return s.beforeSend=function(e,t){t.data=n,l&&l.call(this,e,t)},e.ajax(s)}function s(r){function n(e){var t=null;try{e.contentWindow&&(t=e.contentWindow.document)}catch(r){a("cannot get iframe.contentWindow document: "+r)}if(t){return t}try{t=e.contentDocument?e.contentDocument:e.document}catch(r){a("cannot get iframe.contentDocument: "+r),t=e.document}return t}function o(){function t(){try{var e=n(g).readyState;a("state = "+e),e&&"uninitialized"==e.toLowerCase()&&setTimeout(t,50)}catch(r){a("Server abort: ",r," (",r.name,")"),s(D),j&&clearTimeout(j),j=void 0}}var r=f.attr2("target"),i=f.attr2("action");w.setAttribute("target",d),u||w.setAttribute("method","POST"),i!=m.url&&w.setAttribute("action",m.url),m.skipEncodingOverride||u&&!/post/i.test(u)||f.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),m.timeout&&(j=setTimeout(function(){T=!0,s(k)},m.timeout));var o=[];try{if(m.extraData){for(var l in m.extraData){m.extraData.hasOwnProperty(l)&&(e.isPlainObject(m.extraData[l])&&m.extraData[l].hasOwnProperty("name")&&m.extraData[l].hasOwnProperty("value")?o.push(e('<input type="hidden" name="'+m.extraData[l].name+'">').val(m.extraData[l].value).appendTo(w)[0]):o.push(e('<input type="hidden" name="'+l+'">').val(m.extraData[l]).appendTo(w)[0]))}}m.iframeTarget||(v.appendTo("body"),g.attachEvent?g.attachEvent("onload",s):g.addEventListener("load",s,!1)),setTimeout(t,15);try{w.submit()}catch(c){var p=document.createElement("form").submit;p.apply(w)}}finally{w.setAttribute("action",i),r?w.setAttribute("target",r):f.removeAttr("target"),e(o).remove()}}function s(t){if(!x.aborted&&!F){if(M=n(g),M||(a("cannot access response document"),t=D),t===k&&x){return x.abort("timeout"),S.reject(x,"timeout"),void 0}if(t==D&&x){return x.abort("server abort"),S.reject(x,"error","server abort"),void 0}if(M&&M.location.href!=m.iframeSrc||T){g.detachEvent?g.detachEvent("onload",s):g.removeEventListener("load",s,!1);var r,i="success";try{if(T){throw"timeout"}var o="xml"==m.dataType||M.XMLDocument||e.isXMLDoc(M);if(a("isXml="+o),!o&&window.opera&&(null===M.body||!M.body.innerHTML)&&--O){return a("requeing onLoad callback, DOM not available"),setTimeout(s,250),void 0}var u=M.body?M.body:M.documentElement;x.responseText=u?u.innerHTML:null,x.responseXML=M.XMLDocument?M.XMLDocument:M,o&&(m.dataType="xml"),x.getResponseHeader=function(e){var t={"content-type":m.dataType};return t[e.toLowerCase()]},u&&(x.status=Number(u.getAttribute("status"))||x.status,x.statusText=u.getAttribute("statusText")||x.statusText);var l=(m.dataType||"").toLowerCase(),c=/(json|script|text)/.test(l);if(c||m.textarea){var f=M.getElementsByTagName("textarea")[0];if(f){x.responseText=f.value,x.status=Number(f.getAttribute("status"))||x.status,x.statusText=f.getAttribute("statusText")||x.statusText}else{if(c){var d=M.getElementsByTagName("pre")[0],h=M.getElementsByTagName("body")[0];d?x.responseText=d.textContent?d.textContent:d.innerText:h&&(x.responseText=h.textContent?h.textContent:h.innerText)}}}else{"xml"==l&&!x.responseXML&&x.responseText&&(x.responseXML=X(x.responseText))}try{E=_(x,l,m)}catch(b){i="parsererror",x.error=r=b||i}}catch(b){a("error caught: ",b),i="error",x.error=r=b||i}x.aborted&&(a("upload aborted"),i=null),x.status&&(i=x.status>=200&&300>x.status||304===x.status?"success":"error"),"success"===i?(m.success&&m.success.call(m.context,E,"success",x),S.resolve(x.responseText,"success",x),p&&e.event.trigger("ajaxSuccess",[x,m])):i&&(void 0===r&&(r=x.statusText),m.error&&m.error.call(m.context,x,i,r),S.reject(x,"error",r),p&&e.event.trigger("ajaxError",[x,m,r])),p&&e.event.trigger("ajaxComplete",[x,m]),p&&!--e.active&&e.event.trigger("ajaxStop"),m.complete&&m.complete.call(m.context,x,i),F=!0,m.timeout&&clearTimeout(j),setTimeout(function(){m.iframeTarget||v.remove(),x.responseXML=null},100)}}}var l,c,m,p,d,v,g,x,b,y,T,j,w=f[0],S=e.Deferred();if(S.abort=function(e){x.abort(e)},r){for(c=0;h.length>c;c++){l=e(h[c]),i?l.prop("disabled",!1):l.removeAttr("disabled")}}if(m=e.extend(!0,{},e.ajaxSettings,t),m.context=m.context||m,d="jqFormIO"+(new Date).getTime(),m.iframeTarget?(v=e(m.iframeTarget),y=v.attr2("name"),y?d=y:v.attr2("name",d)):(v=e('<iframe name="'+d+'" src="'+m.iframeSrc+'" />'),v.css({position:"absolute",top:"-1000px",left:"-1000px"})),g=v[0],x={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(t){var r="timeout"===t?"timeout":"aborted";a("aborting upload... "+r),this.aborted=1;try{g.contentWindow.document.execCommand&&g.contentWindow.document.execCommand("Stop")}catch(n){}v.attr("src",m.iframeSrc),x.error=r,m.error&&m.error.call(m.context,x,r,t),p&&e.event.trigger("ajaxError",[x,m,r]),m.complete&&m.complete.call(m.context,x,r)}},p=m.global,p&&0===e.active++&&e.event.trigger("ajaxStart"),p&&e.event.trigger("ajaxSend",[x,m]),m.beforeSend&&m.beforeSend.call(m.context,x,m)===!1){return m.global&&e.active--,S.reject(),S}if(x.aborted){return S.reject(),S}b=w.clk,b&&(y=b.name,y&&!b.disabled&&(m.extraData=m.extraData||{},m.extraData[y]=b.value,"image"==b.type&&(m.extraData[y+".x"]=w.clk_x,m.extraData[y+".y"]=w.clk_y)));var k=1,D=2,A=e("meta[name=csrf-token]").attr("content"),L=e("meta[name=csrf-param]").attr("content");L&&A&&(m.extraData=m.extraData||{},m.extraData[L]=A),m.forceSync?o():setTimeout(o,10);var E,M,F,O=50,X=e.parseXML||function(e,t){return window.ActiveXObject?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&"parsererror"!=t.documentElement.nodeName?t:null},C=e.parseJSON||function(e){return window.eval("("+e+")")},_=function(t,r,a){var n=t.getResponseHeader("content-type")||"",i="xml"===r||!r&&n.indexOf("xml")>=0,o=i?t.responseXML:t.responseText;return i&&"parsererror"===o.documentElement.nodeName&&e.error&&e.error("parsererror"),a&&a.dataFilter&&(o=a.dataFilter(o,r)),"string"==typeof o&&("json"===r||!r&&n.indexOf("json")>=0?o=C(o):("script"===r||!r&&n.indexOf("javascript")>=0)&&e.globalEval(o)),o};return S}if(!this.length){return a("ajaxSubmit: skipping submit process - no element selected"),this}var u,l,c,f=this;"function"==typeof t?t={success:t}:void 0===t&&(t={}),u=t.type||this.attr2("method"),l=t.url||this.attr2("action"),c="string"==typeof l?e.trim(l):"",c=c||window.location.href||"",c&&(c=(c.match(/^([^#]+)/)||[])[1]),t=e.extend(!0,{url:c,success:e.ajaxSettings.success,type:u||e.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},t);var m={};if(this.trigger("form-pre-serialize",[this,t,m]),m.veto){return a("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this}if(t.beforeSerialize&&t.beforeSerialize(this,t)===!1){return a("ajaxSubmit: submit aborted via beforeSerialize callback"),this}var p=t.traditional;void 0===p&&(p=e.ajaxSettings.traditional);var d,h=[],v=this.formToArray(t.semantic,h);if(t.data&&(t.extraData=t.data,d=e.param(t.data,p)),t.beforeSubmit&&t.beforeSubmit(v,this,t)===!1){return a("ajaxSubmit: submit aborted via beforeSubmit callback"),this}if(this.trigger("form-submit-validate",[v,this,t,m]),m.veto){return a("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this}var g=e.param(v,p);d&&(g=g?g+"&"+d:d),"GET"==t.type.toUpperCase()?(t.url+=(t.url.indexOf("?")>=0?"&":"?")+g,t.data=null):t.data=g;var x=[];if(t.resetForm&&x.push(function(){f.resetForm()}),t.clearForm&&x.push(function(){f.clearForm(t.includeHidden)}),!t.dataType&&t.target){var b=t.success||function(){};x.push(function(r){var a=t.replaceTarget?"replaceWith":"html";e(t.target)[a](r).each(b,arguments)})}else{t.success&&x.push(t.success)}if(t.success=function(e,r,a){for(var n=t.context||this,i=0,o=x.length;o>i;i++){x[i].apply(n,[e,r,a||f,f])}},t.error){var y=t.error;t.error=function(e,r,a){var n=t.context||this;y.apply(n,[e,r,a,f])}}if(t.complete){var T=t.complete;t.complete=function(e,r){var a=t.context||this;T.apply(a,[e,r,f])}}var j=e('input[type=file]:enabled:not([value=""])',this),w=j.length>0,S="multipart/form-data",k=f.attr("enctype")==S||f.attr("encoding")==S,D=n.fileapi&&n.formdata;a("fileAPI :"+D);var A,L=(w||k)&&!D;t.iframe!==!1&&(t.iframe||L)?t.closeKeepAlive?e.get(t.closeKeepAlive,function(){A=s(v)}):A=s(v):A=(w||k)&&D?o(v):e.ajax(t),f.removeData("jqxhr").data("jqxhr",A);for(var E=0;h.length>E;E++){h[E]=null}return this.trigger("form-submit-notify",[this,t]),this},e.fn.ajaxForm=function(n){if(n=n||{},n.delegation=n.delegation&&e.isFunction(e.fn.on),!n.delegation&&0===this.length){var i={s:this.selector,c:this.context};return !e.isReady&&i.s?(a("DOM not ready, queuing ajaxForm"),e(function(){e(i.s,i.c).ajaxForm(n)}),this):(a("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)")),this)}return n.delegation?(e(document).off("submit.form-plugin",this.selector,t).off("click.form-plugin",this.selector,r).on("submit.form-plugin",this.selector,n,t).on("click.form-plugin",this.selector,n,r),this):this.ajaxFormUnbind().bind("submit.form-plugin",n,t).bind("click.form-plugin",n,r)},e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},e.fn.formToArray=function(t,r){var a=[];if(0===this.length){return a}var i=this[0],o=t?i.getElementsByTagName("*"):i.elements;if(!o){return a}var s,u,l,c,f,m,p;for(s=0,m=o.length;m>s;s++){if(f=o[s],l=f.name,l&&!f.disabled){if(t&&i.clk&&"image"==f.type){i.clk==f&&(a.push({name:l,value:e(f).val(),type:f.type}),a.push({name:l+".x",value:i.clk_x},{name:l+".y",value:i.clk_y}))}else{if(c=e.fieldValue(f,!0),c&&c.constructor==Array){for(r&&r.push(f),u=0,p=c.length;p>u;u++){a.push({name:l,value:c[u]})}}else{if(n.fileapi&&"file"==f.type){r&&r.push(f);var d=f.files;if(d.length){for(u=0;d.length>u;u++){a.push({name:l,value:d[u],type:f.type})}}else{a.push({name:l,value:"",type:f.type})}}else{null!==c&&c!==void 0&&(r&&r.push(f),a.push({name:l,value:c,type:f.type,required:f.required}))}}}}}if(!t&&i.clk){var h=e(i.clk),v=h[0];l=v.name,l&&!v.disabled&&"image"==v.type&&(a.push({name:l,value:h.val()}),a.push({name:l+".x",value:i.clk_x},{name:l+".y",value:i.clk_y}))}return a},e.fn.formSerialize=function(t){return e.param(this.formToArray(t))},e.fn.fieldSerialize=function(t){var r=[];return this.each(function(){var a=this.name;if(a){var n=e.fieldValue(this,t);if(n&&n.constructor==Array){for(var i=0,o=n.length;o>i;i++){r.push({name:a,value:n[i]})}}else{null!==n&&n!==void 0&&r.push({name:this.name,value:n})}}}),e.param(r)},e.fn.fieldValue=function(t){for(var r=[],a=0,n=this.length;n>a;a++){var i=this[a],o=e.fieldValue(i,t);null===o||void 0===o||o.constructor==Array&&!o.length||(o.constructor==Array?e.merge(r,o):r.push(o))}return r},e.fieldValue=function(t,r){var a=t.name,n=t.type,i=t.tagName.toLowerCase();if(void 0===r&&(r=!0),r&&(!a||t.disabled||"reset"==n||"button"==n||("checkbox"==n||"radio"==n)&&!t.checked||("submit"==n||"image"==n)&&t.form&&t.form.clk!=t||"select"==i&&-1==t.selectedIndex)){return null}if("select"==i){var o=t.selectedIndex;if(0>o){return null}for(var s=[],u=t.options,l="select-one"==n,c=l?o+1:u.length,f=l?o:0;c>f;f++){var m=u[f];if(m.selected){var p=m.value;if(p||(p=m.attributes&&m.attributes.value&&!m.attributes.value.specified?m.text:m.value),l){return p}s.push(p)}}return s}return e(t).val()},e.fn.clearForm=function(t){return this.each(function(){e("input,select,textarea",this).clearFields(t)})},e.fn.clearFields=e.fn.clearInputs=function(t){var r=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var a=this.type,n=this.tagName.toLowerCase();r.test(a)||"textarea"==n?this.value="":"checkbox"==a||"radio"==a?this.checked=!1:"select"==n?this.selectedIndex=-1:"file"==a?/MSIE/.test(navigator.userAgent)?e(this).replaceWith(e(this).clone(!0)):e(this).val(""):t&&(t===!0&&/hidden/.test(a)||"string"==typeof t&&e(this).is(t))&&(this.value="")})},e.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},e.fn.enable=function(e){return void 0===e&&(e=!0),this.each(function(){this.disabled=!e})},e.fn.selected=function(t){return void 0===t&&(t=!0),this.each(function(){var r=this.type;if("checkbox"==r||"radio"==r){this.checked=t}else{if("option"==this.tagName.toLowerCase()){var a=e(this).parent("select");t&&a[0]&&"select-one"==a[0].type&&a.find("option").selected(!1),this.selected=t}}})},e.fn.ajaxSubmit.debug=!1})("undefined"!=typeof jQuery?jQuery:window.Zepto);(function(a){a.extend(a.fn,{validate:function(b){if(!this.length){b&&b.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing");return}var c=a.data(this[0],"validator");if(c){return c}this.attr("novalidate","novalidate");c=new a.validator(b,this[0]);a.data(this[0],"validator",c);if(c.settings.onsubmit){var d=this.find("input, button");d.filter(".cancel").click(function(){c.cancelSubmit=true});if(c.settings.submitHandler){d.filter(":submit").click(function(){c.submitButton=this})}this.submit(function(e){if(c.settings.debug){e.preventDefault()}function f(){if(c.settings.submitHandler){if(c.submitButton){var g=a("<input type='hidden'/>").attr("name",c.submitButton.name).val(c.submitButton.value).appendTo(c.currentForm)}c.settings.submitHandler.call(c,c.currentForm);if(c.submitButton){g.remove()}return false}return true}if(c.cancelSubmit){c.cancelSubmit=false;return f()}if(c.form()){if(c.pendingRequest){c.formSubmitted=true;return false}return f()}else{c.focusInvalid();return false}})}return c},valid:function(){if(a(this[0]).is("form")){return this.validate().form()}else{var c=true;var b=a(this[0].form).validate();this.each(function(){c&=b.element(this)});return c}},removeAttrs:function(d){var b={},c=this;a.each(d.split(/\s/),function(e,f){b[f]=c.attr(f);c.removeAttr(f)});return b},rules:function(e,b){var g=this[0];if(e){var d=a.data(g.form,"validator").settings;var j=d.rules;var k=a.validator.staticRules(g);switch(e){case"add":a.extend(k,a.validator.normalizeRule(b));j[g.name]=k;if(b.messages){d.messages[g.name]=a.extend(d.messages[g.name],b.messages)}break;case"remove":if(!b){delete j[g.name];return k}var h={};a.each(b.split(/\s/),function(l,m){h[m]=k[m];delete k[m]});return h}}var f=a.validator.normalizeRules(a.extend({},a.validator.metadataRules(g),a.validator.classRules(g),a.validator.attributeRules(g),a.validator.staticRules(g)),g);if(f.required){var c=f.required;delete f.required;f=a.extend({required:c},f)}return f}});a.extend(a.expr[":"],{blank:function(b){return !a.trim(""+b.value)},filled:function(b){return !!a.trim(""+b.value)},unchecked:function(b){return !b.checked}});a.validator=function(b,c){this.settings=a.extend(true,{},a.validator.defaults,b);this.currentForm=c;this.init()};a.validator.format=function(b,c){if(arguments.length==1){return function(){var d=a.makeArray(arguments);d.unshift(b);return a.validator.format.apply(this,d)}}if(arguments.length>2&&c.constructor!=Array){c=a.makeArray(arguments).slice(1)}if(c.constructor!=Array){c=[c]}a.each(c,function(d,e){b=b.replace(new RegExp("\\{"+d+"\\}","g"),e)});return b};a.extend(a.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:true,errorContainer:a([]),errorLabelContainer:a([]),onsubmit:true,ignore:":hidden",ignoreTitle:false,onfocusin:function(b,c){this.lastActive=b;if(this.settings.focusCleanup&&!this.blockFocusCleanup){this.settings.unhighlight&&this.settings.unhighlight.call(this,b,this.settings.errorClass,this.settings.validClass);this.addWrapper(this.errorsFor(b)).hide()}},onfocusout:function(b,c){if(!this.checkable(b)&&(b.name in this.submitted||!this.optional(b))){this.element(b)}},onkeyup:function(b,c){if(b.name in this.submitted||b==this.lastElement){this.element(b)}},onclick:function(b,c){if(b.name in this.submitted){this.element(b)}else{if(b.parentNode.name in this.submitted){this.element(b.parentNode)}}},highlight:function(d,b,c){if(d.type==="radio"){this.findByName(d.name).addClass(b).removeClass(c)}else{a(d).addClass(b).removeClass(c)}},unhighlight:function(d,b,c){if(d.type==="radio"){this.findByName(d.name).removeClass(b).addClass(c)}else{a(d).removeClass(b).addClass(c)}}},setDefaults:function(b){a.extend(a.validator.defaults,b)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:a.validator.format("Please enter no more than {0} characters."),minlength:a.validator.format("Please enter at least {0} characters."),rangelength:a.validator.format("Please enter a value between {0} and {1} characters long."),range:a.validator.format("Please enter a value between {0} and {1}."),max:a.validator.format("Please enter a value less than or equal to {0}."),min:a.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:false,prototype:{init:function(){this.labelContainer=a(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||a(this.currentForm);this.containers=a(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var b=(this.groups={});a.each(this.settings.groups,function(e,f){a.each(f.split(/\s/),function(h,g){b[g]=e})});var d=this.settings.rules;a.each(d,function(e,f){d[e]=a.validator.normalizeRule(f)});function c(g){var f=a.data(this[0].form,"validator"),e="on"+g.type.replace(/^validate/,"");f.settings[e]&&f.settings[e].call(f,this[0],g)}a(this.currentForm).validateDelegate("[type='text'], [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",c).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",c);if(this.settings.invalidHandler){a(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)}},form:function(){this.checkForm();a.extend(this.submitted,this.errorMap);this.invalid=a.extend({},this.errorMap);if(!this.valid()){a(this.currentForm).triggerHandler("invalid-form",[this])}this.showErrors();return this.valid()},checkForm:function(){this.prepareForm();for(var c=0,d=(this.currentElements=this.elements());d[c];c++){if(this.findByName(d[c].name).length!=undefined&&this.findByName(d[c].name).length>1){for(var b=0;b<this.findByName(d[c].name).length;b++){this.check(this.findByName(d[c].name)[b])}}else{this.check(d[c])}}return this.valid()},element:function(c){c=this.validationTargetFor(this.clean(c));this.lastElement=c;this.prepareElement(c);this.currentElements=a(c);var b=this.check(c);if(b){delete this.invalid[c.name]}else{this.invalid[c.name]=true}if(!this.numberOfInvalids()){this.toHide=this.toHide.add(this.containers)}this.showErrors();return b},showErrors:function(c){if(c){a.extend(this.errorMap,c);this.errorList=[];for(var b in c){this.errorList.push({message:c[b],element:this.findByName(b)[0]})}this.successList=a.grep(this.successList,function(d){return !(d.name in c)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){if(a.fn.resetForm){a(this.currentForm).resetForm()}this.submitted={};this.lastElement=null;this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(d){var c=0;for(var b in d){c++}return c},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return this.size()==0},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid){try{a(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(b){}}},findLastActive:function(){var b=this.lastActive;return b&&a.grep(this.errorList,function(c){return c.element.name==b.name}).length==1&&b},elements:function(){var c=this,b={};return a(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){!this.name&&c.settings.debug&&window.console&&console.error("%o has no name assigned",this);if(this.name in b||!c.objectLength(a(this).rules())){return false}b[this.name]=true;return true})},clean:function(b){return a(b)[0]},errors:function(){return a(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext)},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=a([]);this.toHide=a([]);this.currentElements=a([])},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers)},prepareElement:function(b){this.reset();this.toHide=this.errorsFor(b)},check:function(c){c=this.validationTargetFor(this.clean(c));var h=a(c).rules();var d=false;for(var j in h){var g={method:j,parameters:h[j]};try{var b=a.validator.methods[j].call(this,c.value.replace(/\r/g,""),c,g.parameters);if(b=="dependency-mismatch"){d=true;continue}d=false;if(b=="pending"){this.toHide=this.toHide.not(this.errorsFor(c));return}if(!b){this.formatAndAdd(c,g);return false}}catch(f){this.settings.debug&&window.console&&console.log("exception occured when checking element "+c.id+", check the '"+g.method+"' method",f);throw f}}if(d){return}if(this.objectLength(h)){this.successList.push(c)}return true},customMetaMessage:function(b,d){if(!a.metadata){return}var c=this.settings.meta?a(b).metadata()[this.settings.meta]:a(b).metadata();return c&&c.messages&&c.messages[d]},customMessage:function(c,d){var b=this.settings.messages[c];return b&&(b.constructor==String?b:b[d])},findDefined:function(){for(var b=0;b<arguments.length;b++){if(arguments[b]!==undefined){return arguments[b]}}return undefined},defaultMessage:function(b,c){return this.findDefined(this.customMessage(b.name,c),this.customMetaMessage(b,c),!this.settings.ignoreTitle&&b.title||undefined,a.validator.messages[c],"<strong>Warning: No message defined for "+b.name+"</strong>")},formatAndAdd:function(c,e){var d=this.defaultMessage(c,e.method),b=/\$?\{(\d+)\}/g;if(typeof d=="function"){d=d.call(this,e.parameters,c)}else{if(b.test(d)){d=jQuery.format(d.replace(b,"{$1}"),e.parameters)}}this.errorList.push({message:d,element:c});this.errorMap[c.name]=d;this.submitted[c.name]=d},addWrapper:function(b){if(this.settings.wrapper){b=b.add(b.parent(this.settings.wrapper))}return b},defaultShowErrors:function(){for(var c=0;this.errorList[c];c++){var b=this.errorList[c];this.settings.highlight&&this.settings.highlight.call(this,b.element,this.settings.errorClass,this.settings.validClass);this.showLabel(b.element,b.message)}if(this.errorList.length){this.toShow=this.toShow.add(this.containers)}if(this.settings.success){for(var c=0;this.successList[c];c++){this.showLabel(this.successList[c])}}if(this.settings.unhighlight){for(var c=0,d=this.validElements();d[c];c++){this.settings.unhighlight.call(this,d[c],this.settings.errorClass,this.settings.validClass)}}this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return a(this.errorList).map(function(){return this.element})},showLabel:function(c,d){var b=this.errorsFor(c);if(b.length){b.removeClass(this.settings.validClass).addClass(this.settings.errorClass);b.attr("generated")&&b.html(d)}else{b=a("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(c),generated:true}).addClass(this.settings.errorClass).html(d||"");if(this.settings.wrapper){b=b.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()}if(!this.labelContainer.append(b).length){this.settings.errorPlacement?this.settings.errorPlacement(b,a(c)):b.insertAfter(c)}}if(!d&&this.settings.success){b.text("");typeof this.settings.success=="string"?b.addClass(this.settings.success):this.settings.success(b)}this.toShow=this.toShow.add(b)},errorsFor:function(c){var b=this.idOrName(c);return this.errors().filter(function(){return a(this).attr("for")==b})},idOrName:function(b){return this.groups[b.name]||(this.checkable(b)?b.name:b.id||b.name)},validationTargetFor:function(b){if(this.checkable(b)){b=this.findByName(b.name).not(this.settings.ignore)[0]}return b},checkable:function(b){return/radio|checkbox/i.test(b.type)},findByName:function(b){var c=this.currentForm;return a(document.getElementsByName(b)).map(function(d,e){return e.form==c&&e.name==b&&e||null})},getLength:function(c,b){switch(b.nodeName.toLowerCase()){case"select":return a("option:selected",b).length;case"input":if(this.checkable(b)){return this.findByName(b.name).filter(":checked").length}}return c.length},depend:function(c,b){return this.dependTypes[typeof c]?this.dependTypes[typeof c](c,b):true},dependTypes:{"boolean":function(c,b){return c},string:function(c,b){return !!a(c,b.form).length},"function":function(c,b){return c(b)}},optional:function(b){return !a.validator.methods.required.call(this,a.trim(b.value),b)&&"dependency-mismatch"},startRequest:function(b){if(!this.pending[b.name]){this.pendingRequest++;this.pending[b.name]=true}},stopRequest:function(b,c){this.pendingRequest--;if(this.pendingRequest<0){this.pendingRequest=0}delete this.pending[b.name];if(c&&this.pendingRequest==0&&this.formSubmitted&&this.form()){a(this.currentForm).submit();this.formSubmitted=false}else{if(!c&&this.pendingRequest==0&&this.formSubmitted){a(this.currentForm).triggerHandler("invalid-form",[this]);this.formSubmitted=false}}},previousValue:function(b){return a.data(b,"previousValue")||a.data(b,"previousValue",{old:null,valid:true,message:this.defaultMessage(b,"remote")})}},classRuleSettings:{required:{required:true},email:{email:true},url:{url:true},date:{date:true},dateISO:{dateISO:true},dateDE:{dateDE:true},number:{number:true},numberDE:{numberDE:true},digits:{digits:true},creditcard:{creditcard:true}},addClassRules:function(b,c){b.constructor==String?this.classRuleSettings[b]=c:a.extend(this.classRuleSettings,b)},classRules:function(c){var d={};var b=a(c).attr("class");b&&a.each(b.split(" "),function(){if(this in a.validator.classRuleSettings){a.extend(d,a.validator.classRuleSettings[this])}});return d},attributeRules:function(c){var e={};var b=a(c);for(var f in a.validator.methods){var d;if(f==="required"&&typeof a.fn.prop==="function"){d=b.prop(f)}else{d=b.attr(f)}if(d){e[f]=d}else{if(b[0].getAttribute("type")===f){e[f]=true}}}if(e.maxlength&&/-1|2147483647|524288/.test(e.maxlength)){delete e.maxlength}return e},metadataRules:function(b){if(!a.metadata){return{}}var c=a.data(b.form,"validator").settings.meta;return c?a(b).metadata()[c]:a(b).metadata()},staticRules:function(c){var d={};var b=a.data(c.form,"validator");if(b.settings.rules){d=a.validator.normalizeRule(b.settings.rules[c.name])||{}}return d},normalizeRules:function(c,b){a.each(c,function(f,e){if(e===false){delete c[f];return}if(e.param||e.depends){var d=true;switch(typeof e.depends){case"string":d=!!a(e.depends,b.form).length;break;case"function":d=e.depends.call(b,b);break}if(d){c[f]=e.param!==undefined?e.param:true}else{delete c[f]}}});a.each(c,function(d,e){c[d]=a.isFunction(e)?e(b):e});a.each(["minlength","maxlength","min","max"],function(){if(c[this]){c[this]=Number(c[this])}});a.each(["rangelength","range"],function(){if(c[this]){c[this]=[Number(c[this][0]),Number(c[this][1])]}});if(a.validator.autoCreateRanges){if(c.min&&c.max){c.range=[c.min,c.max];delete c.min;delete c.max}if(c.minlength&&c.maxlength){c.rangelength=[c.minlength,c.maxlength];delete c.minlength;delete c.maxlength}}if(c.messages){delete c.messages}return c},normalizeRule:function(c){if(typeof c=="string"){var b={};a.each(c.split(/\s/),function(){b[this]=true});c=b}return c},addMethod:function(b,d,c){a.validator.methods[b]=d;a.validator.messages[b]=c!=undefined?c:a.validator.messages[b];if(d.length<3){a.validator.addClassRules(b,a.validator.normalizeRule(b))}},methods:{required:function(c,b,e){if(!this.depend(e,b)){return"dependency-mismatch"}switch(b.nodeName.toLowerCase()){case"select":var d=a(b).val();return d&&d.length>0;case"input":if(this.checkable(b)){return this.getLength(c,b)>0}default:return a.trim(c).length>0}},remote:function(f,c,g){if(this.optional(c)){return"dependency-mismatch"}var d=this.previousValue(c);if(!this.settings.messages[c.name]){this.settings.messages[c.name]={}}d.originalMessage=this.settings.messages[c.name].remote;this.settings.messages[c.name].remote=d.message;g=typeof g=="string"&&{url:g}||g;if(this.pending[c.name]){return"pending"}if(d.old===f){return d.valid}d.old=f;var b=this;this.startRequest(c);var e={};e[c.name]=f;a.ajax(a.extend(true,{url:g,mode:"abort",port:"validate"+c.name,dataType:"json",data:e,success:function(j){b.settings.messages[c.name].remote=d.originalMessage;var l=j===true;if(l){var h=b.formSubmitted;b.prepareElement(c);b.formSubmitted=h;b.successList.push(c);b.showErrors()}else{var m={};var k=j||b.defaultMessage(c,"remote");m[c.name]=d.message=a.isFunction(k)?k(f):k;b.showErrors(m)}d.valid=l;b.stopRequest(c,l)}},g));return"pending"},minlength:function(c,b,d){return this.optional(b)||this.getLength(a.trim(c),b)>=d},maxlength:function(c,b,d){return this.optional(b)||this.getLength(a.trim(c),b)<=d},rangelength:function(d,b,e){var c=this.getLength(a.trim(d),b);return this.optional(b)||(c>=e[0]&&c<=e[1])},min:function(c,b,d){return this.optional(b)||c>=d},max:function(c,b,d){return this.optional(b)||c<=d},range:function(c,b,d){return this.optional(b)||(c>=d[0]&&c<=d[1])},email:function(c,b){return this.optional(b)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(c)},url:function(c,b){return this.optional(b)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(c)},date:function(c,b){return this.optional(b)||!/Invalid|NaN/.test(new Date(c))},dateISO:function(c,b){return this.optional(b)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(c)},number:function(c,b){return this.optional(b)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(c)},digits:function(c,b){return this.optional(b)||/^\d+$/.test(c)},creditcard:function(f,c){if(this.optional(c)){return"dependency-mismatch"}if(/[^0-9 -]+/.test(f)){return false}var g=0,e=0,b=false;f=f.replace(/\D/g,"");for(var h=f.length-1;h>=0;h--){var d=f.charAt(h);var e=parseInt(d,10);if(b){if((e*=2)>9){e-=9}}g+=e;b=!b}return(g%10)==0},accept:function(c,b,d){d=typeof d=="string"?d.replace(/,/g,"|"):"png|jpe?g|gif";return this.optional(b)||c.match(new RegExp(".("+d+")$","i"))},equalTo:function(c,b,e){var d=a(e).unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){a(b).valid()});return c==d.val()}}});a.format=a.validator.format})(jQuery);(function(c){var a={};if(c.ajaxPrefilter){c.ajaxPrefilter(function(f,e,g){var d=f.port;if(f.mode=="abort"){if(a[d]){a[d].abort()}a[d]=g}})}else{var b=c.ajax;c.ajax=function(e){var f=("mode" in e?e:c.ajaxSettings).mode,d=("port" in e?e:c.ajaxSettings).port;if(f=="abort"){if(a[d]){a[d].abort()}return(a[d]=b.apply(this,arguments))}return b.apply(this,arguments)}}})(jQuery);(function(a){if(!jQuery.event.special.focusin&&!jQuery.event.special.focusout&&document.addEventListener){a.each({focus:"focusin",blur:"focusout"},function(c,b){a.event.special[b]={setup:function(){this.addEventListener(c,d,true)},teardown:function(){this.removeEventListener(c,d,true)},handler:function(f){arguments[0]=a.event.fix(f);arguments[0].type=b;return a.event.handle.apply(this,arguments)}};function d(f){f=a.event.fix(f);f.type=b;return a.event.handle.call(this,f)}})}a.extend(a.fn,{validateDelegate:function(d,c,b){return this.bind(c,function(e){var f=a(e.target);if(f.is(d)){return b.apply(f,arguments)}})}})})(jQuery);(function(a){a.fn.upload=function(b){b=a.extend({name:"file",enctype:"multipart/form-data",action:"",autoSubmit:true,onSubmit:function(){},onComplete:function(){},onSelect:function(){},params:{}},b);return new a.ocupload(this,b)},a.ocupload=function(q,p){var o=this;var n=new Date().getTime().toString().substr(8);var e=a('<iframe id="iframe'+n+'" name="iframe'+n+'"></iframe>').css({display:"none"});var d=a('<form method="post" enctype="'+p.enctype+'" action="'+p.action+'" target="iframe'+n+'"></form>').css({margin:0,padding:0});var c=a('<input name="'+p.name+'" type="file" />').css({position:"relative",display:"block",marginLeft:-175+"px",opacity:0});q.wrap("<div></div>");d.append(c);q.after(d);q.after(e);var b=q.parent().css({position:"relative",height:q.outerHeight()+"px",width:q.outerWidth()+"px",overflow:"hidden",cursor:"pointer",margin:0,padding:0});c.css("marginTop",-b.height()-10+"px");b.mousemove(function(f){c.css({top:f.pageY-b.offset().top+"px",left:f.pageX-b.offset().left+"px"})});c.change(function(){o.onSelect();if(o.autoSubmit){o.submit()}});a.extend(this,{autoSubmit:true,onSubmit:p.onSubmit,onComplete:p.onComplete,onSelect:p.onSelect,filename:function(){return c.attr("value")},params:function(f){var f=f?f:false;if(f){p.params=a.extend(p.params,f)}else{return p.params}},name:function(f){var f=f?f:false;if(f){c.attr("name",value)}else{return c.attr("name")}},action:function(f){var f=f?f:false;if(f){d.attr("action",f)}else{return d.attr("action")}},enctype:function(f){var f=f?f:false;if(f){d.attr("enctype",f)}else{return d.attr("enctype")}},set:function(h,g){var g=g?g:false;function f(k,j){switch(k){default:throw new Error("[jQuery.ocupload.set] '"+k+"' is an invalid option.");break;case"name":o.name(j);break;case"action":o.action(j);break;case"enctype":o.enctype(j);break;case"params":o.params(j);break;case"autoSubmit":o.autoSubmit=j;break;case"onSubmit":o.onSubmit=j;break;case"onComplete":o.onComplete=j;break;case"onSelect":o.onSelect=j;break}}if(g){f(h,g)}else{a.each(h,function(k,j){f(k,j)})}},submit:function(){this.onSubmit();a.each(p.params,function(g,f){d.append(a('<input type="hidden" name="'+g+'" value="'+f+'" />'))});d.submit();e.unbind().load(function(){var g=document.getElementById(e.attr("name"));var f=a(g.contentWindow.document.body).html();o.onComplete(f)})}})}})(jQuery);(function($){var escapeable=/["\\\x00-\x1f\x7f-\x9f]/g,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};$.toJSON=typeof JSON==="object"&&JSON.stringify?JSON.stringify:function(o){if(o===null){return"null"}var type=typeof o;if(type==="undefined"){return undefined}if(type==="number"||type==="boolean"){return""+o}if(type==="string"){return $.quoteString(o)}if(type==="object"){if(typeof o.toJSON==="function"){return $.toJSON(o.toJSON())}if(o.constructor===Date){var month=o.getUTCMonth()+1,day=o.getUTCDate(),year=o.getUTCFullYear(),hours=o.getUTCHours(),minutes=o.getUTCMinutes(),seconds=o.getUTCSeconds(),milli=o.getUTCMilliseconds();if(month<10){month="0"+month}if(day<10){day="0"+day}if(hours<10){hours="0"+hours}if(minutes<10){minutes="0"+minutes}if(seconds<10){seconds="0"+seconds}if(milli<100){milli="0"+milli}if(milli<10){milli="0"+milli}return'"'+year+"-"+month+"-"+day+"T"+hours+":"+minutes+":"+seconds+"."+milli+'Z"'}if(o.constructor===Array){var ret=[];for(var i=0;i<o.length;i++){ret.push($.toJSON(o[i])||"null")}return"["+ret.join(",")+"]"}var name,val,pairs=[];for(var k in o){type=typeof k;if(type==="number"){name='"'+k+'"'}else{if(type==="string"){name=$.quoteString(k)}else{continue}}type=typeof o[k];if(type==="function"||type==="undefined"){continue}val=$.toJSON(o[k]);pairs.push(name+":"+val)}return"{"+pairs.join(",")+"}"}};$.evalJSON=typeof JSON==="object"&&JSON.parse?JSON.parse:function(src){return eval("("+src+")")};$.secureEvalJSON=typeof JSON==="object"&&JSON.parse?JSON.parse:function(src){var filtered=src.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"");if(/^[\],:{}\s]*$/.test(filtered)){return eval("("+src+")")}else{throw new SyntaxError("Error parsing JSON, source is not valid.")}};$.quoteString=function(string){if(string.match(escapeable)){return'"'+string.replace(escapeable,function(a){var c=meta[a];if(typeof c==="string"){return c}c=a.charCodeAt();return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16)})+'"'}return'"'+string+'"'}})(jQuery);function upclick(r){var p={element:null,action:"about:blank",action_params:{},maxsize:0,onstart:null,oncomplete:null,dataname:"Filedata",target:null,zindex:"auto"};for(var o in p){r[o]=r[o]?r[o]:p[o]}var j=r.element;if(typeof j=="string"){j=document.getElementById(j)}var q=j.ownerDocument,t,s=q.createElement("div"),a="frame"+(new Date).getTime().toString().substr(8);s.innerHTML='<iframe name="'+a+'" src="about:blank" onload="this.onload_callback()"></iframe>';var m=s.childNodes[0];m.onload_callback=function(){var c=q.createElement("form");s.appendChild(c);c.method="post";c.enctype="multipart/form-data";c.encoding="multipart/form-data";if(r.target){c.target=r.target;c.setAttribute("target",r.target)}else{c.target=a;c.setAttribute("target",a)}c.action=r.action;c.setAttribute("action",r.action);c.style.margin=0;c.style.padding=0;c.style.height="80px";c.style.width="40px";c.runat="server";var d=r.action_params;for(var e in d){var b=q.createElement("input");b.type="hidden";b.name=e;b.value=String(d[e]);c.appendChild(b)}if(r.maxsize){d=q.createElement("input");d.type="hidden";d.name="MAX_FILE_SIZE";d.value=String(r.maxsize);c.appendChild(d)}t=q.createElement("input");t.name=r.dataname;t.type="file";t.size="1";t.runat="server";c.appendChild(t);t.style.position="absolute";t.style.display="block";t.style.top=0;t.style.left=0;t.style.height=c.style.height;t.style.width="80px";t.style.opacity=0;t.style.filter="alpha(opacity=0)";t.style.fontSize=8;t.style.zIndex=1;t.style.visiblity="hidden";t.style.marginLeft="-40px";var g=function(){if(t.value){var h=r.onstart;h&&h(t.value);c.submit()}};if(t.addEventListener){t.addEventListener("change",g,false)}else{if(t.attachEvent){t.attachEvent("onpropertychange",function(h){if(!h){h=window.event}h.propertyName=="value"&&g()})}else{t.onpropertychange=g}}m.onload_callback=function(){var k=null;if(m.contentWindow){k=m.contentWindow}else{if(m.contentDocument){k=m.contentDocument.defaultView}}k=k.document.body.innerHTML;var h=r.oncomplete;h&&h(k);c.reset()}};m.style.display="none";m.width=0;m.height=0;m.marginHeight=0;m.marginWidth=0;q.body.insertBefore(s,q.body.firstChild);s.style.position="absolute";s.style.overflow="hidden";s.style.padding=0;s.style.margin=0;s.style.visiblity="hidden";s.style.width="0px";s.style.height="0px";if(r.zindex=="auto"){p=0;var f;for(o=j;o.tagName!="BODY";){f=o.currentStyle?o.currentStyle:getComputedStyle(o,null);f=parseInt(f.zIndex);f=isNaN(f)?0:f;p+=f+1;o=o.parentNode}s.style.zIndex=p}else{s.style.zIndex=r.zindex}p=function(b){if(!b){b=window.event}s.style.width="0px";s.style.height="0px";if(q.elementFromPoint(b.clientX,b.clientY)===j){s.style.width="40px";s.style.height="80px"}};if(s.addEventListener){s.addEventListener("mousemove",p,false)}else{s.attachEvent&&s.attachEvent("onmousemove",p)}p=function(b){if(!b){b=window.event}var c=y=0;if(b.pageX){c=b.pageX}else{if(b.clientX){c=b.clientX+(q.documentElement.scrollLeft?q.documentElement.scrollLeft:q.body.scrollLeft)}}if(b.pageY){y=b.pageY}else{if(b.clientY){y=b.clientY+(q.documentElement.scrollTop?q.documentElement.scrollTop:q.body.scrollTop)}}s.style.left=c-20+"px";s.style.top=y-40+"px";s.style.width="40px";s.style.height="80px"};if(j.addEventListener){j.addEventListener("mousemove",p,false)}else{j.attachEvent&&j.attachEvent("onmousemove",p)}}(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(jQuery)}})(function(h,f){var j={a:"href",img:"src",form:"action",base:"href",script:"src",iframe:"src",link:"href"},k=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","fragment"],e={anchor:"fragment"},a={strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},c=/(?:^|&|;)([^&=;]*)=?([^&;]*)/g,b=/(?:^|&|;)([^&=;]*)=?([^&;]*)/g;function g(l,o){var q=decodeURI(unescape(l)),n=a[o||false?"strict":"loose"].exec(q),p={attr:{},param:{},seg:{}},m=14;while(m--){p.attr[k[m]]=n[m]||""}p.param.query={};p.param.fragment={};p.attr.query.replace(c,function(s,r,t){if(r){p.param.query[r]=t}});p.attr.fragment.replace(b,function(s,r,t){if(r){p.param.fragment[r]=t}});p.seg.path=p.attr.path.replace(/^\/+|\/+$/g,"").split("/");p.seg.fragment=p.attr.fragment.replace(/^\/+|\/+$/g,"").split("/");p.attr.base=p.attr.host?(p.attr.protocol?p.attr.protocol+"://"+p.attr.host:p.attr.host)+(p.attr.port?":"+p.attr.port:""):"";return p}function d(m){var l=m.tagName;if(l!==f){return j[l.toLowerCase()]}return l}h.fn.url=function(m){var l="";if(this.length){l=h(this).attr(d(this[0]))||""}return h.url(l,m)};h.url=function(l,m){if(arguments.length===1&&l===true){m=true;l=f}m=m||false;l=l||window.location.toString();return{data:g(l,m),attr:function(n){n=e[n]||n;return n!==f?this.data.attr[n]:this.data.attr},param:function(n){return n!==f?this.data.param.query[n]:this.data.param.query},fparam:function(n){return n!==f?this.data.param.fragment[n]:this.data.param.fragment},segment:function(n){if(n===f){return this.data.seg.path}else{n=n<0?this.data.seg.path.length+n:n-1;return this.data.seg.path[n]}},fsegment:function(n){if(n===f){return this.data.seg.fragment}else{n=n<0?this.data.seg.fragment.length+n:n-1;return this.data.seg.fragment[n]}}}}});var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(c){var a="";var k,h,f,j,g,e,d;var b=0;c=Base64._utf8_encode(c);while(b<c.length){k=c.charCodeAt(b++);h=c.charCodeAt(b++);f=c.charCodeAt(b++);j=k>>2;g=((k&3)<<4)|(h>>4);e=((h&15)<<2)|(f>>6);d=f&63;if(isNaN(h)){e=d=64}else{if(isNaN(f)){d=64}}a=a+this._keyStr.charAt(j)+this._keyStr.charAt(g)+this._keyStr.charAt(e)+this._keyStr.charAt(d)}return a},decode:function(c){var a="";var k,h,f;var j,g,e,d;var b=0;c=c.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(b<c.length){j=this._keyStr.indexOf(c.charAt(b++));g=this._keyStr.indexOf(c.charAt(b++));e=this._keyStr.indexOf(c.charAt(b++));d=this._keyStr.indexOf(c.charAt(b++));k=(j<<2)|(g>>4);h=((g&15)<<4)|(e>>2);f=((e&3)<<6)|d;a=a+String.fromCharCode(k);if(e!=64){a=a+String.fromCharCode(h)}if(d!=64){a=a+String.fromCharCode(f)}}a=Base64._utf8_decode(a);return a},_utf8_encode:function(b){b=b.replace(/\r\n/g,"\n");var a="";for(var e=0;e<b.length;e++){var d=b.charCodeAt(e);if(d<128){a+=String.fromCharCode(d)}else{if((d>127)&&(d<2048)){a+=String.fromCharCode((d>>6)|192);a+=String.fromCharCode((d&63)|128)}else{a+=String.fromCharCode((d>>12)|224);a+=String.fromCharCode(((d>>6)&63)|128);a+=String.fromCharCode((d&63)|128)}}}return a},_utf8_decode:function(a){var b="";var d=0;var e=c1=c2=0;while(d<a.length){e=a.charCodeAt(d);if(e<128){b+=String.fromCharCode(e);d++}else{if((e>191)&&(e<224)){c2=a.charCodeAt(d+1);b+=String.fromCharCode(((e&31)<<6)|(c2&63));d+=2}else{c2=a.charCodeAt(d+1);c3=a.charCodeAt(d+2);b+=String.fromCharCode(((e&15)<<12)|((c2&63)<<6)|(c3&63));d+=3}}}return b}};jQuery.fn.farbtastic=function(a){$.farbtastic(this,a);return this};jQuery.farbtastic=function(a,b){var a=$(a).get(0);return a.farbtastic||(a.farbtastic=new jQuery._farbtastic(a,b))};jQuery._farbtastic=function(a,d){var b=this;$(a).html('<div class="farbtastic"><div class="color"></div><div class="wheel"></div><div class="overlay"></div><div class="h-marker marker"></div><div class="sl-marker marker"></div></div>');var c=$(".farbtastic",a);b.wheel=$(".wheel",a).get(0);b.radius=84;b.square=100;b.width=194;if(navigator.appVersion.match(/MSIE [0-6]\./)){$("*",c).each(function(){if(this.currentStyle.backgroundImage!="none"){var e=this.currentStyle.backgroundImage;e=this.currentStyle.backgroundImage.substring(5,e.length-2);$(this).css({backgroundImage:"none",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop, src='"+e+"')"})}})}b.linkTo=function(e){if(typeof b.callback=="object"){$(b.callback).unbind("keyup",b.updateValue)}b.color=null;if(typeof e=="function"){b.callback=e}else{if(typeof e=="object"||typeof e=="string"){b.callback=$(e);b.callback.bind("keyup",b.updateValue);if(b.callback.get(0).value){b.setColor(b.callback.get(0).value)}}}return this};b.updateValue=function(e){if(this.value&&this.value!=b.color){b.setColor(this.value)}};b.setColor=function(e){var f=b.unpack(e);if(b.color!=e&&f){b.color=e;b.rgb=f;b.hsl=b.RGBToHSL(b.rgb);b.updateDisplay()}return this};b.setHSL=function(e){b.hsl=e;b.rgb=b.HSLToRGB(e);b.color=b.pack(b.rgb);b.updateDisplay();return this};b.widgetCoords=function(j){var g,n;var h=j.target||j.srcElement;var f=b.wheel;if(typeof j.offsetX!="undefined"){var m={x:j.offsetX,y:j.offsetY};var k=h;while(k){k.mouseX=m.x;k.mouseY=m.y;m.x+=k.offsetLeft;m.y+=k.offsetTop;k=k.offsetParent}var k=f;var l={x:0,y:0};while(k){if(typeof k.mouseX!="undefined"){g=k.mouseX-l.x;n=k.mouseY-l.y;break}l.x+=k.offsetLeft;l.y+=k.offsetTop;k=k.offsetParent}k=h;while(k){k.mouseX=undefined;k.mouseY=undefined;k=k.offsetParent}}else{var m=b.absolutePosition(f);g=(j.pageX||0*(j.clientX+$("html").get(0).scrollLeft))-m.x;n=(j.pageY||0*(j.clientY+$("html").get(0).scrollTop))-m.y}return{x:g-b.width/2,y:n-b.width/2}};b.mousedown=function(e){if(!document.dragging){$(document).bind("mousemove",b.mousemove).bind("mouseup",b.mouseup);document.dragging=true}var f=b.widgetCoords(e);b.circleDrag=Math.max(Math.abs(f.x),Math.abs(f.y))*2>b.square;b.mousemove(e);return false};b.mousemove=function(h){var j=b.widgetCoords(h);if(b.circleDrag){var g=Math.atan2(j.x,-j.y)/6.28;if(g<0){g+=1}b.setHSL([g,b.hsl[1],b.hsl[2]])}else{var f=Math.max(0,Math.min(1,-(j.x/b.square)+0.5));var e=Math.max(0,Math.min(1,-(j.y/b.square)+0.5));b.setHSL([b.hsl[0],f,e])}return false};b.mouseup=function(){$(document).unbind("mousemove",b.mousemove);$(document).unbind("mouseup",b.mouseup);document.dragging=false};b.updateDisplay=function(){var e=b.hsl[0]*6.28;$(".h-marker",c).css({left:Math.round(Math.sin(e)*b.radius+b.width/2)+"px",top:Math.round(-Math.cos(e)*b.radius+b.width/2)+"px"});$(".sl-marker",c).css({left:Math.round(b.square*(0.5-b.hsl[1])+b.width/2)+"px",top:Math.round(b.square*(0.5-b.hsl[2])+b.width/2)+"px"});$(".color",c).css("backgroundColor",b.pack(b.HSLToRGB([b.hsl[0],1,0.5])));if(typeof b.callback=="object"){$(b.callback).css({backgroundColor:b.color,color:b.hsl[2]>0.5?"#000":"#fff"});$(b.callback).each(function(){if(this.value&&this.value!=b.color){this.value=b.color}})}else{if(typeof b.callback=="function"){b.callback.call(b,b.color)}}};b.absolutePosition=function(f){var g={x:f.offsetLeft,y:f.offsetTop};if(f.offsetParent){var e=b.absolutePosition(f.offsetParent);g.x+=e.x;g.y+=e.y}return g};b.pack=function(f){var j=Math.round(f[0]*255);var h=Math.round(f[1]*255);var e=Math.round(f[2]*255);return"#"+(j<16?"0":"")+j.toString(16)+(h<16?"0":"")+h.toString(16)+(e<16?"0":"")+e.toString(16)};b.unpack=function(e){if(e.length==7){return[parseInt("0x"+e.substring(1,3))/255,parseInt("0x"+e.substring(3,5))/255,parseInt("0x"+e.substring(5,7))/255]}else{if(e.length==4){return[parseInt("0x"+e.substring(1,2))/15,parseInt("0x"+e.substring(2,3))/15,parseInt("0x"+e.substring(3,4))/15]}}};b.HSLToRGB=function(n){var p,o,e,k,m;var j=n[0],q=n[1],f=n[2];o=(f<=0.5)?f*(q+1):f+q-f*q;p=f*2-o;return[this.hueToRGB(p,o,j+0.33333),this.hueToRGB(p,o,j),this.hueToRGB(p,o,j-0.33333)]};b.hueToRGB=function(f,e,g){g=(g<0)?g+1:((g>1)?g-1:g);if(g*6<1){return f+(e-f)*g*6}if(g*2<1){return e}if(g*3<2){return f+(e-f)*(0.66666-g)*6}return f};b.RGBToHSL=function(n){var j,p,q,k,t,f;var e=n[0],m=n[1],o=n[2];j=Math.min(e,Math.min(m,o));p=Math.max(e,Math.max(m,o));q=p-j;f=(j+p)/2;t=0;if(f>0&&f<1){t=q/(f<0.5?(2*f):(2-2*f))}k=0;if(q>0){if(p==e&&p!=m){k+=(m-o)/q}if(p==m&&p!=o){k+=(2+(o-e)/q)}if(p==o&&p!=e){k+=(4+(e-m)/q)}k/=6}return[k,t,f]};$("*",c).mousedown(b.mousedown);b.setColor("#000000");if(d){b.linkTo(d)}};jQuery.fn.extend({everyTime:function(a,b,c,d){return this.each(function(){jQuery.timer.add(this,a,b,c,d)})},oneTime:function(a,b,c){return this.each(function(){jQuery.timer.add(this,a,b,c,1)})},stopTime:function(a,b){return this.each(function(){jQuery.timer.remove(this,a,b)})}});jQuery.extend({timer:{global:[],guid:1,dataKey:"jQuery.timer",regex:/^([0-9]+(?:\.[0-9]*)?)\s*(.*s)?$/,powers:{ms:1,cs:10,ds:100,s:1000,das:10000,hs:100000,ks:1000000},timeParse:function(c){if(c==undefined||c==null){return null}var a=this.regex.exec(jQuery.trim(c.toString()));if(a[2]){var b=parseFloat(a[1]);var d=this.powers[a[2]]||1;return b*d}else{return c}},add:function(d,b,c,f,h){var a=0;if(jQuery.isFunction(c)){if(!h){h=f}f=c;c=b}b=jQuery.timer.timeParse(b);if(typeof b!="number"||isNaN(b)||b<0){return}if(typeof h!="number"||isNaN(h)||h<0){h=0}h=h||0;var g=jQuery.data(d,this.dataKey)||jQuery.data(d,this.dataKey,{});if(!g[c]){g[c]={}}f.timerID=f.timerID||this.guid++;var e=function(){if((++a>h&&h!==0)||f.call(d,a)===false){jQuery.timer.remove(d,c,f)}};e.timerID=f.timerID;if(!g[c][f.timerID]){g[c][f.timerID]=window.setInterval(e,b)}this.global.push(d)},remove:function(c,b,d){var e=jQuery.data(c,this.dataKey),a;if(e){if(!b){for(b in e){this.remove(c,b,d)}}else{if(e[b]){if(d){if(d.timerID){window.clearInterval(e[b][d.timerID]);delete e[b][d.timerID]}}else{for(var d in e[b]){window.clearInterval(e[b][d]);delete e[b][d]}}for(a in e[b]){break}if(!a){a=null;delete e[b]}}}for(a in e){break}if(!a){jQuery.removeData(c,this.dataKey)}}}}});jQuery(window).bind("unload",function(){jQuery.each(jQuery.timer.global,function(a,b){jQuery.timer.remove(b)})});(function(c){var b=c.scrollTo=function(e,d,f){c(window).scrollTo(e,d,f)};b.defaults={axis:"xy",duration:parseFloat(c.fn.jquery)>=1.3?0:1,limit:true};b.window=function(d){return c(window)._scrollable()};c.fn._scrollable=function(){return this.map(function(){var e=this,f=!e.nodeName||c.inArray(e.nodeName.toLowerCase(),["iframe","#document","html","body"])!=-1;if(!f){return e}var d=(e.contentWindow||e).document||e.ownerDocument||e;return/webkit/i.test(navigator.userAgent)||d.compatMode=="BackCompat"?d.body:d.documentElement})};c.fn.scrollTo=function(j,h,d){if(typeof h=="object"){d=h;h=0}if(typeof d=="function"){d={onAfter:d}}if(j=="max"){j=9000000000}d=c.extend({},b.defaults,d);h=h||d.duration;d.queue=d.queue&&d.axis.length>1;if(d.queue){h/=2}d.offset=a(d.offset);d.over=a(d.over);return this._scrollable().each(function(){if(j==null){return}var n=this,k=c(n),l=j,g,e={},m=k.is("html,body");switch(typeof l){case"number":case"string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(l)){l=a(l);break}l=c(l,this);if(!l.length){return}case"object":if(l.is||l.style){g=(l=c(l)).offset()}}c.each(d.axis.split(""),function(t,r){var p=r=="x"?"Left":"Top",v=p.toLowerCase(),s="scroll"+p,q=n[s],o=b.max(n,r);if(g){e[s]=g[v]+(m?0:q-k.offset()[v]);if(d.margin){e[s]-=parseInt(l.css("margin"+p))||0;e[s]-=parseInt(l.css("border"+p+"Width"))||0}e[s]+=d.offset[v]||0;if(d.over[v]){e[s]+=l[r=="x"?"width":"height"]()*d.over[v]}}else{var u=l[v];e[s]=u.slice&&u.slice(-1)=="%"?parseFloat(u)/100*o:u}if(d.limit&&/^\d+$/.test(e[s])){e[s]=e[s]<=0?0:Math.min(e[s],o)}if(!t&&d.queue){if(q!=e[s]){f(d.onAfterFirst)}delete e[s]}});f(d.onAfter);function f(o){k.animate(e,h,d.easing,o&&function(){o.call(this,j,d)})}}).end()};b.max=function(h,g){var l=g=="x"?"Width":"Height",f="scroll"+l;if(!c(h).is("html,body")){return h[f]-c(h)[l.toLowerCase()]()}var k="client"+l,j=h.ownerDocument.documentElement,e=h.ownerDocument.body;return Math.max(j[f],e[f])-Math.min(j[k],e[k])};function a(d){return typeof d=="object"?d:{top:d,left:d}}})(jQuery);(function(b,a,c){b.DropDown=function(d,e){this.$el=b(e);this._init(d)};b.DropDown.defaults={speed:300,easing:"ease",gutter:0,stack:true,delay:0,random:false,rotated:false,slidingIn:false,onOptionSelect:function(d){return false}};b.DropDown.prototype={_init:function(d){this.options=b.extend(true,{},b.DropDown.defaults,d);this._layout();this._initEvents()},_layout:function(){var d=this;this.minZIndex=1000;var g=this._transformSelect();this.opts=this.listopts.children("li");this.optsCount=this.opts.length;this.size={width:this.dd.width(),height:this.dd.height()};var h=this.$el.attr("name"),f=this.$el.attr("id"),e=h!==c?h:f!==c?f:"cd-dropdown-"+(new Date()).getTime();this.inputEl=b('<input type="hidden" name="'+e+'" value="'+g+'"></input>').insertAfter(this.selectlabel);this.selectlabel.css("z-index",this.minZIndex+this.optsCount);this._positionOpts();if(Modernizr.csstransitions){setTimeout(function(){d.opts.css("transition","all "+d.options.speed+"ms "+d.options.easing)},25)}},_transformSelect:function(){var f="",d="",e=-1;this.$el.children("option").each(function(){var k=b(this),l=isNaN(k.attr("value"))?k.attr("value"):Number(k.attr("value")),h=k.attr("class"),j=k.attr("selected"),g=k.text();if(l!==-1){f+=h!==c?'<li data-value="'+l+'"><span class="'+h+'">'+g+"</span></li>":'<li data-value="'+l+'"><span>'+g+"</span></li>"}if(j){d=g;e=l}});this.listopts=b("<ul/>").append(f);this.selectlabel=b("<span/>").append(d);this.dd=b('<div class="cd-dropdown"/>').append(this.selectlabel,this.listopts).insertAfter(this.$el);this.$el.remove();return e},_positionOpts:function(e){var d=this;this.listopts.css("height","auto");this.opts.each(function(f){b(this).css({zIndex:d.minZIndex+d.optsCount-1-f,top:d.options.slidingIn?(f+1)*(d.size.height+d.options.gutter):0,left:0,marginLeft:d.options.slidingIn?f%2===0?d.options.slidingIn:-d.options.slidingIn:0,opacity:d.options.slidingIn?0:1,transform:"none"})});if(!this.options.slidingIn){this.opts.eq(this.optsCount-1).css({top:this.options.stack?9:0,left:this.options.stack?4:0,width:this.options.stack?this.size.width-8:this.size.width,transform:"none"}).end().eq(this.optsCount-2).css({top:this.options.stack?6:0,left:this.options.stack?2:0,width:this.options.stack?this.size.width-4:this.size.width,transform:"none"}).end().eq(this.optsCount-3).css({top:this.options.stack?3:0,left:0,transform:"none"})}},_initEvents:function(){var d=this;this.selectlabel.on("mousedown.dropdown",function(e){d.opened?d.close():d.open();return false});this.opts.on("click.dropdown",function(){if(d.opened){var e=b(this);d.options.onOptionSelect(e);d.inputEl.val(e.data("value"));d.selectlabel.html(e.html());d.close()}})},open:function(){var d=this;this.dd.toggleClass("cd-active");this.listopts.css("height",(this.optsCount+1)*(this.size.height+this.options.gutter));this.opts.each(function(e){b(this).css({opacity:1,top:d.options.rotated?d.size.height+d.options.gutter:(e+1)*(d.size.height+d.options.gutter),left:d.options.random?Math.floor(Math.random()*11-5):0,width:d.size.width,marginLeft:0,transform:d.options.random?"rotate("+Math.floor(Math.random()*11-5)+"deg)":d.options.rotated?d.options.rotated==="right"?"rotate(-"+(e*5)+"deg)":"rotate("+(e*5)+"deg)":"none",transitionDelay:d.options.delay&&Modernizr.csstransitions?d.options.slidingIn?(e*d.options.delay)+"ms":((d.optsCount-1-e)*d.options.delay)+"ms":0})});this.opened=true},close:function(){var d=this;this.dd.toggleClass("cd-active");if(this.options.delay&&Modernizr.csstransitions){this.opts.each(function(e){b(this).css({"transition-delay":d.options.slidingIn?((d.optsCount-1-e)*d.options.delay)+"ms":(e*d.options.delay)+"ms"})})}this._positionOpts(true);this.opened=false}};b.fn.dropdown=function(f){var d=b.data(this,"dropdown");if(typeof f==="string"){var e=Array.prototype.slice.call(arguments,1);this.each(function(){d[f].apply(d,e)})}else{this.each(function(){d?d._init():d=b.data(this,"dropdown",new b.DropDown(f,this))})}return d}})(jQuery,window);window.Modernizr=function(an,am,al){function H(b){ae.cssText=b}function Y(d,c){return H(ab.join(d+";")+(c||""))}function W(d,c){return typeof d===c}function U(d,c){return !!~(""+d).indexOf(c)}function S(f,c){for(var h in f){var g=f[h];if(!U(g,"-")&&ae[g]!==al){return c=="pfx"?g:!0}}return !1}function Q(g,c,k){for(var j in g){var h=c[g[j]];if(h!==al){return k===!1?g[j]:W(h,"function")?h.bind(k||c):h}}return !1}function O(g,f,k){var j=g.charAt(0).toUpperCase()+g.slice(1),h=(g+" "+Z.join(j+" ")+j).split(" ");return W(f,"string")||W(f,"undefined")?S(h,f):(h=(g+" "+X.join(j+" ")+j).split(" "),Q(h,f,k))}var ak="2.6.2",aj={},ai=!0,ah=am.documentElement,ag="modernizr",af=am.createElement(ag),ae=af.style,ad,ac={}.toString,ab=" -webkit- -moz- -o- -ms- ".split(" "),aa="Webkit Moz O ms",Z=aa.split(" "),X=aa.toLowerCase().split(" "),V={},T={},R={},P=[],N=P.slice,M,K=function(v,u,t,s){var r,q,p,o,h=am.createElement("div"),g=am.body,b=g||am.createElement("body");if(parseInt(t,10)){while(t--){p=am.createElement("div"),p.id=s?s[t]:ag+(t+1),h.appendChild(p)}}return r=["&#173;",'<style id="s',ag,'">',v,"</style>"].join(""),h.id=ag,(g?h:b).innerHTML+=r,b.appendChild(h),g||(b.style.background="",b.style.overflow="hidden",o=ah.style.overflow,ah.style.overflow="hidden",ah.appendChild(b)),q=u(h,v),g?h.parentNode.removeChild(h):(b.parentNode.removeChild(b),ah.style.overflow=o),!!q},J={}.hasOwnProperty,I;!W(J,"undefined")&&!W(J.call,"undefined")?I=function(d,c){return J.call(d,c)}:I=function(d,c){return c in d&&W(d.constructor.prototype[c],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(a){var h=this;if(typeof h!="function"){throw new TypeError}var g=N.call(arguments,1),f=function(){if(this instanceof f){var b=function(){};b.prototype=h.prototype;var d=new b,c=h.apply(d,g.concat(N.call(arguments)));return Object(c)===c?c:d}return h.apply(a,g.concat(N.call(arguments)))};return f}),V.touch=function(){var a;return"ontouchstart" in an||an.DocumentTouch&&am instanceof DocumentTouch?a=!0:K(["@media (",ab.join("touch-enabled),("),ag,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(b){a=b.offsetTop===9}),a},V.csstransitions=function(){return O("transition")};for(var L in V){I(V,L)&&(M=L.toLowerCase(),aj[M]=V[L](),P.push((aj[M]?"":"no-")+M))}return aj.addTest=function(e,c){if(typeof e=="object"){for(var f in e){I(e,f)&&aj.addTest(f,e[f])}}else{e=e.toLowerCase();if(aj[e]!==al){return aj}c=typeof c=="function"?c():c,typeof ai!="undefined"&&ai&&(ah.className+=" "+(c?"":"no-")+e),aj[e]=c}return aj},H(""),af=ad=null,function(ar,aq){function A(f,e){var h=f.createElement("p"),g=f.getElementsByTagName("head")[0]||f.documentElement;return h.innerHTML="x<style>"+e+"</style>",g.insertBefore(h.lastChild,g.firstChild)}function z(){var b=s.elements;return typeof b=="string"?b.split(" "):b}function x(d){var c=C[d[E]];return c||(c={},D++,d[E]=D,C[D]=c),c}function w(b,h,e){h||(h=aq);if(B){return h.createElement(b)}e||(e=x(h));var d;return e.cache[b]?d=e.cache[b].cloneNode():G.test(b)?d=(e.cache[b]=e.createElem(b)).cloneNode():d=e.createElem(b),d.canHaveChildren&&!ao.test(b)?e.frag.appendChild(d):d}function v(b,m){b||(b=aq);if(B){return b.createDocumentFragment()}m=m||x(b);var l=m.frag.cloneNode(),k=0,j=z(),h=j.length;for(;k<h;k++){l.createElement(j[k])}return l}function u(d,c){c.cache||(c.cache={},c.createElem=d.createElement,c.createFrag=d.createDocumentFragment,c.frag=c.createFrag()),d.createElement=function(a){return s.shivMethods?w(a,d,c):c.createElem(a)},d.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+z().join().replace(/\w+/g,function(b){return c.createElem(b),c.frag.createElement(b),'c("'+b+'")'})+");return n}")(s,c.frag)}function t(b){b||(b=aq);var d=x(b);return s.shivCSS&&!F&&!d.hasCSS&&(d.hasCSS=!!A(b,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}")),B||u(b,d),b}var ap=ar.html5||{},ao=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,G=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,F,E="_html5shiv",D=0,C={},B;(function(){try{var b=aq.createElement("a");b.innerHTML="<xyz></xyz>",F="hidden" in b,B=b.childNodes.length==1||function(){aq.createElement("a");var c=aq.createDocumentFragment();return typeof c.cloneNode=="undefined"||typeof c.createDocumentFragment=="undefined"||typeof c.createElement=="undefined"}()}catch(d){F=!0,B=!0}})();var s={elements:ap.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:ap.shivCSS!==!1,supportsUnknownElements:B,shivMethods:ap.shivMethods!==!1,type:"default",shivDocument:t,createElement:w,createDocumentFragment:v};ar.html5=s,t(aq)}(this,am),aj._version=ak,aj._prefixes=ab,aj._domPrefixes=X,aj._cssomPrefixes=Z,aj.testProp=function(b){return S([b])},aj.testAllProps=O,aj.testStyles=K,ah.className=ah.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(ai?" js "+P.join(" "):""),aj}(this,this.document),function(ad,ac,ab){function aa(b){return"[object Function]"==P.call(b)}function Z(b){return"string"==typeof b}function Y(){}function X(b){return !b||"loaded"==b||"complete"==b||"uninitialized"==b}function W(){var b=O.shift();M=1,b?b.t?R(function(){("c"==b.t?L.injectCss:L.injectJs)(b.s,0,b.a,b.x,b.e,1)},0):(b(),W()):M=0}function V(w,v,t,s,q,p,n){function m(a){if(!g&&X(h.readyState)&&(x.r=g=1,!M&&W(),h.onload=h.onreadystatechange=null,a)){"img"!=w&&R(function(){I.removeChild(h)},50);for(var c in D[v]){D[v].hasOwnProperty(c)&&D[v][c].onload()}}}var n=n||L.errorTimeout,h=ac.createElement(w),g=0,b=0,x={t:t,s:v,e:q,a:p,x:n};1===D[v]&&(b=1,D[v]=[]),"object"==w?h.data=v:(h.src=v,h.type=w),h.width=h.height="0",h.onerror=h.onload=h.onreadystatechange=function(){m.call(this,b)},O.splice(s,0,x),"img"!=w&&(b||2===D[v]?(I.insertBefore(h,J?null:Q),R(m,n)):D[v].push(h))}function U(g,e,k,j,h){return M=0,e=e||"j",Z(g)?V("c"==e?G:H,g,e,this.i++,k,j,h):(O.splice(this.i++,0,g),1==O.length&&W()),this}function T(){var b=L;return b.loader={load:U,i:0},b}var S=ac.documentElement,R=ad.setTimeout,Q=ac.getElementsByTagName("script")[0],P={}.toString,O=[],M=0,K="MozAppearance" in S.style,J=K&&!!ac.createRange().compareNode,I=J?S:Q.parentNode,S=ad.opera&&"[object Opera]"==P.call(ad.opera),S=!!ac.attachEvent&&!S,H=K?"object":S?"script":"img",G=S?"script":H,F=Array.isArray||function(b){return"[object Array]"==P.call(b)},E=[],D={},C={timeout:function(d,c){return c.length&&(d.timeout=c[0]),d}},N,L;L=function(e){function c(j){var j=j.split("!"),h=E.length,r=j.pop(),q=j.length,r={url:r,origUrl:r,prefixes:j},p,o,l;for(o=0;o<q;o++){l=j[o].split("="),(p=C[l.shift()])&&(r=p(r,l))}for(o=0;o<h;o++){r=E[o](r)}return r}function n(b,s,r,q,p){var o=c(b),l=o.autoCallback;o.url.split(".").pop().split("?").shift(),o.bypass||(s&&(s=aa(s)?s:s[b]||s[q]||s[b.split("/").pop().split("?")[0]]),o.instead?o.instead(b,s,r,q,p):(D[o.url]?o.noexec=!0:D[o.url]=1,r.load(o.url,o.forceCSS||!o.forceJS&&"css"==o.url.split(".").pop().split("?").shift()?"c":ab,o.noexec,o.attrs,o.timeout),(aa(s)||aa(l))&&r.load(function(){T(),s&&s(o.origUrl,p,q),l&&l(o.origUrl,p,q),D[o.url]=2})))}function m(w,v){function u(b,h){if(b){if(Z(b)){h||(r=function(){var j=[].slice.call(arguments);q.apply(this,j),p()}),n(b,r,v,0,t)}else{if(Object(b)===b){for(g in o=function(){var a=0,j;for(j in b){b.hasOwnProperty(j)&&a++}return a}(),b){b.hasOwnProperty(g)&&(!h&&!--o&&(aa(r)?r=function(){var j=[].slice.call(arguments);q.apply(this,j),p()}:r[g]=function(j){return function(){var a=[].slice.call(arguments);j&&j.apply(this,a),p()}}(q[g])),n(b[g],r,v,g,t))}}}}else{!h&&p()}}var t=!!w.test,s=w.load||w.both,r=w.callback||Y,q=r,p=w.complete||Y,o,g;u(t?w.yep:w.nope,!!s),s&&u(s)}var k,f,d=this.yepnope.loader;if(Z(e)){n(e,0,d,0)}else{if(F(e)){for(k=0;k<e.length;k++){f=e[k],Z(f)?n(f,0,d,0):F(f)?L(f):Object(f)===f&&m(f,d)}}else{Object(e)===e&&m(e,d)}}},L.addPrefix=function(d,c){C[d]=c},L.addFilter=function(b){E.push(b)},L.errorTimeout=10000,null==ac.readyState&&ac.addEventListener&&(ac.readyState="loading",ac.addEventListener("DOMContentLoaded",N=function(){ac.removeEventListener("DOMContentLoaded",N,0),ac.readyState="complete"},0)),ad.yepnope=T(),ad.yepnope.executeStack=W,ad.yepnope.injectJs=function(r,q,p,n,m,h){var g=ac.createElement("script"),f,b,n=n||L.errorTimeout;g.src=r;for(b in p){g.setAttribute(b,p[b])}q=h?W:q||Y,g.onreadystatechange=g.onload=function(){!f&&X(g.readyState)&&(f=1,q(),g.onload=g.onreadystatechange=null)},R(function(){f||(f=1,q(1))},n),m?g.onload():Q.parentNode.insertBefore(g,Q)},ad.yepnope.injectCss=function(b,n,m,l,k,h){var l=ac.createElement("link"),f,n=h?W:n||Y;l.href=b,l.rel="stylesheet",l.type="text/css";for(f in m){l.setAttribute(f,m[f])}k||(Q.parentNode.insertBefore(l,Q),R(n,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))};(function(b){function a(e,d){var c=this;e=jQuery(e);var f=jQuery(document.createElement("div")).addClass(d.baseClass).addClass((d.fixed)?d.fixedClass:"").addClass((d.persistent)?d.persistentClass:"").html(d.content).appendTo(e);if(!d.hidden){f.show()}else{f.hide()}if(!d.persistent){e.hover(function(g){c.show(g)},function(){c.hide()});if(!d.fixed){e.mousemove(function(g){if(f.css("display")!=="none"){c.updatePos(g)}})}}else{e.click(function(g){if(g.target===e.get(0)){if(f.css("display")!=="none"){c.hide()}else{c.show()}}});jQuery(window).mousedown(function(h){if(f.css("display")!=="none"){var g=(d.focus)?jQuery(h.target).parents(".tooltip").andSelf().filter(function(){return this===f.get(0)}).length:0;if(g===0){c.hide()}}})}jQuery.extend(c,{getVersion:function(){return[1,2,0]},getParent:function(){return e},getTooltip:function(){return f},getPos:function(){return f.offset()},setPos:function(j,h){var g=e.offset();if(typeof j=="string"){j=parseInt(j)+g.left}if(typeof h=="string"){h=parseInt(h)+g.top}f.css({left:j,top:h});return c},show:function(g){d.onBeforeShow.call(c);c.updatePos((d.fixed)?null:g);switch(d.showEffect){case"fade":f.fadeIn(d.showTime);break;case"slide":f.slideDown(d.showTime,c.updatePos);break;case"custom":d.showCustom.call(f,d.showTime);break;default:case"none":f.show();break}f.addClass(d.activeClass);d.onShow.call(c);return c},hide:function(){d.onBeforeHide.call(c);switch(d.hideEffect){case"fade":f.fadeOut(d.hideTime);break;case"slide":f.slideUp(d.hideTime);break;case"custom":d.hideCustom.call(f,d.hideTime);break;default:case"none":f.hide();break}f.removeClass(d.activeClass);d.onHide.call(c);return c},update:function(g){f.html(g);d.content=g;return c},load:function(g,h){d.beforeContentLoad.call(c);f.load(g,h,function(){d.onContentLoad.call(c)});return c},boundryCheck:function(m,k){var j=m+f.outerWidth();var h=k+f.outerHeight();var g=jQuery(window).width()+jQuery(window).scrollLeft();var l=jQuery(window).height()+jQuery(window).scrollTop();return[(j>=g),(h>=l)]},updatePos:function(j){var o=f.outerWidth();var q=f.outerHeight();if(!j&&d.fixed){if(d.position.constructor==Array){h=parseInt(d.position[0]);g=parseInt(d.position[1])}else{if(jQuery(d.position).attr("nodeType")===1){var n=jQuery(d.position).offset();h=n.left;g=n.top}else{var p=e.offset();var m=e.outerWidth();var k=e.outerHeight();switch(d.position){case"top":var h=p.left-(o/2)+(m/2);var g=p.top-q;break;case"bottom":var h=p.left-(o/2)+(m/2);var g=p.top+k;break;case"left":var h=p.left-o;var g=p.top-(q/2)+(k/2);break;case"right":var h=p.left+m;var g=p.top-(q/2)+(k/2);break;default:case"default":var h=(m/2)+p.left+20;var g=p.top;break}}}}else{var h=j.pageX;var g=j.pageY}if(typeof d.position!="object"){h=h+d.offset[0];g=g+d.offset[1];if(d.boundryCheck){var l=c.boundryCheck(h,g);if(l[0]){h=h-(o/2)-(2*d.offset[0])}if(l[1]){g=g-(q/2)-(2*d.offset[1])}}}else{if(typeof d.position[0]=="string"){h=String(h)}if(typeof d.position[1]=="string"){g=String(g)}}c.setPos(h,g);return c}})}jQuery.fn.simpletip=function(c){var d=jQuery(this).eq(typeof c=="number"?c:0).data("simpletip");if(d){return d}var e={content:"A simple tooltip",persistent:false,focus:false,hidden:true,position:"default",offset:[0,0],boundryCheck:true,fixed:true,showEffect:"fade",showTime:150,showCustom:null,hideEffect:"fade",hideTime:150,hideCustom:null,baseClass:"tooltip",activeClass:"active",fixedClass:"fixed",persistentClass:"persistent",focusClass:"focus",onBeforeShow:function(){},onShow:function(){},onBeforeHide:function(){},onHide:function(){},beforeContentLoad:function(){},onContentLoad:function(){}};jQuery.extend(e,c);this.each(function(){var f=new a(jQuery(this),e);jQuery(this).data("simpletip",f)});return this}})();(function(a){a.fn.caret=function(h){var g=this[0];var d=g.contentEditable==="true";if(arguments.length==0){if(window.getSelection){if(d){g.focus();var c=window.getSelection().getRangeAt(0),b=c.cloneRange();b.selectNodeContents(g);b.setEnd(c.endContainer,c.endOffset);return b.toString().length}return g.selectionStart}if(document.selection){g.focus();if(d){var c=document.selection.createRange(),b=document.body.createTextRange();b.moveToElementText(g);b.setEndPoint("EndToEnd",c);return b.text.length}var h=0,e=g.createTextRange(),b=document.selection.createRange().duplicate(),f=b.getBookmark();e.moveToBookmark(f);while(e.moveStart("character",-1)!==0){h++}return h}return 0}if(h==-1){h=this[d?"text":"val"]().length}if(window.getSelection){if(d){g.focus();window.getSelection().collapse(g.firstChild,h)}else{g.setSelectionRange(h,h)}}else{if(document.body.createTextRange){var e=document.body.createTextRange();e.moveToElementText(g);e.moveStart("character",h);e.collapse(true);e.select()}}if(!d){g.focus()}return h}})(jQuery);jQuery&&function(c){function a(g,h){var k=g?c(this):h,j=c(k.attr("data-jq-dropdown")),f=k.hasClass("jq-dropdown-open");if(g){if(c(g.target).hasClass("jq-dropdown-ignore")){return}g.preventDefault(),g.stopPropagation()}else{if(k!==h.target&&c(h.target).hasClass("jq-dropdown-ignore")){return}}d(),f||k.hasClass("jq-dropdown-disabled")||(k.addClass("jq-dropdown-open"),j.data("jq-dropdown-trigger",k).show(),b(),j.trigger("show",{jqDropdown:j,trigger:k}))}function d(e){var f=e?c(e.target).parents().addBack():null;if(f&&f.is(".jq-dropdown")){if(!f.is(".jq-dropdown-menu")){return}if(!f.is("A")){return}}c(document).find(".jq-dropdown:visible").each(function(){var g=c(this);g.hide().removeData("jq-dropdown-trigger").trigger("hide",{jqDropdown:g})}),c(document).find(".jq-dropdown-open").removeClass("jq-dropdown-open")}function b(){var f=c(".jq-dropdown:visible").eq(0),j=f.data("jq-dropdown-trigger"),g=j?parseInt(j.attr("data-horizontal-offset")||0,10):null,h=j?parseInt(j.attr("data-vertical-offset")||0,10):null;0!==f.length&&j&&f.css(f.hasClass("jq-dropdown-relative")?{left:f.hasClass("jq-dropdown-anchor-right")?j.position().left-(f.outerWidth(!0)-j.outerWidth(!0))-parseInt(j.css("margin-right"),10)+g:j.position().left+parseInt(j.css("margin-left"),10)+g,top:j.position().top+j.outerHeight(!0)-parseInt(j.css("margin-top"),10)+h}:{left:f.hasClass("jq-dropdown-anchor-right")?j.offset().left-(f.outerWidth()-j.outerWidth())+g:j.offset().left+g,top:j.offset().top+j.outerHeight()+h})}c.extend(c.fn,{jqDropdown:function(f,g){switch(f){case"show":return a(null,c(this)),c(this);case"hide":return d(),c(this);case"attach":return c(this).attr("data-jq-dropdown",g);case"detach":return d(),c(this).removeAttr("data-jq-dropdown");case"disable":return c(this).addClass("jq-dropdown-disabled");case"enable":return d(),c(this).removeClass("jq-dropdown-disabled")}}}),c(document).on("click.jq-dropdown","[data-jq-dropdown]",a),c(document).on("click.jq-dropdown",d),c(window).on("resize",b)}(jQuery);$(function(){new xsBookmark().DialogInit()});function xsBookmark(){var SelectedBookmark=Array();var LastLoadedBookmarkFolder;var BookmarkDialog;var OpenBookmarkButton;this.DialogInit=function(){var self=this;self.OpenBookmarkButton=$("[jq=OpenBookmarkButton]");self.BookmarkToggle=$("[jq=bookmark_toggle]");self.OpenBookmarkButton.click(function(){if(self.BookmarkDialog){self.BookmarkDialog.dialog("open")}else{self.BookmarkDialog=$("<div />").dialog({title:"Закладки",width:900,height:600,autoOpen:true,resizable:true,open:function(event,ui){self.onDialogOpen()},close:function(event,ui){self.BookmarkDialog.html("")},dragStop:function(event,ui){var Position=$(this).dialog("option","position");localStorage.BookmarkDialogPosition=Position},create:function(event,ui){var ar=explode_comma(localStorage.BookmarkDialogPosition);if(localStorage.BookmarkDialogPosition){$(this).dialog("option","position",eval("["+intval(ar[0])+","+intval(ar[1])+"]"))}if(localStorage.BookmarkDialogWidth){$(this).dialog("option","width",eval(intval(localStorage.BookmarkDialogWidth)))}if(localStorage.BookmarkDialogHeight){$(this).dialog("option","height",eval(intval(localStorage.BookmarkDialogHeight)))}},resizeStop:function(event,ui){localStorage.BookmarkDialogWidth=$(this).dialog("option","width");localStorage.BookmarkDialogHeight=$(this).dialog("option","height")}})}});self.BookmarkToggle.click(function(){var bm_id=$(this).attr("bm_id");if(bm_id){self.DeleteBookmark(bm_id)}else{self.AddBookmark()}})};this.SetDialogTitle=function(Str){var self=this;var Title="Закладки";if(Str){Title=Title+" - "+Str}self.BookmarkDialog.dialog("option","title",Title)};this.AddBookmark=function(){var self=this;var Dialog=$("<div />",{html:'<table class="bm8"><tr><td><textarea jq="Title" style="width:600px;">'+document.title+'</textarea> </td></tr><tr><td>Выберите папку: <select jq="SelectBookmarkFolder"></select></td></tr></table>'}).dialog({width:650,modal:true,resizable:true,title:"Добавление закладки  ",buttons:{"Добавить":function(){var Title=$(this).find("[jq=Title]").val();var Url=""+document.location+"";var BookmarkFolderId=Dialog.find("[jq=SelectBookmarkFolder]").val();$.ajax({url:"/AddBookmark",type:"POST",data:({title:Title,url:Url,bookmark_folder_id:BookmarkFolderId}),success:function(Str){var data=xsJsonParse(Str);self.SetStarOn();$("[jq=bookmark_toggle]").attr("bm_id",data.BookmarkId);Dialog.dialog("close");self.AddOrDeleteActionSuccess()}})},"Отмена":function(){$(this).dialog("close")}},create:function(event,ui){var Dialog=$(this);$.ajax({url:"/GetBookmarkFolderList",type:"POST",success:function(Str){var data=xsJsonParse(Str);var SelectBookmarkFolder=Dialog.find("[jq=SelectBookmarkFolder]");SelectBookmarkFolder.append('<option value="0">Без папки</option>');$.each(data.BookmarkFolderList,function(key,value){SelectBookmarkFolder.append('<option value="'+value.bmf_id+'">'+value.bmf_title+" "+value.bmf_bookmark_count+"</option>")})}})}})};this.DeleteBookmark=function(BookmarkId){var self=this;$("<div />",{html:"Вы действительно хотите удалить закладку?"}).dialog({modal:true,resizable:false,title:"Удаление закладки  ",buttons:{"Удалить":function(){var Dialog=$(this);$.ajax({type:"POST",url:"/DeleteBookmark",data:({bm_id:BookmarkId}),success:function(Str){var data=xsJsonParse(Str);$("[jq=BookmarkList]").find("[bm_id="+BookmarkId+"]").remove();self.SetStarOff();$("[jq=bookmark_toggle]").removeAttr("bm_id");Dialog.dialog("close");self.AddOrDeleteActionSuccess()}})},"Отмена":function(){$(this).dialog("close")}}})};this.AddOrDeleteActionSuccess=function(){var self=this;if(self.BookmarkDialog.dialog("isOpen")){self.onDialogOpen()}};this.SetStarOn=function(){$("#bookmark_action").html("Удалить из закладок")};this.SetStarOff=function(){$("#bookmark_action").html("Добавить в закладки")};this.onDialogOpen=function(){var self=this;$.ajax({type:"GET",url:"/LoadBookmarkPanel",success:function(Str){var data=xsJsonParse(Str);self.BookmarkDialog.html(data.Content);self.Init()}})};this.Init=function(){var self=this;self.BookmarkFolderListInit();if(self.GetLastOpenedBookmarkFolder()){self.LoadBookmarkFolder(self.GetLastOpenedBookmarkFolder())}else{self.LoadBookmarkFolder()}$("[jq=CreateBookmarkFolder]").click(function(){self.onCreateBookmarkFolderStart()});$("[jq=MoveBookmark]").draggable({revert:true});if($("[jq=bookmark_toggle]").attr("bm_id")){var bm_id=$("[jq=bookmark_toggle]").attr("bm_id");$("[jq=BookmarkDeleteCurrentPage]").show().unbind().click(function(){self.DeleteBookmark(bm_id)})}else{$("[jq=BookmarkAddCurrentPage]").show().unbind().click(function(){self.AddBookmark()})}};this.BookmarkFolderListInit=function(){var self=this;$("#BookmarkFolderList > li").each(function(){var BookmarkFolder=$(this);var Bmf_id=BookmarkFolder.attr("Bmf_id");BookmarkFolder.find("[jq=Title]").click(function(){self.LoadBookmarkFolder(Bmf_id)});BookmarkFolder.find("[jq=Edit]").click(function(){self.onEditBookmarkFolderStart(this)});BookmarkFolder.find("[jq=Delete]").click(function(){self.onDeleteBookmarkFolderStart(this)});if(Bmf_id){BookmarkFolder.droppable({accept:"[jq=MoveBookmark]",activeClass:"ui-state-hover",hoverClass:"ui-state-active",drop:function(event,ui){$("[jq=MoveBookmark]").hide();self.MoveBookmark(SelectedBookmark,Bmf_id)}})}});$("#BookmarkFolderList").sortable({placeholder:"ui-state-highlight",forcePlaceholderSize:true,tolerance:"pointer",helper:"original",items:"[Bmf_id]",stop:function(event,ui){var result=$(this).sortable("toArray");$.ajax({type:"POST",url:"/SaveBookmarkFolderOrder",data:({SortedBookmarkFolders:result}),success:function(Str){var data=xsJsonParse(Str)}})}})};this.onCreateBookmarkFolderStart=function(){var self=this;$("<div />",{html:'<textarea style="width:200px; height:100px;"></textarea>'}).dialog({modal:true,resizable:false,title:"Создать папку закладок",buttons:{"Создать":function(){var Dialog=$(this);var text=Dialog.find("textarea").val();$.ajax({type:"POST",url:"/CreateBookmarkFolder",data:({Title:text}),success:function(Str){var data=xsJsonParse(Str);Dialog.dialog("close");self.LoadBookmarkFolders()}})},"Отмена":function(){$(this).dialog("close")}}})};this.onEditBookmarkFolderStart=function(Edit){var self=this;var Parent=$(Edit).parents("li");var Title=Parent.find("[jq=Title]");var Bmf_id=Parent.attr("Bmf_id");$("<div />",{html:'<textarea style="width:200px; height:100px;">'+Title.html()+"</textarea>"}).dialog({modal:true,resizable:false,title:"Редактировать название",buttons:{"Сохранить":function(){var Dialog=$(this);var text=Dialog.find("textarea").val();$.ajax({type:"POST",url:"/SaveBookmarkFolderTitle",data:({Bmf_id:Bmf_id,Title:text}),success:function(Str){var data=xsJsonParse(Str);Title.text(text);Dialog.dialog("close")}})},"Отмена":function(){$(this).dialog("close")}}})};this.onDeleteBookmarkFolderStart=function(Delete){var self=this;var Parent=$(Delete).parents("li");var Title=Parent.find("[jq=Title]");var Bmf_id=Parent.attr("Bmf_id");$("<div />",{html:"Вы действительно хотите удалить папку закладок? Все закладки в папке также будут удалены"}).dialog({width:300,modal:true,resizable:false,title:'Удаление папки закладок "'+Title.text()+'" ',buttons:{"Удалить":function(){var Dialog=$(this);$.ajax({type:"POST",url:"/DeleteBookmarkFolder",data:({Bmf_id:Bmf_id}),success:function(Str){var data=xsJsonParse(Str);Parent.remove();Dialog.dialog("close");if(self.GetLastOpenedBookmarkFolder()==Bmf_id){self.SetLastOpenedBookmarkFolder("")}}})},"Отмена":function(){$(this).dialog("close")}}})};this.LoadBookmarkFolders=function(){var self=this;$.ajax({type:"GET",url:"/LoadBookmarkFolders",beforeSend:function(xhr){$("[jq=BookmarkFolderLoadPlace]").html("Загрузка...")},success:function(data){$("[jq=BookmarkFolderLoadPlace]").html(data);self.BookmarkFolderListInit()}})};this.LoadBookmarkFolder=function(Bmf_id){var self=this;var PageLoad=$("[jq=BookmarkLoadPlace]");PageLoad.xsPageLoad({Url:"/LoadBookmarks",GetParam:{Bmf_id:Bmf_id},ScrollToTop:false,beforeSend:function(xhr){$("[jq=BookmarkLoadPlace]").html("Загрузка...")},OnShow:function(){self.OnLoadBookmark();self.SetLastOpenedBookmarkFolder(Bmf_id);self.SetDialogTitle(self.GetBookmarkFolderTitleById(Bmf_id))}});PageLoad.xsPageLoad("LoadPage",1)};this.GetBookmarkFolderTitleById=function(Bmf_id){return $("#BookmarkFolderList > li[Bmf_id="+Bmf_id+"]").find("[jq=Title]").text()};this.SetLastOpenedBookmarkFolder=function(Bmf_id){localStorage.LastOpenedBookmark=Bmf_id};this.GetLastOpenedBookmarkFolder=function(){return localStorage.LastOpenedBookmark};this.OnLoadBookmark=function(){var self=this;$("[jq=BookmarkLoadPlace]").find("[jq=bookmark]").each(function(){var Bookmark=$(this);var bm_id=Bookmark.attr("bm_id");Bookmark.find("[jq=Delete]").click(function(){self.DeleteBookmark(bm_id)});Bookmark.find("[jq=Edit]").click(function(){self.onEditBookmarkStart(Bookmark)});Bookmark.find("[jq=checkbox]").click(function(){if($(this).is(":checked")){self.onBookmarkCheck(bm_id)}else{self.onBookmarkUncheck(bm_id)}});self.SyncBookmarksFromAr()})};this.onEditBookmarkStart=function(Bookmark){var self=this;var Title=Bookmark.find("[jq=Title]");var bm_id=Bookmark.attr("bm_id");var TitleText=Title.html();$("<div />",{html:'<textarea style="width:500px; height:100px;">'+TitleText+"</textarea>"}).dialog({width:550,modal:true,resizable:false,title:"Редактировать закладку",buttons:{"Сохранить":function(){var Dialog=$(this);var text=Dialog.find("textarea").val();$.ajax({type:"POST",url:"/SaveBookmarkTitle",data:({bm_id:bm_id,Title:text}),success:function(Str){var data=xsJsonParse(Str);Title.text(text);Dialog.dialog("close")}})},"Отмена":function(){$(this).dialog("close")}}})};this.MoveBookmark=function(BookmarkIds,BookmarkFolderId){var self=this;$.ajax({type:"POST",data:({BookmarkIds:BookmarkIds,BookmarkFolderId:BookmarkFolderId}),url:"/MoveBookmark",success:function(Str){var data=xsJsonParse(Str);SelectedBookmark=Array();self.SyncBookmarksFromAr();self.LoadBookmarkFolder(BookmarkFolderId);self.LoadBookmarkFolders()}})};this.onBookmarkCheck=function(BookmarkId){var self=this;SelectedBookmark.push(BookmarkId);self.UpdateSelectedBookmarkCounter();$("[jq=MoveBookmark]").show()};this.onBookmarkUncheck=function(BookmarkId){var self=this;for(var key in SelectedBookmark){if(SelectedBookmark[key]==BookmarkId){SelectedBookmark.splice(key,1)}}self.UpdateSelectedBookmarkCounter()};this.UpdateSelectedBookmarkCounter=function(BookmarkId){var ar=array_unique(SelectedBookmark);var n=ar.length;$("[jq=SelectedBookmarksCount]").html("("+n+")");if(n>0){$("[jq=MoveBookmark]").show()}else{$("[jq=MoveBookmark]").hide()}};this.SyncBookmarksFromAr=function(){var self=this;$("[jq=BookmarkLoadPlace]").find("[jq=bookmark]").each(function(){var Bookmark=$(this);var bm_id=Bookmark.attr("bm_id");if(in_array(bm_id,SelectedBookmark)){Bookmark.find("[jq=checkbox]").attr("checked","checked")}else{Bookmark.find("[jq=checkbox]").removeAttr("checked")}});self.UpdateSelectedBookmarkCounter()}}$(function(){var a=$("#AuthorStatus");if(a.exists()){var b=a.attr("AuthorId");a.change(function(){$.ajax({type:"POST",url:"/AuthorChangeStatus",data:({AuthorId:b,Code:a.val()}),success:function(c){$("[jq=AuthorStatusSaveStatus]").html("Сохранено");var d=xsJsonParse(c)},beforeSend:function(){$("[jq=AuthorStatusSaveStatus]").html("Сохранение...")}})})}});$(function(){new xsUserLibAuthorClick().Init()});function xsUserLibAuthorClick(){var a;this.Init=function(){var b=this;a=$("#UserLibAuthorClick");if(a.exists()){a.button();b.RefreshText();a.click(function(){var c=$(this).attr("AuthorId");$.ajax({type:"POST",url:"/UserLibAuthorButtonClick",data:({AuthorId:c}),success:function(d){var e=xsJsonParse(d);if(e.checked){a.attr("checked","checked")}else{a.removeAttr("checked")}b.RefreshText()},beforeSend:function(){}})})}},this.RefreshText=function(){var b=this;if(a.attr("checked")=="checked"){a.button("option","label","Удалить&nbsp;из&nbsp;моей&nbsp;библиотеки")}else{a.button("option","label","Добавить&nbsp;в&nbsp;мою&nbsp;библиотеку")}}}$(function(){new xsUserLibSequenceClick().Init()});function xsUserLibSequenceClick(){var a;this.Init=function(){var b=this;a=$("#UserLibSequenceClick");if(a.exists()){a.button();b.RefreshText();a.click(function(){var c=$(this).attr("SequenceId");$.ajax({type:"POST",url:"/UserLibSequenceButtonClick",data:({SequenceId:c}),success:function(d){var e=xsJsonParse(d);if(e.checked){a.attr("checked","checked")}else{a.removeAttr("checked")}b.RefreshText()},beforeSend:function(){}})})}},this.RefreshText=function(){var b=this;if(a.attr("checked")=="checked"){a.button("option","label","Удалить&nbsp;из&nbsp;моей&nbsp;библиотеки")}else{a.button("option","label","Добавить&nbsp;в&nbsp;мою&nbsp;библиотеку")}}}(function(X,l,n){var L=function(h){var j=function(e){function o(a,b){var c=j.defaults.columns,d=a.aoColumns.length,c=h.extend({},j.models.oColumn,c,{sSortingClass:a.oClasses.sSortable,sSortingClassJUI:a.oClasses.sSortJUI,nTh:b?b:l.createElement("th"),sTitle:c.sTitle?c.sTitle:b?b.innerHTML:"",aDataSort:c.aDataSort?c.aDataSort:[d],mData:c.mData?c.oDefaults:d});a.aoColumns.push(c);if(a.aoPreSearchCols[d]===n||null===a.aoPreSearchCols[d]){a.aoPreSearchCols[d]=h.extend({},j.models.oSearch)}else{if(c=a.aoPreSearchCols[d],c.bRegex===n&&(c.bRegex=!0),c.bSmart===n&&(c.bSmart=!0),c.bCaseInsensitive===n){c.bCaseInsensitive=!0}}m(a,d,null)}function m(a,b,c){var d=a.aoColumns[b];c!==n&&null!==c&&(c.mDataProp&&!c.mData&&(c.mData=c.mDataProp),c.sType!==n&&(d.sType=c.sType,d._bAutoType=!1),h.extend(d,c),p(d,c,"sWidth","sWidthOrig"),c.iDataSort!==n&&(d.aDataSort=[c.iDataSort]),p(d,c,"aDataSort"));var i=d.mRender?Q(d.mRender):null,f=Q(d.mData);d.fnGetData=function(a,b){var c=f(a,b);return d.mRender&&b&&""!==b?i(c,b,a):c};d.fnSetData=L(d.mData);a.oFeatures.bSort||(d.bSortable=!1);!d.bSortable||-1==h.inArray("asc",d.asSorting)&&-1==h.inArray("desc",d.asSorting)?(d.sSortingClass=a.oClasses.sSortableNone,d.sSortingClassJUI=""):-1==h.inArray("asc",d.asSorting)&&-1==h.inArray("desc",d.asSorting)?(d.sSortingClass=a.oClasses.sSortable,d.sSortingClassJUI=a.oClasses.sSortJUI):-1!=h.inArray("asc",d.asSorting)&&-1==h.inArray("desc",d.asSorting)?(d.sSortingClass=a.oClasses.sSortableAsc,d.sSortingClassJUI=a.oClasses.sSortJUIAscAllowed):-1==h.inArray("asc",d.asSorting)&&-1!=h.inArray("desc",d.asSorting)&&(d.sSortingClass=a.oClasses.sSortableDesc,d.sSortingClassJUI=a.oClasses.sSortJUIDescAllowed)}function k(a){if(!1===a.oFeatures.bAutoWidth){return !1}da(a);for(var b=0,c=a.aoColumns.length;b<c;b++){a.aoColumns[b].nTh.style.width=a.aoColumns[b].sWidth}}function G(a,b){var c=r(a,"bVisible");return"number"===typeof c[b]?c[b]:null}function R(a,b){var c=r(a,"bVisible"),c=h.inArray(b,c);return -1!==c?c:null}function t(a){return r(a,"bVisible").length}function r(a,b){var c=[];h.map(a.aoColumns,function(a,i){a[b]&&c.push(i)});return c}function B(a){for(var b=j.ext.aTypes,c=b.length,d=0;d<c;d++){var i=b[d](a);if(null!==i){return i}}return"string"}function u(a,b){for(var c=b.split(","),d=[],i=0,f=a.aoColumns.length;i<f;i++){for(var g=0;g<f;g++){if(a.aoColumns[i].sName==c[g]){d.push(g);break}}}return d}function M(a){for(var b="",c=0,d=a.aoColumns.length;c<d;c++){b+=a.aoColumns[c].sName+","}return b.length==d?"":b.slice(0,-1)}function ta(a,b,c,d){var i,f,g,e,w;if(b){for(i=b.length-1;0<=i;i--){var j=b[i].aTargets;h.isArray(j)||D(a,1,"aTargets must be an array of targets, not a "+typeof j);f=0;for(g=j.length;f<g;f++){if("number"===typeof j[f]&&0<=j[f]){for(;a.aoColumns.length<=j[f];){o(a)}d(j[f],b[i])}else{if("number"===typeof j[f]&&0>j[f]){d(a.aoColumns.length+j[f],b[i])}else{if("string"===typeof j[f]){e=0;for(w=a.aoColumns.length;e<w;e++){("_all"==j[f]||h(a.aoColumns[e].nTh).hasClass(j[f]))&&d(e,b[i])}}}}}}}if(c){i=0;for(a=c.length;i<a;i++){d(i,c[i])}}}function H(a,b){var c;c=h.isArray(b)?b.slice():h.extend(!0,{},b);var d=a.aoData.length,i=h.extend(!0,{},j.models.oRow);i._aData=c;a.aoData.push(i);for(var f,i=0,g=a.aoColumns.length;i<g;i++){c=a.aoColumns[i],"function"===typeof c.fnRender&&c.bUseRendered&&null!==c.mData?F(a,d,i,S(a,d,i)):F(a,d,i,v(a,d,i)),c._bAutoType&&"string"!=c.sType&&(f=v(a,d,i,"type"),null!==f&&""!==f&&(f=B(f),null===c.sType?c.sType=f:c.sType!=f&&"html"!=c.sType&&(c.sType="string")))}a.aiDisplayMaster.push(d);a.oFeatures.bDeferRender||ea(a,d);return d}function ua(a){var b,c,d,i,f,g,e;if(a.bDeferLoading||null===a.sAjaxSource){for(b=a.nTBody.firstChild;b;){if("TR"==b.nodeName.toUpperCase()){c=a.aoData.length;b._DT_RowIndex=c;a.aoData.push(h.extend(!0,{},j.models.oRow,{nTr:b}));a.aiDisplayMaster.push(c);f=b.firstChild;for(d=0;f;){g=f.nodeName.toUpperCase();if("TD"==g||"TH"==g){F(a,c,d,h.trim(f.innerHTML)),d++}f=f.nextSibling}}b=b.nextSibling}}i=T(a);d=[];b=0;for(c=i.length;b<c;b++){for(f=i[b].firstChild;f;){g=f.nodeName.toUpperCase(),("TD"==g||"TH"==g)&&d.push(f),f=f.nextSibling}}c=0;for(i=a.aoColumns.length;c<i;c++){e=a.aoColumns[c];null===e.sTitle&&(e.sTitle=e.nTh.innerHTML);var w=e._bAutoType,o="function"===typeof e.fnRender,k=null!==e.sClass,n=e.bVisible,m,p;if(w||o||k||!n){g=0;for(b=a.aoData.length;g<b;g++){f=a.aoData[g],m=d[g*i+c],w&&"string"!=e.sType&&(p=v(a,g,c,"type"),""!==p&&(p=B(p),null===e.sType?e.sType=p:e.sType!=p&&"html"!=e.sType&&(e.sType="string"))),e.mRender?m.innerHTML=v(a,g,c,"display"):e.mData!==c&&(m.innerHTML=v(a,g,c,"display")),o&&(p=S(a,g,c),m.innerHTML=p,e.bUseRendered&&F(a,g,c,p)),k&&(m.className+=" "+e.sClass),n?f._anHidden[c]=null:(f._anHidden[c]=m,m.parentNode.removeChild(m)),e.fnCreatedCell&&e.fnCreatedCell.call(a.oInstance,m,v(a,g,c,"display"),f._aData,g,c)}}}if(0!==a.aoRowCreatedCallback.length){b=0;for(c=a.aoData.length;b<c;b++){f=a.aoData[b],A(a,"aoRowCreatedCallback",null,[f.nTr,f._aData,b])}}}function I(a,b){return b._DT_RowIndex!==n?b._DT_RowIndex:null}function fa(a,b,c){for(var b=J(a,b),d=0,a=a.aoColumns.length;d<a;d++){if(b[d]===c){return d}}return -1}function Y(a,b,c,d){for(var i=[],f=0,g=d.length;f<g;f++){i.push(v(a,b,d[f],c))}return i}function v(a,b,c,d){var i=a.aoColumns[c];if((c=i.fnGetData(a.aoData[b]._aData,d))===n){return a.iDrawError!=a.iDraw&&null===i.sDefaultContent&&(D(a,0,"Requested unknown parameter "+("function"==typeof i.mData?"{mData function}":"'"+i.mData+"'")+" from the data source for row "+b),a.iDrawError=a.iDraw),i.sDefaultContent}if(null===c&&null!==i.sDefaultContent){c=i.sDefaultContent}else{if("function"===typeof c){return c()}}return"display"==d&&null===c?"":c}function F(a,b,c,d){a.aoColumns[c].fnSetData(a.aoData[b]._aData,d)}function Q(a){if(null===a){return function(){return null}}if("function"===typeof a){return function(b,d,i){return a(b,d,i)}}if("string"===typeof a&&(-1!==a.indexOf(".")||-1!==a.indexOf("["))){var b=function(a,d,i){var f=i.split("."),g;if(""!==i){var e=0;for(g=f.length;e<g;e++){if(i=f[e].match(U)){f[e]=f[e].replace(U,"");""!==f[e]&&(a=a[f[e]]);g=[];f.splice(0,e+1);for(var f=f.join("."),e=0,h=a.length;e<h;e++){g.push(b(a[e],d,f))}a=i[0].substring(1,i[0].length-1);a=""===a?g:g.join(a);break}if(null===a||a[f[e]]===n){return n}a=a[f[e]]}}return a};return function(c,d){return b(c,d,a)}}return function(b){return b[a]}}function L(a){if(null===a){return function(){}}if("function"===typeof a){return function(b,d){a(b,"set",d)}}if("string"===typeof a&&(-1!==a.indexOf(".")||-1!==a.indexOf("["))){var b=function(a,d,i){var i=i.split("."),f,g,e=0;for(g=i.length-1;e<g;e++){if(f=i[e].match(U)){i[e]=i[e].replace(U,"");a[i[e]]=[];f=i.slice();f.splice(0,e+1);g=f.join(".");for(var h=0,j=d.length;h<j;h++){f={},b(f,d[h],g),a[i[e]].push(f)}return}if(null===a[i[e]]||a[i[e]]===n){a[i[e]]={}}a=a[i[e]]}a[i[i.length-1].replace(U,"")]=d};return function(c,d){return b(c,d,a)}}return function(b,d){b[a]=d}}function Z(a){for(var b=[],c=a.aoData.length,d=0;d<c;d++){b.push(a.aoData[d]._aData)}return b}function ga(a){a.aoData.splice(0,a.aoData.length);a.aiDisplayMaster.splice(0,a.aiDisplayMaster.length);a.aiDisplay.splice(0,a.aiDisplay.length);y(a)}function ha(a,b){for(var c=-1,d=0,i=a.length;d<i;d++){a[d]==b?c=d:a[d]>b&&a[d]--}-1!=c&&a.splice(c,1)}function S(a,b,c){var d=a.aoColumns[c];return d.fnRender({iDataRow:b,iDataColumn:c,oSettings:a,aData:a.aoData[b]._aData,mDataProp:d.mData},v(a,b,c,"display"))}function ea(a,b){var c=a.aoData[b],d;if(null===c.nTr){c.nTr=l.createElement("tr");c.nTr._DT_RowIndex=b;c._aData.DT_RowId&&(c.nTr.id=c._aData.DT_RowId);c._aData.DT_RowClass&&(c.nTr.className=c._aData.DT_RowClass);for(var i=0,f=a.aoColumns.length;i<f;i++){var g=a.aoColumns[i];d=l.createElement(g.sCellType);d.innerHTML="function"===typeof g.fnRender&&(!g.bUseRendered||null===g.mData)?S(a,b,i):v(a,b,i,"display");null!==g.sClass&&(d.className=g.sClass);g.bVisible?(c.nTr.appendChild(d),c._anHidden[i]=null):c._anHidden[i]=d;g.fnCreatedCell&&g.fnCreatedCell.call(a.oInstance,d,v(a,b,i,"display"),c._aData,b,i)}A(a,"aoRowCreatedCallback",null,[c.nTr,c._aData,b])}}function va(a){var b,c,d;if(0!==h("th, td",a.nTHead).length){b=0;for(d=a.aoColumns.length;b<d;b++){if(c=a.aoColumns[b].nTh,c.setAttribute("role","columnheader"),a.aoColumns[b].bSortable&&(c.setAttribute("tabindex",a.iTabIndex),c.setAttribute("aria-controls",a.sTableId)),null!==a.aoColumns[b].sClass&&h(c).addClass(a.aoColumns[b].sClass),a.aoColumns[b].sTitle!=c.innerHTML){c.innerHTML=a.aoColumns[b].sTitle}}}else{var i=l.createElement("tr");b=0;for(d=a.aoColumns.length;b<d;b++){c=a.aoColumns[b].nTh,c.innerHTML=a.aoColumns[b].sTitle,c.setAttribute("tabindex","0"),null!==a.aoColumns[b].sClass&&h(c).addClass(a.aoColumns[b].sClass),i.appendChild(c)}h(a.nTHead).html("")[0].appendChild(i);V(a.aoHeader,a.nTHead)}h(a.nTHead).children("tr").attr("role","row");if(a.bJUI){b=0;for(d=a.aoColumns.length;b<d;b++){c=a.aoColumns[b].nTh;i=l.createElement("div");i.className=a.oClasses.sSortJUIWrapper;h(c).contents().appendTo(i);var f=l.createElement("span");f.className=a.oClasses.sSortIcon;i.appendChild(f);c.appendChild(i)}}if(a.oFeatures.bSort){for(b=0;b<a.aoColumns.length;b++){!1!==a.aoColumns[b].bSortable?ia(a,a.aoColumns[b].nTh,b):h(a.aoColumns[b].nTh).addClass(a.oClasses.sSortableNone)}}""!==a.oClasses.sFooterTH&&h(a.nTFoot).children("tr").children("th").addClass(a.oClasses.sFooterTH);if(null!==a.nTFoot){c=N(a,null,a.aoFooter);b=0;for(d=a.aoColumns.length;b<d;b++){c[b]&&(a.aoColumns[b].nTf=c[b],a.aoColumns[b].sClass&&h(c[b]).addClass(a.aoColumns[b].sClass))}}}function W(a,b,c){var d,i,f,g=[],e=[],h=a.aoColumns.length,j;c===n&&(c=!1);d=0;for(i=b.length;d<i;d++){g[d]=b[d].slice();g[d].nTr=b[d].nTr;for(f=h-1;0<=f;f--){!a.aoColumns[f].bVisible&&!c&&g[d].splice(f,1)}e.push([])}d=0;for(i=g.length;d<i;d++){if(a=g[d].nTr){for(;f=a.firstChild;){a.removeChild(f)}}f=0;for(b=g[d].length;f<b;f++){if(j=h=1,e[d][f]===n){a.appendChild(g[d][f].cell);for(e[d][f]=1;g[d+h]!==n&&g[d][f].cell==g[d+h][f].cell;){e[d+h][f]=1,h++}for(;g[d][f+j]!==n&&g[d][f].cell==g[d][f+j].cell;){for(c=0;c<h;c++){e[d+c][f+j]=1}j++}g[d][f].cell.rowSpan=h;g[d][f].cell.colSpan=j}}}}function x(a){var b=A(a,"aoPreDrawCallback","preDraw",[a]);if(-1!==h.inArray(!1,b)){E(a,!1)}else{var c,d,b=[],i=0,f=a.asStripeClasses.length;c=a.aoOpenRows.length;a.bDrawing=!0;a.iInitDisplayStart!==n&&-1!=a.iInitDisplayStart&&(a._iDisplayStart=a.oFeatures.bServerSide?a.iInitDisplayStart:a.iInitDisplayStart>=a.fnRecordsDisplay()?0:a.iInitDisplayStart,a.iInitDisplayStart=-1,y(a));if(a.bDeferLoading){a.bDeferLoading=!1,a.iDraw++}else{if(a.oFeatures.bServerSide){if(!a.bDestroying&&!wa(a)){return}}else{a.iDraw++}}if(0!==a.aiDisplay.length){var g=a._iDisplayStart;d=a._iDisplayEnd;a.oFeatures.bServerSide&&(g=0,d=a.aoData.length);for(;g<d;g++){var e=a.aoData[a.aiDisplay[g]];null===e.nTr&&ea(a,a.aiDisplay[g]);var j=e.nTr;if(0!==f){var o=a.asStripeClasses[i%f];e._sRowStripe!=o&&(h(j).removeClass(e._sRowStripe).addClass(o),e._sRowStripe=o)}A(a,"aoRowCallback",null,[j,a.aoData[a.aiDisplay[g]]._aData,i,g]);b.push(j);i++;if(0!==c){for(e=0;e<c;e++){if(j==a.aoOpenRows[e].nParent){b.push(a.aoOpenRows[e].nTr);break}}}}}else{b[0]=l.createElement("tr"),a.asStripeClasses[0]&&(b[0].className=a.asStripeClasses[0]),c=a.oLanguage,f=c.sZeroRecords,1==a.iDraw&&null!==a.sAjaxSource&&!a.oFeatures.bServerSide?f=c.sLoadingRecords:c.sEmptyTable&&0===a.fnRecordsTotal()&&(f=c.sEmptyTable),c=l.createElement("td"),c.setAttribute("valign","top"),c.colSpan=t(a),c.className=a.oClasses.sRowEmpty,c.innerHTML=ja(a,f),b[i].appendChild(c)}A(a,"aoHeaderCallback","header",[h(a.nTHead).children("tr")[0],Z(a),a._iDisplayStart,a.fnDisplayEnd(),a.aiDisplay]);A(a,"aoFooterCallback","footer",[h(a.nTFoot).children("tr")[0],Z(a),a._iDisplayStart,a.fnDisplayEnd(),a.aiDisplay]);i=l.createDocumentFragment();c=l.createDocumentFragment();if(a.nTBody){f=a.nTBody.parentNode;c.appendChild(a.nTBody);if(!a.oScroll.bInfinite||!a._bInitComplete||a.bSorted||a.bFiltered){for(;c=a.nTBody.firstChild;){a.nTBody.removeChild(c)}}c=0;for(d=b.length;c<d;c++){i.appendChild(b[c])}a.nTBody.appendChild(i);null!==f&&f.appendChild(a.nTBody)}A(a,"aoDrawCallback","draw",[a]);a.bSorted=!1;a.bFiltered=!1;a.bDrawing=!1;a.oFeatures.bServerSide&&(E(a,!1),a._bInitComplete||$(a))}}function aa(a){a.oFeatures.bSort?O(a,a.oPreviousSearch):a.oFeatures.bFilter?K(a,a.oPreviousSearch):(y(a),x(a))}function xa(a){var b=h("<div></div>")[0];a.nTable.parentNode.insertBefore(b,a.nTable);a.nTableWrapper=h('<div id="'+a.sTableId+'_wrapper" class="'+a.oClasses.sWrapper+'" role="grid"></div>')[0];a.nTableReinsertBefore=a.nTable.nextSibling;for(var c=a.nTableWrapper,d=a.sDom.split(""),i,f,g,e,w,o,k,m=0;m<d.length;m++){f=0;g=d[m];if("<"==g){e=h("<div></div>")[0];w=d[m+1];if("'"==w||'"'==w){o="";for(k=2;d[m+k]!=w;){o+=d[m+k],k++}"H"==o?o=a.oClasses.sJUIHeader:"F"==o&&(o=a.oClasses.sJUIFooter);-1!=o.indexOf(".")?(w=o.split("."),e.id=w[0].substr(1,w[0].length-1),e.className=w[1]):"#"==o.charAt(0)?e.id=o.substr(1,o.length-1):e.className=o;m+=k}c.appendChild(e);c=e}else{if(">"==g){c=c.parentNode}else{if("l"==g&&a.oFeatures.bPaginate&&a.oFeatures.bLengthChange){i=ya(a),f=1}else{if("f"==g&&a.oFeatures.bFilter){i=za(a),f=1}else{if("r"==g&&a.oFeatures.bProcessing){i=Aa(a),f=1}else{if("t"==g){i=Ba(a),f=1}else{if("i"==g&&a.oFeatures.bInfo){i=Ca(a),f=1}else{if("p"==g&&a.oFeatures.bPaginate){i=Da(a),f=1}else{if(0!==j.ext.aoFeatures.length){e=j.ext.aoFeatures;k=0;for(w=e.length;k<w;k++){if(g==e[k].cFeature){(i=e[k].fnInit(a))&&(f=1);break}}}}}}}}}}}1==f&&null!==i&&("object"!==typeof a.aanFeatures[g]&&(a.aanFeatures[g]=[]),a.aanFeatures[g].push(i),c.appendChild(i))}b.parentNode.replaceChild(a.nTableWrapper,b)}function V(a,b){var c=h(b).children("tr"),d,i,f,g,e,j,o,k,m,p;a.splice(0,a.length);f=0;for(j=c.length;f<j;f++){a.push([])}f=0;for(j=c.length;f<j;f++){d=c[f];for(i=d.firstChild;i;){if("TD"==i.nodeName.toUpperCase()||"TH"==i.nodeName.toUpperCase()){k=1*i.getAttribute("colspan");m=1*i.getAttribute("rowspan");k=!k||0===k||1===k?1:k;m=!m||0===m||1===m?1:m;g=0;for(e=a[f];e[g];){g++}o=g;p=1===k?!0:!1;for(e=0;e<k;e++){for(g=0;g<m;g++){a[f+g][o+e]={cell:i,unique:p},a[f+g].nTr=d}}}i=i.nextSibling}}}function N(a,b,c){var d=[];c||(c=a.aoHeader,b&&(c=[],V(c,b)));for(var b=0,i=c.length;b<i;b++){for(var f=0,g=c[b].length;f<g;f++){if(c[b][f].unique&&(!d[f]||!a.bSortCellsTop)){d[f]=c[b][f].cell}}}return d}function wa(a){if(a.bAjaxDataGet){a.iDraw++;E(a,!0);var b=Ea(a);ka(a,b);a.fnServerData.call(a.oInstance,a.sAjaxSource,b,function(b){Fa(a,b)},a);return !1}return !0}function Ea(a){var b=a.aoColumns.length,c=[],d,i,f,g;c.push({name:"sEcho",value:a.iDraw});c.push({name:"iColumns",value:b});c.push({name:"sColumns",value:M(a)});c.push({name:"iDisplayStart",value:a._iDisplayStart});c.push({name:"iDisplayLength",value:!1!==a.oFeatures.bPaginate?a._iDisplayLength:-1});for(f=0;f<b;f++){d=a.aoColumns[f].mData,c.push({name:"mDataProp_"+f,value:"function"===typeof d?"function":d})}if(!1!==a.oFeatures.bFilter){c.push({name:"sSearch",value:a.oPreviousSearch.sSearch});c.push({name:"bRegex",value:a.oPreviousSearch.bRegex});for(f=0;f<b;f++){c.push({name:"sSearch_"+f,value:a.aoPreSearchCols[f].sSearch}),c.push({name:"bRegex_"+f,value:a.aoPreSearchCols[f].bRegex}),c.push({name:"bSearchable_"+f,value:a.aoColumns[f].bSearchable})}}if(!1!==a.oFeatures.bSort){var e=0;d=null!==a.aaSortingFixed?a.aaSortingFixed.concat(a.aaSorting):a.aaSorting.slice();for(f=0;f<d.length;f++){i=a.aoColumns[d[f][0]].aDataSort;for(g=0;g<i.length;g++){c.push({name:"iSortCol_"+e,value:i[g]}),c.push({name:"sSortDir_"+e,value:d[f][1]}),e++}}c.push({name:"iSortingCols",value:e});for(f=0;f<b;f++){c.push({name:"bSortable_"+f,value:a.aoColumns[f].bSortable})}}return c}function ka(a,b){A(a,"aoServerParams","serverParams",[b])}function Fa(a,b){if(b.sEcho!==n){if(1*b.sEcho<a.iDraw){return}a.iDraw=1*b.sEcho}(!a.oScroll.bInfinite||a.oScroll.bInfinite&&(a.bSorted||a.bFiltered))&&ga(a);a._iRecordsTotal=parseInt(b.iTotalRecords,10);a._iRecordsDisplay=parseInt(b.iTotalDisplayRecords,10);var c=M(a),c=b.sColumns!==n&&""!==c&&b.sColumns!=c,d;c&&(d=u(a,b.sColumns));for(var i=Q(a.sAjaxDataProp)(b),f=0,g=i.length;f<g;f++){if(c){for(var e=[],h=0,j=a.aoColumns.length;h<j;h++){e.push(i[f][d[h]])}H(a,e)}else{H(a,i[f])}}a.aiDisplay=a.aiDisplayMaster.slice();a.bAjaxDataGet=!1;x(a);a.bAjaxDataGet=!0;E(a,!1)}function za(a){var b=a.oPreviousSearch,c=a.oLanguage.sSearch,c=-1!==c.indexOf("_INPUT_")?c.replace("_INPUT_",'<input type="text" />'):""===c?'<input type="text" />':c+' <input type="text" />',d=l.createElement("div");d.className=a.oClasses.sFilter;d.innerHTML="<label>"+c+"</label>";a.aanFeatures.f||(d.id=a.sTableId+"_filter");c=h('input[type="text"]',d);d._DT_Input=c[0];c.val(b.sSearch.replace('"',"&quot;"));c.bind("keyup.DT",function(){for(var c=a.aanFeatures.f,d=this.value===""?"":this.value,g=0,e=c.length;g<e;g++){c[g]!=h(this).parents("div.dataTables_filter")[0]&&h(c[g]._DT_Input).val(d)}d!=b.sSearch&&K(a,{sSearch:d,bRegex:b.bRegex,bSmart:b.bSmart,bCaseInsensitive:b.bCaseInsensitive})});c.attr("aria-controls",a.sTableId).bind("keypress.DT",function(a){if(a.keyCode==13){return false}});return d}function K(a,b,c){var d=a.oPreviousSearch,i=a.aoPreSearchCols,f=function(a){d.sSearch=a.sSearch;d.bRegex=a.bRegex;d.bSmart=a.bSmart;d.bCaseInsensitive=a.bCaseInsensitive};if(a.oFeatures.bServerSide){f(b)}else{Ga(a,b.sSearch,c,b.bRegex,b.bSmart,b.bCaseInsensitive);f(b);for(b=0;b<a.aoPreSearchCols.length;b++){Ha(a,i[b].sSearch,b,i[b].bRegex,i[b].bSmart,i[b].bCaseInsensitive)}Ia(a)}a.bFiltered=!0;h(a.oInstance).trigger("filter",a);a._iDisplayStart=0;y(a);x(a);la(a,0)}function Ia(a){for(var b=j.ext.afnFiltering,c=r(a,"bSearchable"),d=0,i=b.length;d<i;d++){for(var f=0,g=0,e=a.aiDisplay.length;g<e;g++){var h=a.aiDisplay[g-f];b[d](a,Y(a,h,"filter",c),h)||(a.aiDisplay.splice(g-f,1),f++)}}}function Ha(a,b,c,d,i,f){if(""!==b){for(var g=0,b=ma(b,d,i,f),d=a.aiDisplay.length-1;0<=d;d--){i=Ja(v(a,a.aiDisplay[d],c,"filter"),a.aoColumns[c].sType),b.test(i)||(a.aiDisplay.splice(d,1),g++)}}}function Ga(a,b,c,d,i,f){d=ma(b,d,i,f);i=a.oPreviousSearch;c||(c=0);0!==j.ext.afnFiltering.length&&(c=1);if(0>=b.length){a.aiDisplay.splice(0,a.aiDisplay.length),a.aiDisplay=a.aiDisplayMaster.slice()}else{if(a.aiDisplay.length==a.aiDisplayMaster.length||i.sSearch.length>b.length||1==c||0!==b.indexOf(i.sSearch)){a.aiDisplay.splice(0,a.aiDisplay.length);la(a,1);for(b=0;b<a.aiDisplayMaster.length;b++){d.test(a.asDataSearch[b])&&a.aiDisplay.push(a.aiDisplayMaster[b])}}else{for(b=c=0;b<a.asDataSearch.length;b++){d.test(a.asDataSearch[b])||(a.aiDisplay.splice(b-c,1),c++)}}}}function la(a,b){if(!a.oFeatures.bServerSide){a.asDataSearch=[];for(var c=r(a,"bSearchable"),d=1===b?a.aiDisplayMaster:a.aiDisplay,i=0,f=d.length;i<f;i++){a.asDataSearch[i]=na(a,Y(a,d[i],"filter",c))}}}function na(a,b){var c=b.join("  ");-1!==c.indexOf("&")&&(c=h("<div>").html(c).text());return c.replace(/[\n\r]/g," ")}function ma(a,b,c,d){if(c){return a=b?a.split(" "):oa(a).split(" "),a="^(?=.*?"+a.join(")(?=.*?")+").*$",RegExp(a,d?"i":"")}a=b?a:oa(a);return RegExp(a,d?"i":"")}function Ja(a,b){return"function"===typeof j.ext.ofnSearch[b]?j.ext.ofnSearch[b](a):null===a?"":"html"==b?a.replace(/[\r\n]/g," ").replace(/<.*?>/g,""):"string"===typeof a?a.replace(/[\r\n]/g," "):a}function oa(a){return a.replace(RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\|\\$|\\^|\\-)","g"),"\\$1")}function Ca(a){var b=l.createElement("div");b.className=a.oClasses.sInfo;a.aanFeatures.i||(a.aoDrawCallback.push({fn:Ka,sName:"information"}),b.id=a.sTableId+"_info");a.nTable.setAttribute("aria-describedby",a.sTableId+"_info");return b}function Ka(a){if(a.oFeatures.bInfo&&0!==a.aanFeatures.i.length){var b=a.oLanguage,c=a._iDisplayStart+1,d=a.fnDisplayEnd(),i=a.fnRecordsTotal(),f=a.fnRecordsDisplay(),g;g=0===f?b.sInfoEmpty:b.sInfo;f!=i&&(g+=" "+b.sInfoFiltered);g+=b.sInfoPostFix;g=ja(a,g);null!==b.fnInfoCallback&&(g=b.fnInfoCallback.call(a.oInstance,a,c,d,i,f,g));a=a.aanFeatures.i;b=0;for(c=a.length;b<c;b++){h(a[b]).html(g)}}}function ja(a,b){var c=a.fnFormatNumber(a._iDisplayStart+1),d=a.fnDisplayEnd(),d=a.fnFormatNumber(d),i=a.fnRecordsDisplay(),i=a.fnFormatNumber(i),f=a.fnRecordsTotal(),f=a.fnFormatNumber(f);a.oScroll.bInfinite&&(c=a.fnFormatNumber(1));return b.replace(/_START_/g,c).replace(/_END_/g,d).replace(/_TOTAL_/g,i).replace(/_MAX_/g,f)}function ba(a){var b,c,d=a.iInitDisplayStart;if(!1===a.bInitialised){setTimeout(function(){ba(a)},200)}else{xa(a);va(a);W(a,a.aoHeader);a.nTFoot&&W(a,a.aoFooter);E(a,!0);a.oFeatures.bAutoWidth&&da(a);b=0;for(c=a.aoColumns.length;b<c;b++){null!==a.aoColumns[b].sWidth&&(a.aoColumns[b].nTh.style.width=q(a.aoColumns[b].sWidth))}a.oFeatures.bSort?O(a):a.oFeatures.bFilter?K(a,a.oPreviousSearch):(a.aiDisplay=a.aiDisplayMaster.slice(),y(a),x(a));null!==a.sAjaxSource&&!a.oFeatures.bServerSide?(c=[],ka(a,c),a.fnServerData.call(a.oInstance,a.sAjaxSource,c,function(c){var f=a.sAjaxDataProp!==""?Q(a.sAjaxDataProp)(c):c;for(b=0;b<f.length;b++){H(a,f[b])}a.iInitDisplayStart=d;if(a.oFeatures.bSort){O(a)}else{a.aiDisplay=a.aiDisplayMaster.slice();y(a);x(a)}E(a,false);$(a,c)},a)):a.oFeatures.bServerSide||(E(a,!1),$(a))}}function $(a,b){a._bInitComplete=!0;A(a,"aoInitComplete","init",[a,b])}function pa(a){var b=j.defaults.oLanguage;!a.sEmptyTable&&(a.sZeroRecords&&"No data available in table"===b.sEmptyTable)&&p(a,a,"sZeroRecords","sEmptyTable");!a.sLoadingRecords&&(a.sZeroRecords&&"Loading..."===b.sLoadingRecords)&&p(a,a,"sZeroRecords","sLoadingRecords")}function ya(a){if(a.oScroll.bInfinite){return null}var b='<select size="1" '+('name="'+a.sTableId+'_length"')+">",c,d,i=a.aLengthMenu;if(2==i.length&&"object"===typeof i[0]&&"object"===typeof i[1]){c=0;for(d=i[0].length;c<d;c++){b+='<option value="'+i[0][c]+'">'+i[1][c]+"</option>"}}else{c=0;for(d=i.length;c<d;c++){b+='<option value="'+i[c]+'">'+i[c]+"</option>"}}b+="</select>";i=l.createElement("div");a.aanFeatures.l||(i.id=a.sTableId+"_length");i.className=a.oClasses.sLength;i.innerHTML="<label>"+a.oLanguage.sLengthMenu.replace("_MENU_",b)+"</label>";h('select option[value="'+a._iDisplayLength+'"]',i).attr("selected",!0);h("select",i).bind("change.DT",function(){var b=h(this).val(),i=a.aanFeatures.l;c=0;for(d=i.length;c<d;c++){i[c]!=this.parentNode&&h("select",i[c]).val(b)}a._iDisplayLength=parseInt(b,10);y(a);if(a.fnDisplayEnd()==a.fnRecordsDisplay()){a._iDisplayStart=a.fnDisplayEnd()-a._iDisplayLength;if(a._iDisplayStart<0){a._iDisplayStart=0}}if(a._iDisplayLength==-1){a._iDisplayStart=0}x(a)});h("select",i).attr("aria-controls",a.sTableId);return i}function y(a){a._iDisplayEnd=!1===a.oFeatures.bPaginate?a.aiDisplay.length:a._iDisplayStart+a._iDisplayLength>a.aiDisplay.length||-1==a._iDisplayLength?a.aiDisplay.length:a._iDisplayStart+a._iDisplayLength}function Da(a){if(a.oScroll.bInfinite){return null}var b=l.createElement("div");b.className=a.oClasses.sPaging+a.sPaginationType;j.ext.oPagination[a.sPaginationType].fnInit(a,b,function(a){y(a);x(a)});a.aanFeatures.p||a.aoDrawCallback.push({fn:function(a){j.ext.oPagination[a.sPaginationType].fnUpdate(a,function(a){y(a);x(a)})},sName:"pagination"});return b}function qa(a,b){var c=a._iDisplayStart;if("number"===typeof b){a._iDisplayStart=b*a._iDisplayLength,a._iDisplayStart>a.fnRecordsDisplay()&&(a._iDisplayStart=0)}else{if("first"==b){a._iDisplayStart=0}else{if("previous"==b){a._iDisplayStart=0<=a._iDisplayLength?a._iDisplayStart-a._iDisplayLength:0,0>a._iDisplayStart&&(a._iDisplayStart=0)}else{if("next"==b){0<=a._iDisplayLength?a._iDisplayStart+a._iDisplayLength<a.fnRecordsDisplay()&&(a._iDisplayStart+=a._iDisplayLength):a._iDisplayStart=0}else{if("last"==b){if(0<=a._iDisplayLength){var d=parseInt((a.fnRecordsDisplay()-1)/a._iDisplayLength,10)+1;a._iDisplayStart=(d-1)*a._iDisplayLength}else{a._iDisplayStart=0}}else{D(a,0,"Unknown paging action: "+b)}}}}}h(a.oInstance).trigger("page",a);return c!=a._iDisplayStart}function Aa(a){var b=l.createElement("div");a.aanFeatures.r||(b.id=a.sTableId+"_processing");b.innerHTML=a.oLanguage.sProcessing;b.className=a.oClasses.sProcessing;a.nTable.parentNode.insertBefore(b,a.nTable);return b}function E(a,b){if(a.oFeatures.bProcessing){for(var c=a.aanFeatures.r,d=0,i=c.length;d<i;d++){c[d].style.visibility=b?"visible":"hidden"}}h(a.oInstance).trigger("processing",[a,b])}function Ba(a){if(""===a.oScroll.sX&&""===a.oScroll.sY){return a.nTable}var b=l.createElement("div"),c=l.createElement("div"),d=l.createElement("div"),i=l.createElement("div"),f=l.createElement("div"),g=l.createElement("div"),e=a.nTable.cloneNode(!1),j=a.nTable.cloneNode(!1),o=a.nTable.getElementsByTagName("thead")[0],k=0===a.nTable.getElementsByTagName("tfoot").length?null:a.nTable.getElementsByTagName("tfoot")[0],m=a.oClasses;c.appendChild(d);f.appendChild(g);i.appendChild(a.nTable);b.appendChild(c);b.appendChild(i);d.appendChild(e);e.appendChild(o);null!==k&&(b.appendChild(f),g.appendChild(j),j.appendChild(k));b.className=m.sScrollWrapper;c.className=m.sScrollHead;d.className=m.sScrollHeadInner;i.className=m.sScrollBody;f.className=m.sScrollFoot;g.className=m.sScrollFootInner;a.oScroll.bAutoCss&&(c.style.overflow="hidden",c.style.position="relative",f.style.overflow="hidden",i.style.overflow="auto");c.style.border="0";c.style.width="100%";f.style.border="0";d.style.width=""!==a.oScroll.sXInner?a.oScroll.sXInner:"100%";e.removeAttribute("id");e.style.marginLeft="0";a.nTable.style.marginLeft="0";null!==k&&(j.removeAttribute("id"),j.style.marginLeft="0");d=h(a.nTable).children("caption");0<d.length&&(d=d[0],"top"===d._captionSide?e.appendChild(d):"bottom"===d._captionSide&&k&&j.appendChild(d));""!==a.oScroll.sX&&(c.style.width=q(a.oScroll.sX),i.style.width=q(a.oScroll.sX),null!==k&&(f.style.width=q(a.oScroll.sX)),h(i).scroll(function(){c.scrollLeft=this.scrollLeft;if(k!==null){f.scrollLeft=this.scrollLeft}}));""!==a.oScroll.sY&&(i.style.height=q(a.oScroll.sY));a.aoDrawCallback.push({fn:La,sName:"scrolling"});a.oScroll.bInfinite&&h(i).scroll(function(){if(!a.bDrawing&&h(this).scrollTop()!==0&&h(this).scrollTop()+h(this).height()>h(a.nTable).height()-a.oScroll.iLoadGap&&a.fnDisplayEnd()<a.fnRecordsDisplay()){qa(a,"next");y(a);x(a)}});a.nScrollHead=c;a.nScrollFoot=f;return b}function La(a){var b=a.nScrollHead.getElementsByTagName("div")[0],c=b.getElementsByTagName("table")[0],d=a.nTable.parentNode,i,f,g,e,j,o,k,m,p=[],n=[],l=null!==a.nTFoot?a.nScrollFoot.getElementsByTagName("div")[0]:null,R=null!==a.nTFoot?l.getElementsByTagName("table")[0]:null,r=a.oBrowser.bScrollOversize,s=function(a){k=a.style;k.paddingTop="0";k.paddingBottom="0";k.borderTopWidth="0";k.borderBottomWidth="0";k.height=0};h(a.nTable).children("thead, tfoot").remove();i=h(a.nTHead).clone()[0];a.nTable.insertBefore(i,a.nTable.childNodes[0]);g=a.nTHead.getElementsByTagName("tr");e=i.getElementsByTagName("tr");null!==a.nTFoot&&(j=h(a.nTFoot).clone()[0],a.nTable.insertBefore(j,a.nTable.childNodes[1]),o=a.nTFoot.getElementsByTagName("tr"),j=j.getElementsByTagName("tr"));""===a.oScroll.sX&&(d.style.width="100%",b.parentNode.style.width="100%");var t=N(a,i);i=0;for(f=t.length;i<f;i++){m=G(a,i),t[i].style.width=a.aoColumns[m].sWidth}null!==a.nTFoot&&C(function(a){a.style.width=""},j);a.oScroll.bCollapse&&""!==a.oScroll.sY&&(d.style.height=d.offsetHeight+a.nTHead.offsetHeight+"px");i=h(a.nTable).outerWidth();if(""===a.oScroll.sX){if(a.nTable.style.width="100%",r&&(h("tbody",d).height()>d.offsetHeight||"scroll"==h(d).css("overflow-y"))){a.nTable.style.width=q(h(a.nTable).outerWidth()-a.oScroll.iBarWidth)}}else{""!==a.oScroll.sXInner?a.nTable.style.width=q(a.oScroll.sXInner):i==h(d).width()&&h(d).height()<h(a.nTable).height()?(a.nTable.style.width=q(i-a.oScroll.iBarWidth),h(a.nTable).outerWidth()>i-a.oScroll.iBarWidth&&(a.nTable.style.width=q(i))):a.nTable.style.width=q(i)}i=h(a.nTable).outerWidth();C(s,e);C(function(a){p.push(q(h(a).width()))},e);C(function(a,b){a.style.width=p[b]},g);h(e).height(0);null!==a.nTFoot&&(C(s,j),C(function(a){n.push(q(h(a).width()))},j),C(function(a,b){a.style.width=n[b]},o),h(j).height(0));C(function(a,b){a.innerHTML="";a.style.width=p[b]},e);null!==a.nTFoot&&C(function(a,b){a.innerHTML="";a.style.width=n[b]},j);if(h(a.nTable).outerWidth()<i){g=d.scrollHeight>d.offsetHeight||"scroll"==h(d).css("overflow-y")?i+a.oScroll.iBarWidth:i;if(r&&(d.scrollHeight>d.offsetHeight||"scroll"==h(d).css("overflow-y"))){a.nTable.style.width=q(g-a.oScroll.iBarWidth)}d.style.width=q(g);a.nScrollHead.style.width=q(g);null!==a.nTFoot&&(a.nScrollFoot.style.width=q(g));""===a.oScroll.sX?D(a,1,"The table cannot fit into the current element which will cause column misalignment. The table has been drawn at its minimum possible width."):""!==a.oScroll.sXInner&&D(a,1,"The table cannot fit into the current element which will cause column misalignment. Increase the sScrollXInner value or remove it to allow automatic calculation")}else{d.style.width=q("100%"),a.nScrollHead.style.width=q("100%"),null!==a.nTFoot&&(a.nScrollFoot.style.width=q("100%"))}""===a.oScroll.sY&&r&&(d.style.height=q(a.nTable.offsetHeight+a.oScroll.iBarWidth));""!==a.oScroll.sY&&a.oScroll.bCollapse&&(d.style.height=q(a.oScroll.sY),r=""!==a.oScroll.sX&&a.nTable.offsetWidth>d.offsetWidth?a.oScroll.iBarWidth:0,a.nTable.offsetHeight<d.offsetHeight&&(d.style.height=q(a.nTable.offsetHeight+r)));r=h(a.nTable).outerWidth();c.style.width=q(r);b.style.width=q(r);c=h(a.nTable).height()>d.clientHeight||"scroll"==h(d).css("overflow-y");b.style.paddingRight=c?a.oScroll.iBarWidth+"px":"0px";null!==a.nTFoot&&(R.style.width=q(r),l.style.width=q(r),l.style.paddingRight=c?a.oScroll.iBarWidth+"px":"0px");h(d).scroll();if(a.bSorted||a.bFiltered){d.scrollTop=0}}function C(a,b,c){for(var d=0,i=0,f=b.length,g,e;i<f;){g=b[i].firstChild;for(e=c?c[i].firstChild:null;g;){1===g.nodeType&&(c?a(g,e,d):a(g,d),d++),g=g.nextSibling,e=c?e.nextSibling:null}i++}}function Ma(a,b){if(!a||null===a||""===a){return 0}b||(b=l.body);var c,d=l.createElement("div");d.style.width=q(a);b.appendChild(d);c=d.offsetWidth;b.removeChild(d);return c}function da(a){var b=0,c,d=0,i=a.aoColumns.length,f,e,j=h("th",a.nTHead),o=a.nTable.getAttribute("width");e=a.nTable.parentNode;for(f=0;f<i;f++){a.aoColumns[f].bVisible&&(d++,null!==a.aoColumns[f].sWidth&&(c=Ma(a.aoColumns[f].sWidthOrig,e),null!==c&&(a.aoColumns[f].sWidth=q(c)),b++))}if(i==j.length&&0===b&&d==i&&""===a.oScroll.sX&&""===a.oScroll.sY){for(f=0;f<a.aoColumns.length;f++){c=h(j[f]).width(),null!==c&&(a.aoColumns[f].sWidth=q(c))}}else{b=a.nTable.cloneNode(!1);f=a.nTHead.cloneNode(!0);d=l.createElement("tbody");c=l.createElement("tr");b.removeAttribute("id");b.appendChild(f);null!==a.nTFoot&&(b.appendChild(a.nTFoot.cloneNode(!0)),C(function(a){a.style.width=""},b.getElementsByTagName("tr")));b.appendChild(d);d.appendChild(c);d=h("thead th",b);0===d.length&&(d=h("tbody tr:eq(0)>td",b));j=N(a,f);for(f=d=0;f<i;f++){var k=a.aoColumns[f];k.bVisible&&null!==k.sWidthOrig&&""!==k.sWidthOrig?j[f-d].style.width=q(k.sWidthOrig):k.bVisible?j[f-d].style.width="":d++}for(f=0;f<i;f++){a.aoColumns[f].bVisible&&(d=Na(a,f),null!==d&&(d=d.cloneNode(!0),""!==a.aoColumns[f].sContentPadding&&(d.innerHTML+=a.aoColumns[f].sContentPadding),c.appendChild(d)))}e.appendChild(b);""!==a.oScroll.sX&&""!==a.oScroll.sXInner?b.style.width=q(a.oScroll.sXInner):""!==a.oScroll.sX?(b.style.width="",h(b).width()<e.offsetWidth&&(b.style.width=q(e.offsetWidth))):""!==a.oScroll.sY?b.style.width=q(e.offsetWidth):o&&(b.style.width=q(o));b.style.visibility="hidden";Oa(a,b);i=h("tbody tr:eq(0)",b).children();0===i.length&&(i=N(a,h("thead",b)[0]));if(""!==a.oScroll.sX){for(f=d=e=0;f<a.aoColumns.length;f++){a.aoColumns[f].bVisible&&(e=null===a.aoColumns[f].sWidthOrig?e+h(i[d]).outerWidth():e+(parseInt(a.aoColumns[f].sWidth.replace("px",""),10)+(h(i[d]).outerWidth()-h(i[d]).width())),d++)}b.style.width=q(e);a.nTable.style.width=q(e)}for(f=d=0;f<a.aoColumns.length;f++){a.aoColumns[f].bVisible&&(e=h(i[d]).width(),null!==e&&0<e&&(a.aoColumns[f].sWidth=q(e)),d++)}i=h(b).css("width");a.nTable.style.width=-1!==i.indexOf("%")?i:q(h(b).outerWidth());b.parentNode.removeChild(b)}o&&(a.nTable.style.width=q(o))}function Oa(a,b){""===a.oScroll.sX&&""!==a.oScroll.sY?(h(b).width(),b.style.width=q(h(b).outerWidth()-a.oScroll.iBarWidth)):""!==a.oScroll.sX&&(b.style.width=q(h(b).outerWidth()))}function Na(a,b){var c=Pa(a,b);if(0>c){return null}if(null===a.aoData[c].nTr){var d=l.createElement("td");d.innerHTML=v(a,c,b,"");return d}return J(a,c)[b]}function Pa(a,b){for(var c=-1,d=-1,i=0;i<a.aoData.length;i++){var e=v(a,i,b,"display")+"",e=e.replace(/<.*?>/g,"");e.length>c&&(c=e.length,d=i)}return d}function q(a){if(null===a){return"0px"}if("number"==typeof a){return 0>a?"0px":a+"px"}var b=a.charCodeAt(a.length-1);return 48>b||57<b?a:a+"px"}function Qa(){var a=l.createElement("p"),b=a.style;b.width="100%";b.height="200px";b.padding="0px";var c=l.createElement("div"),b=c.style;b.position="absolute";b.top="0px";b.left="0px";b.visibility="hidden";b.width="200px";b.height="150px";b.padding="0px";b.overflow="hidden";c.appendChild(a);l.body.appendChild(c);b=a.offsetWidth;c.style.overflow="scroll";a=a.offsetWidth;b==a&&(a=c.clientWidth);l.body.removeChild(c);return b-a}function O(a,b){var c,d,i,e,g,k,o=[],m=[],p=j.ext.oSort,l=a.aoData,q=a.aoColumns,G=a.oLanguage.oAria;if(!a.oFeatures.bServerSide&&(0!==a.aaSorting.length||null!==a.aaSortingFixed)){o=null!==a.aaSortingFixed?a.aaSortingFixed.concat(a.aaSorting):a.aaSorting.slice();for(c=0;c<o.length;c++){if(d=o[c][0],i=R(a,d),e=a.aoColumns[d].sSortDataType,j.ext.afnSortData[e]){if(g=j.ext.afnSortData[e].call(a.oInstance,a,d,i),g.length===l.length){i=0;for(e=l.length;i<e;i++){F(a,i,d,g[i])}}else{D(a,0,"Returned data sort array (col "+d+") is the wrong length")}}}c=0;for(d=a.aiDisplayMaster.length;c<d;c++){m[a.aiDisplayMaster[c]]=c}var r=o.length,s;c=0;for(d=l.length;c<d;c++){for(i=0;i<r;i++){s=q[o[i][0]].aDataSort;g=0;for(k=s.length;g<k;g++){e=q[s[g]].sType,e=p[(e?e:"string")+"-pre"],l[c]._aSortData[s[g]]=e?e(v(a,c,s[g],"sort")):v(a,c,s[g],"sort")}}}a.aiDisplayMaster.sort(function(a,b){var c,d,e,i,f;for(c=0;c<r;c++){f=q[o[c][0]].aDataSort;d=0;for(e=f.length;d<e;d++){if(i=q[f[d]].sType,i=p[(i?i:"string")+"-"+o[c][1]](l[a]._aSortData[f[d]],l[b]._aSortData[f[d]]),0!==i){return i}}}return p["numeric-asc"](m[a],m[b])})}(b===n||b)&&!a.oFeatures.bDeferRender&&P(a);c=0;for(d=a.aoColumns.length;c<d;c++){e=q[c].sTitle.replace(/<.*?>/g,""),i=q[c].nTh,i.removeAttribute("aria-sort"),i.removeAttribute("aria-label"),q[c].bSortable?0<o.length&&o[0][0]==c?(i.setAttribute("aria-sort","asc"==o[0][1]?"ascending":"descending"),i.setAttribute("aria-label",e+("asc"==(q[c].asSorting[o[0][2]+1]?q[c].asSorting[o[0][2]+1]:q[c].asSorting[0])?G.sSortAscending:G.sSortDescending))):i.setAttribute("aria-label",e+("asc"==q[c].asSorting[0]?G.sSortAscending:G.sSortDescending)):i.setAttribute("aria-label",e)}a.bSorted=!0;h(a.oInstance).trigger("sort",a);a.oFeatures.bFilter?K(a,a.oPreviousSearch,1):(a.aiDisplay=a.aiDisplayMaster.slice(),a._iDisplayStart=0,y(a),x(a))}function ia(a,b,c,d){Ra(b,{},function(b){if(!1!==a.aoColumns[c].bSortable){var e=function(){var d,e;if(b.shiftKey){for(var f=!1,h=0;h<a.aaSorting.length;h++){if(a.aaSorting[h][0]==c){f=!0;d=a.aaSorting[h][0];e=a.aaSorting[h][2]+1;a.aoColumns[d].asSorting[e]?(a.aaSorting[h][1]=a.aoColumns[d].asSorting[e],a.aaSorting[h][2]=e):a.aaSorting.splice(h,1);break}}!1===f&&a.aaSorting.push([c,a.aoColumns[c].asSorting[0],0])}else{1==a.aaSorting.length&&a.aaSorting[0][0]==c?(d=a.aaSorting[0][0],e=a.aaSorting[0][2]+1,a.aoColumns[d].asSorting[e]||(e=0),a.aaSorting[0][1]=a.aoColumns[d].asSorting[e],a.aaSorting[0][2]=e):(a.aaSorting.splice(0,a.aaSorting.length),a.aaSorting.push([c,a.aoColumns[c].asSorting[0],0]))}O(a)};a.oFeatures.bProcessing?(E(a,!0),setTimeout(function(){e();a.oFeatures.bServerSide||E(a,!1)},0)):e();"function"==typeof d&&d(a)}})}function P(a){var b,c,d,e,f,g=a.aoColumns.length,j=a.oClasses;for(b=0;b<g;b++){a.aoColumns[b].bSortable&&h(a.aoColumns[b].nTh).removeClass(j.sSortAsc+" "+j.sSortDesc+" "+a.aoColumns[b].sSortingClass)}c=null!==a.aaSortingFixed?a.aaSortingFixed.concat(a.aaSorting):a.aaSorting.slice();for(b=0;b<a.aoColumns.length;b++){if(a.aoColumns[b].bSortable){f=a.aoColumns[b].sSortingClass;e=-1;for(d=0;d<c.length;d++){if(c[d][0]==b){f="asc"==c[d][1]?j.sSortAsc:j.sSortDesc;e=d;break}}h(a.aoColumns[b].nTh).addClass(f);a.bJUI&&(f=h("span."+j.sSortIcon,a.aoColumns[b].nTh),f.removeClass(j.sSortJUIAsc+" "+j.sSortJUIDesc+" "+j.sSortJUI+" "+j.sSortJUIAscAllowed+" "+j.sSortJUIDescAllowed),f.addClass(-1==e?a.aoColumns[b].sSortingClassJUI:"asc"==c[e][1]?j.sSortJUIAsc:j.sSortJUIDesc))}else{h(a.aoColumns[b].nTh).addClass(a.aoColumns[b].sSortingClass)}}f=j.sSortColumn;if(a.oFeatures.bSort&&a.oFeatures.bSortClasses){a=J(a);e=[];for(b=0;b<g;b++){e.push("")}b=0;for(d=1;b<c.length;b++){j=parseInt(c[b][0],10),e[j]=f+d,3>d&&d++}f=RegExp(f+"[123]");var o;b=0;for(c=a.length;b<c;b++){j=b%g,d=a[b].className,o=e[j],j=d.replace(f,o),j!=d?a[b].className=h.trim(j):0<o.length&&-1==d.indexOf(o)&&(a[b].className=d+" "+o)}}}function ra(a){if(a.oFeatures.bStateSave&&!a.bDestroying){var b,c;b=a.oScroll.bInfinite;var d={iCreate:(new Date).getTime(),iStart:b?0:a._iDisplayStart,iEnd:b?a._iDisplayLength:a._iDisplayEnd,iLength:a._iDisplayLength,aaSorting:h.extend(!0,[],a.aaSorting),oSearch:h.extend(!0,{},a.oPreviousSearch),aoSearchCols:h.extend(!0,[],a.aoPreSearchCols),abVisCols:[]};b=0;for(c=a.aoColumns.length;b<c;b++){d.abVisCols.push(a.aoColumns[b].bVisible)}A(a,"aoStateSaveParams","stateSaveParams",[a,d]);a.fnStateSave.call(a.oInstance,a,d)}}function Sa(a,b){if(a.oFeatures.bStateSave){var c=a.fnStateLoad.call(a.oInstance,a);if(c){var d=A(a,"aoStateLoadParams","stateLoadParams",[a,c]);if(-1===h.inArray(!1,d)){a.oLoadedState=h.extend(!0,{},c);a._iDisplayStart=c.iStart;a.iInitDisplayStart=c.iStart;a._iDisplayEnd=c.iEnd;a._iDisplayLength=c.iLength;a.aaSorting=c.aaSorting.slice();a.saved_aaSorting=c.aaSorting.slice();h.extend(a.oPreviousSearch,c.oSearch);h.extend(!0,a.aoPreSearchCols,c.aoSearchCols);b.saved_aoColumns=[];for(d=0;d<c.abVisCols.length;d++){b.saved_aoColumns[d]={},b.saved_aoColumns[d].bVisible=c.abVisCols[d]}A(a,"aoStateLoaded","stateLoaded",[a,c])}}}}function s(a){for(var b=0;b<j.settings.length;b++){if(j.settings[b].nTable===a){return j.settings[b]}}return null}function T(a){for(var b=[],a=a.aoData,c=0,d=a.length;c<d;c++){null!==a[c].nTr&&b.push(a[c].nTr)}return b}function J(a,b){var c=[],d,e,f,g,h,j;e=0;var o=a.aoData.length;b!==n&&(e=b,o=b+1);for(f=e;f<o;f++){if(j=a.aoData[f],null!==j.nTr){e=[];for(d=j.nTr.firstChild;d;){g=d.nodeName.toLowerCase(),("td"==g||"th"==g)&&e.push(d),d=d.nextSibling}g=d=0;for(h=a.aoColumns.length;g<h;g++){a.aoColumns[g].bVisible?c.push(e[g-d]):(c.push(j._anHidden[g]),d++)}}}return c}function D(a,b,c){a=null===a?"DataTables warning: "+c:"DataTables warning (table id = '"+a.sTableId+"'): "+c;if(0===b){if("alert"==j.ext.sErrMode){alert(a)}else{throw Error(a)}}else{X.console&&console.log&&console.log(a)}}function p(a,b,c,d){d===n&&(d=c);b[c]!==n&&(a[d]=b[c])}function Ta(a,b){var c,d;for(d in b){b.hasOwnProperty(d)&&(c=b[d],"object"===typeof e[d]&&null!==c&&!1===h.isArray(c)?h.extend(!0,a[d],c):a[d]=c)}return a}function Ra(a,b,c){h(a).bind("click.DT",b,function(b){a.blur();c(b)}).bind("keypress.DT",b,function(a){13===a.which&&c(a)}).bind("selectstart.DT",function(){return !1})}function z(a,b,c,d){c&&a[b].push({fn:c,sName:d})}function A(a,b,c,d){for(var b=a[b],e=[],f=b.length-1;0<=f;f--){e.push(b[f].fn.apply(a.oInstance,d))}null!==c&&h(a.oInstance).trigger(c,d);return e}function Ua(a){var b=h('<div style="position:absolute; top:0; left:0; height:1px; width:1px; overflow:hidden"><div style="position:absolute; top:1px; left:1px; width:100px; overflow:scroll;"><div id="DT_BrowserTest" style="width:100%; height:10px;"></div></div></div>')[0];l.body.appendChild(b);a.oBrowser.bScrollOversize=100===h("#DT_BrowserTest",b)[0].offsetWidth?!0:!1;l.body.removeChild(b)}function Va(a){return function(){var b=[s(this[j.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));return j.ext.oApi[a].apply(this,b)}}var U=/\[.*?\]$/,Wa=X.JSON?JSON.stringify:function(a){var b=typeof a;if("object"!==b||null===a){return"string"===b&&(a='"'+a+'"'),a+""}var c,d,e=[],f=h.isArray(a);for(c in a){d=a[c],b=typeof d,"string"===b?d='"'+d+'"':"object"===b&&null!==d&&(d=Wa(d)),e.push((f?"":'"'+c+'":')+d)}return(f?"[":"{")+e+(f?"]":"}")};this.$=function(a,b){var c,d,e=[],f;d=s(this[j.ext.iApiIndex]);var g=d.aoData,o=d.aiDisplay,k=d.aiDisplayMaster;b||(b={});b=h.extend({},{filter:"none",order:"current",page:"all"},b);if("current"==b.page){c=d._iDisplayStart;for(d=d.fnDisplayEnd();c<d;c++){(f=g[o[c]].nTr)&&e.push(f)}}else{if("current"==b.order&&"none"==b.filter){c=0;for(d=k.length;c<d;c++){(f=g[k[c]].nTr)&&e.push(f)}}else{if("current"==b.order&&"applied"==b.filter){c=0;for(d=o.length;c<d;c++){(f=g[o[c]].nTr)&&e.push(f)}}else{if("original"==b.order&&"none"==b.filter){c=0;for(d=g.length;c<d;c++){(f=g[c].nTr)&&e.push(f)}}else{if("original"==b.order&&"applied"==b.filter){c=0;for(d=g.length;c<d;c++){f=g[c].nTr,-1!==h.inArray(c,o)&&f&&e.push(f)}}else{D(d,1,"Unknown selection options")}}}}}e=h(e);c=e.filter(a);e=e.find(a);return h([].concat(h.makeArray(c),h.makeArray(e)))};this._=function(a,b){var c=[],d,e,f=this.$(a,b);d=0;for(e=f.length;d<e;d++){c.push(this.fnGetData(f[d]))}return c};this.fnAddData=function(a,b){if(0===a.length){return[]}var c=[],d,e=s(this[j.ext.iApiIndex]);if("object"===typeof a[0]&&null!==a[0]){for(var f=0;f<a.length;f++){d=H(e,a[f]);if(-1==d){return c}c.push(d)}}else{d=H(e,a);if(-1==d){return c}c.push(d)}e.aiDisplay=e.aiDisplayMaster.slice();(b===n||b)&&aa(e);return c};this.fnAdjustColumnSizing=function(a){var b=s(this[j.ext.iApiIndex]);k(b);a===n||a?this.fnDraw(!1):(""!==b.oScroll.sX||""!==b.oScroll.sY)&&this.oApi._fnScrollDraw(b)};this.fnClearTable=function(a){var b=s(this[j.ext.iApiIndex]);ga(b);(a===n||a)&&x(b)};this.fnClose=function(a){for(var b=s(this[j.ext.iApiIndex]),c=0;c<b.aoOpenRows.length;c++){if(b.aoOpenRows[c].nParent==a){return(a=b.aoOpenRows[c].nTr.parentNode)&&a.removeChild(b.aoOpenRows[c].nTr),b.aoOpenRows.splice(c,1),0}}return 1};this.fnDeleteRow=function(a,b,c){var d=s(this[j.ext.iApiIndex]),e,f,a="object"===typeof a?I(d,a):a,g=d.aoData.splice(a,1);e=0;for(f=d.aoData.length;e<f;e++){null!==d.aoData[e].nTr&&(d.aoData[e].nTr._DT_RowIndex=e)}e=h.inArray(a,d.aiDisplay);d.asDataSearch.splice(e,1);ha(d.aiDisplayMaster,a);ha(d.aiDisplay,a);"function"===typeof b&&b.call(this,d,g);d._iDisplayStart>=d.fnRecordsDisplay()&&(d._iDisplayStart-=d._iDisplayLength,0>d._iDisplayStart&&(d._iDisplayStart=0));if(c===n||c){y(d),x(d)}return g};this.fnDestroy=function(a){var b=s(this[j.ext.iApiIndex]),c=b.nTableWrapper.parentNode,d=b.nTBody,i,f,a=a===n?!1:a;b.bDestroying=!0;A(b,"aoDestroyCallback","destroy",[b]);if(!a){i=0;for(f=b.aoColumns.length;i<f;i++){!1===b.aoColumns[i].bVisible&&this.fnSetColumnVis(i,!0)}}h(b.nTableWrapper).find("*").andSelf().unbind(".DT");h("tbody>tr>td."+b.oClasses.sRowEmpty,b.nTable).parent().remove();b.nTable!=b.nTHead.parentNode&&(h(b.nTable).children("thead").remove(),b.nTable.appendChild(b.nTHead));b.nTFoot&&b.nTable!=b.nTFoot.parentNode&&(h(b.nTable).children("tfoot").remove(),b.nTable.appendChild(b.nTFoot));b.nTable.parentNode.removeChild(b.nTable);h(b.nTableWrapper).remove();b.aaSorting=[];b.aaSortingFixed=[];P(b);h(T(b)).removeClass(b.asStripeClasses.join(" "));h("th, td",b.nTHead).removeClass([b.oClasses.sSortable,b.oClasses.sSortableAsc,b.oClasses.sSortableDesc,b.oClasses.sSortableNone].join(" "));b.bJUI&&(h("th span."+b.oClasses.sSortIcon+", td span."+b.oClasses.sSortIcon,b.nTHead).remove(),h("th, td",b.nTHead).each(function(){var a=h("div."+b.oClasses.sSortJUIWrapper,this),c=a.contents();h(this).append(c);a.remove()}));!a&&b.nTableReinsertBefore?c.insertBefore(b.nTable,b.nTableReinsertBefore):a||c.appendChild(b.nTable);i=0;for(f=b.aoData.length;i<f;i++){null!==b.aoData[i].nTr&&d.appendChild(b.aoData[i].nTr)}!0===b.oFeatures.bAutoWidth&&(b.nTable.style.width=q(b.sDestroyWidth));if(f=b.asDestroyStripes.length){a=h(d).children("tr");for(i=0;i<f;i++){a.filter(":nth-child("+f+"n + "+i+")").addClass(b.asDestroyStripes[i])}}i=0;for(f=j.settings.length;i<f;i++){j.settings[i]==b&&j.settings.splice(i,1)}e=b=null};this.fnDraw=function(a){var b=s(this[j.ext.iApiIndex]);!1===a?(y(b),x(b)):aa(b)};this.fnFilter=function(a,b,c,d,e,f){var g=s(this[j.ext.iApiIndex]);if(g.oFeatures.bFilter){if(c===n||null===c){c=!1}if(d===n||null===d){d=!0}if(e===n||null===e){e=!0}if(f===n||null===f){f=!0}if(b===n||null===b){if(K(g,{sSearch:a+"",bRegex:c,bSmart:d,bCaseInsensitive:f},1),e&&g.aanFeatures.f){b=g.aanFeatures.f;c=0;for(d=b.length;c<d;c++){try{b[c]._DT_Input!=l.activeElement&&h(b[c]._DT_Input).val(a)}catch(o){h(b[c]._DT_Input).val(a)}}}}else{h.extend(g.aoPreSearchCols[b],{sSearch:a+"",bRegex:c,bSmart:d,bCaseInsensitive:f}),K(g,g.oPreviousSearch,1)}}};this.fnGetData=function(a,b){var c=s(this[j.ext.iApiIndex]);if(a!==n){var d=a;if("object"===typeof a){var e=a.nodeName.toLowerCase();"tr"===e?d=I(c,a):"td"===e&&(d=I(c,a.parentNode),b=fa(c,d,a))}return b!==n?v(c,d,b,""):c.aoData[d]!==n?c.aoData[d]._aData:null}return Z(c)};this.fnGetNodes=function(a){var b=s(this[j.ext.iApiIndex]);return a!==n?b.aoData[a]!==n?b.aoData[a].nTr:null:T(b)};this.fnGetPosition=function(a){var b=s(this[j.ext.iApiIndex]),c=a.nodeName.toUpperCase();return"TR"==c?I(b,a):"TD"==c||"TH"==c?(c=I(b,a.parentNode),a=fa(b,c,a),[c,R(b,a),a]):null};this.fnIsOpen=function(a){for(var b=s(this[j.ext.iApiIndex]),c=0;c<b.aoOpenRows.length;c++){if(b.aoOpenRows[c].nParent==a){return !0}}return !1};this.fnOpen=function(a,b,c){var d=s(this[j.ext.iApiIndex]),e=T(d);if(-1!==h.inArray(a,e)){this.fnClose(a);var e=l.createElement("tr"),f=l.createElement("td");e.appendChild(f);f.className=c;f.colSpan=t(d);"string"===typeof b?f.innerHTML=b:h(f).html(b);b=h("tr",d.nTBody);-1!=h.inArray(a,b)&&h(e).insertAfter(a);d.aoOpenRows.push({nTr:e,nParent:a});return e}};this.fnPageChange=function(a,b){var c=s(this[j.ext.iApiIndex]);qa(c,a);y(c);(b===n||b)&&x(c)};this.fnSetColumnVis=function(a,b,c){var d=s(this[j.ext.iApiIndex]),e,f,g=d.aoColumns,h=d.aoData,o,m;if(g[a].bVisible!=b){if(b){for(e=f=0;e<a;e++){g[e].bVisible&&f++}m=f>=t(d);if(!m){for(e=a;e<g.length;e++){if(g[e].bVisible){o=e;break}}}e=0;for(f=h.length;e<f;e++){null!==h[e].nTr&&(m?h[e].nTr.appendChild(h[e]._anHidden[a]):h[e].nTr.insertBefore(h[e]._anHidden[a],J(d,e)[o]))}}else{e=0;for(f=h.length;e<f;e++){null!==h[e].nTr&&(o=J(d,e)[a],h[e]._anHidden[a]=o,o.parentNode.removeChild(o))}}g[a].bVisible=b;W(d,d.aoHeader);d.nTFoot&&W(d,d.aoFooter);e=0;for(f=d.aoOpenRows.length;e<f;e++){d.aoOpenRows[e].nTr.colSpan=t(d)}if(c===n||c){k(d),x(d)}ra(d)}};this.fnSettings=function(){return s(this[j.ext.iApiIndex])};this.fnSort=function(a){var b=s(this[j.ext.iApiIndex]);b.aaSorting=a;O(b)};this.fnSortListener=function(a,b,c){ia(s(this[j.ext.iApiIndex]),a,b,c)};this.fnUpdate=function(a,b,c,d,e){var f=s(this[j.ext.iApiIndex]),b="object"===typeof b?I(f,b):b;if(h.isArray(a)&&c===n){f.aoData[b]._aData=a.slice();for(c=0;c<f.aoColumns.length;c++){this.fnUpdate(v(f,b,c),b,c,!1,!1)}}else{if(h.isPlainObject(a)&&c===n){f.aoData[b]._aData=h.extend(!0,{},a);for(c=0;c<f.aoColumns.length;c++){this.fnUpdate(v(f,b,c),b,c,!1,!1)}}else{F(f,b,c,a);var a=v(f,b,c,"display"),g=f.aoColumns[c];null!==g.fnRender&&(a=S(f,b,c),g.bUseRendered&&F(f,b,c,a));null!==f.aoData[b].nTr&&(J(f,b)[c].innerHTML=a)}}c=h.inArray(b,f.aiDisplay);f.asDataSearch[c]=na(f,Y(f,b,"filter",r(f,"bSearchable")));(e===n||e)&&k(f);(d===n||d)&&aa(f);return 0};this.fnVersionCheck=j.ext.fnVersionCheck;this.oApi={_fnExternApiFunc:Va,_fnInitialise:ba,_fnInitComplete:$,_fnLanguageCompat:pa,_fnAddColumn:o,_fnColumnOptions:m,_fnAddData:H,_fnCreateTr:ea,_fnGatherData:ua,_fnBuildHead:va,_fnDrawHead:W,_fnDraw:x,_fnReDraw:aa,_fnAjaxUpdate:wa,_fnAjaxParameters:Ea,_fnAjaxUpdateDraw:Fa,_fnServerParams:ka,_fnAddOptionsHtml:xa,_fnFeatureHtmlTable:Ba,_fnScrollDraw:La,_fnAdjustColumnSizing:k,_fnFeatureHtmlFilter:za,_fnFilterComplete:K,_fnFilterCustom:Ia,_fnFilterColumn:Ha,_fnFilter:Ga,_fnBuildSearchArray:la,_fnBuildSearchRow:na,_fnFilterCreateSearch:ma,_fnDataToSearch:Ja,_fnSort:O,_fnSortAttachListener:ia,_fnSortingClasses:P,_fnFeatureHtmlPaginate:Da,_fnPageChange:qa,_fnFeatureHtmlInfo:Ca,_fnUpdateInfo:Ka,_fnFeatureHtmlLength:ya,_fnFeatureHtmlProcessing:Aa,_fnProcessingDisplay:E,_fnVisibleToColumnIndex:G,_fnColumnIndexToVisible:R,_fnNodeToDataIndex:I,_fnVisbleColumns:t,_fnCalculateEnd:y,_fnConvertToWidth:Ma,_fnCalculateColumnWidths:da,_fnScrollingWidthAdjust:Oa,_fnGetWidestNode:Na,_fnGetMaxLenString:Pa,_fnStringToCss:q,_fnDetectType:B,_fnSettingsFromNode:s,_fnGetDataMaster:Z,_fnGetTrNodes:T,_fnGetTdNodes:J,_fnEscapeRegex:oa,_fnDeleteIndex:ha,_fnReOrderIndex:u,_fnColumnOrdering:M,_fnLog:D,_fnClearTable:ga,_fnSaveState:ra,_fnLoadState:Sa,_fnCreateCookie:function(a,b,c,d,e){var f=new Date;f.setTime(f.getTime()+1000*c);var c=X.location.pathname.split("/"),a=a+"_"+c.pop().replace(/[\/:]/g,"").toLowerCase(),g;null!==e?(g="function"===typeof h.parseJSON?h.parseJSON(b):eval("("+b+")"),b=e(a,g,f.toGMTString(),c.join("/")+"/")):b=a+"="+encodeURIComponent(b)+"; expires="+f.toGMTString()+"; path="+c.join("/")+"/";a=l.cookie.split(";");e=b.split(";")[0].length;f=[];if(4096<e+l.cookie.length+10){for(var j=0,o=a.length;j<o;j++){if(-1!=a[j].indexOf(d)){var k=a[j].split("=");try{(g=eval("("+decodeURIComponent(k[1])+")"))&&g.iCreate&&f.push({name:k[0],time:g.iCreate})}catch(m){}}}for(f.sort(function(a,b){return b.time-a.time});4096<e+l.cookie.length+10;){if(0===f.length){return}d=f.pop();l.cookie=d.name+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT; path="+c.join("/")+"/"}}l.cookie=b},_fnReadCookie:function(a){for(var b=X.location.pathname.split("/"),a=a+"_"+b[b.length-1].replace(/[\/:]/g,"").toLowerCase()+"=",b=l.cookie.split(";"),c=0;c<b.length;c++){for(var d=b[c];" "==d.charAt(0);){d=d.substring(1,d.length)}if(0===d.indexOf(a)){return decodeURIComponent(d.substring(a.length,d.length))}}return null},_fnDetectHeader:V,_fnGetUniqueThs:N,_fnScrollBarWidth:Qa,_fnApplyToChildren:C,_fnMap:p,_fnGetRowData:Y,_fnGetCellData:v,_fnSetCellData:F,_fnGetObjectDataFn:Q,_fnSetObjectDataFn:L,_fnApplyColumnDefs:ta,_fnBindAction:Ra,_fnExtend:Ta,_fnCallbackReg:z,_fnCallbackFire:A,_fnJsonString:Wa,_fnRender:S,_fnNodeToColumnIndex:fa,_fnInfoMacros:ja,_fnBrowserDetect:Ua,_fnGetColumns:r};h.extend(j.ext.oApi,this.oApi);for(var sa in j.ext.oApi){sa&&(this[sa]=Va(sa))}var ca=this;this.each(function(){var a=0,b,c,d;c=this.getAttribute("id");var i=!1,f=!1;if("table"!=this.nodeName.toLowerCase()){D(null,0,"Attempted to initialise DataTables on a node which is not a table: "+this.nodeName)}else{a=0;for(b=j.settings.length;a<b;a++){if(j.settings[a].nTable==this){if(e===n||e.bRetrieve){return j.settings[a].oInstance}if(e.bDestroy){j.settings[a].oInstance.fnDestroy();break}else{D(j.settings[a],0,"Cannot reinitialise DataTable.\n\nTo retrieve the DataTables object for this table, pass no arguments or see the docs for bRetrieve and bDestroy");return}}if(j.settings[a].sTableId==this.id){j.settings.splice(a,1);break}}if(null===c||""===c){this.id=c="DataTables_Table_"+j.ext._oExternConfig.iNextUnique++}var g=h.extend(!0,{},j.models.oSettings,{nTable:this,oApi:ca.oApi,oInit:e,sDestroyWidth:h(this).width(),sInstance:c,sTableId:c});j.settings.push(g);g.oInstance=1===ca.length?ca:h(this).dataTable();e||(e={});e.oLanguage&&pa(e.oLanguage);e=Ta(h.extend(!0,{},j.defaults),e);p(g.oFeatures,e,"bPaginate");p(g.oFeatures,e,"bLengthChange");p(g.oFeatures,e,"bFilter");p(g.oFeatures,e,"bSort");p(g.oFeatures,e,"bInfo");p(g.oFeatures,e,"bProcessing");p(g.oFeatures,e,"bAutoWidth");p(g.oFeatures,e,"bSortClasses");p(g.oFeatures,e,"bServerSide");p(g.oFeatures,e,"bDeferRender");p(g.oScroll,e,"sScrollX","sX");p(g.oScroll,e,"sScrollXInner","sXInner");p(g.oScroll,e,"sScrollY","sY");p(g.oScroll,e,"bScrollCollapse","bCollapse");p(g.oScroll,e,"bScrollInfinite","bInfinite");p(g.oScroll,e,"iScrollLoadGap","iLoadGap");p(g.oScroll,e,"bScrollAutoCss","bAutoCss");p(g,e,"asStripeClasses");p(g,e,"asStripClasses","asStripeClasses");p(g,e,"fnServerData");p(g,e,"fnFormatNumber");p(g,e,"sServerMethod");p(g,e,"aaSorting");p(g,e,"aaSortingFixed");p(g,e,"aLengthMenu");p(g,e,"sPaginationType");p(g,e,"sAjaxSource");p(g,e,"sAjaxDataProp");p(g,e,"iCookieDuration");p(g,e,"sCookiePrefix");p(g,e,"sDom");p(g,e,"bSortCellsTop");p(g,e,"iTabIndex");p(g,e,"oSearch","oPreviousSearch");p(g,e,"aoSearchCols","aoPreSearchCols");p(g,e,"iDisplayLength","_iDisplayLength");p(g,e,"bJQueryUI","bJUI");p(g,e,"fnCookieCallback");p(g,e,"fnStateLoad");p(g,e,"fnStateSave");p(g.oLanguage,e,"fnInfoCallback");z(g,"aoDrawCallback",e.fnDrawCallback,"user");z(g,"aoServerParams",e.fnServerParams,"user");z(g,"aoStateSaveParams",e.fnStateSaveParams,"user");z(g,"aoStateLoadParams",e.fnStateLoadParams,"user");z(g,"aoStateLoaded",e.fnStateLoaded,"user");z(g,"aoRowCallback",e.fnRowCallback,"user");z(g,"aoRowCreatedCallback",e.fnCreatedRow,"user");z(g,"aoHeaderCallback",e.fnHeaderCallback,"user");z(g,"aoFooterCallback",e.fnFooterCallback,"user");z(g,"aoInitComplete",e.fnInitComplete,"user");z(g,"aoPreDrawCallback",e.fnPreDrawCallback,"user");g.oFeatures.bServerSide&&g.oFeatures.bSort&&g.oFeatures.bSortClasses?z(g,"aoDrawCallback",P,"server_side_sort_classes"):g.oFeatures.bDeferRender&&z(g,"aoDrawCallback",P,"defer_sort_classes");e.bJQueryUI?(h.extend(g.oClasses,j.ext.oJUIClasses),e.sDom===j.defaults.sDom&&"lfrtip"===j.defaults.sDom&&(g.sDom='<"H"lfr>t<"F"ip>')):h.extend(g.oClasses,j.ext.oStdClasses);h(this).addClass(g.oClasses.sTable);if(""!==g.oScroll.sX||""!==g.oScroll.sY){g.oScroll.iBarWidth=Qa()}g.iInitDisplayStart===n&&(g.iInitDisplayStart=e.iDisplayStart,g._iDisplayStart=e.iDisplayStart);e.bStateSave&&(g.oFeatures.bStateSave=!0,Sa(g,e),z(g,"aoDrawCallback",ra,"state_save"));null!==e.iDeferLoading&&(g.bDeferLoading=!0,a=h.isArray(e.iDeferLoading),g._iRecordsDisplay=a?e.iDeferLoading[0]:e.iDeferLoading,g._iRecordsTotal=a?e.iDeferLoading[1]:e.iDeferLoading);null!==e.aaData&&(f=!0);""!==e.oLanguage.sUrl?(g.oLanguage.sUrl=e.oLanguage.sUrl,h.getJSON(g.oLanguage.sUrl,null,function(a){pa(a);h.extend(true,g.oLanguage,e.oLanguage,a);ba(g)}),i=!0):h.extend(!0,g.oLanguage,e.oLanguage);null===e.asStripeClasses&&(g.asStripeClasses=[g.oClasses.sStripeOdd,g.oClasses.sStripeEven]);b=g.asStripeClasses.length;g.asDestroyStripes=[];if(b){c=!1;d=h(this).children("tbody").children("tr:lt("+b+")");for(a=0;a<b;a++){d.hasClass(g.asStripeClasses[a])&&(c=!0,g.asDestroyStripes.push(g.asStripeClasses[a]))}c&&d.removeClass(g.asStripeClasses.join(" "))}c=[];a=this.getElementsByTagName("thead");0!==a.length&&(V(g.aoHeader,a[0]),c=N(g));if(null===e.aoColumns){d=[];a=0;for(b=c.length;a<b;a++){d.push(null)}}else{d=e.aoColumns}a=0;for(b=d.length;a<b;a++){e.saved_aoColumns!==n&&e.saved_aoColumns.length==b&&(null===d[a]&&(d[a]={}),d[a].bVisible=e.saved_aoColumns[a].bVisible),o(g,c?c[a]:null)}ta(g,e.aoColumnDefs,d,function(a,b){m(g,a,b)});a=0;for(b=g.aaSorting.length;a<b;a++){g.aaSorting[a][0]>=g.aoColumns.length&&(g.aaSorting[a][0]=0);var k=g.aoColumns[g.aaSorting[a][0]];g.aaSorting[a][2]===n&&(g.aaSorting[a][2]=0);e.aaSorting===n&&g.saved_aaSorting===n&&(g.aaSorting[a][1]=k.asSorting[0]);c=0;for(d=k.asSorting.length;c<d;c++){if(g.aaSorting[a][1]==k.asSorting[c]){g.aaSorting[a][2]=c;break}}}P(g);Ua(g);a=h(this).children("caption").each(function(){this._captionSide=h(this).css("caption-side")});b=h(this).children("thead");0===b.length&&(b=[l.createElement("thead")],this.appendChild(b[0]));g.nTHead=b[0];b=h(this).children("tbody");0===b.length&&(b=[l.createElement("tbody")],this.appendChild(b[0]));g.nTBody=b[0];g.nTBody.setAttribute("role","alert");g.nTBody.setAttribute("aria-live","polite");g.nTBody.setAttribute("aria-relevant","all");b=h(this).children("tfoot");if(0===b.length&&0<a.length&&(""!==g.oScroll.sX||""!==g.oScroll.sY)){b=[l.createElement("tfoot")],this.appendChild(b[0])}0<b.length&&(g.nTFoot=b[0],V(g.aoFooter,g.nTFoot));if(f){for(a=0;a<e.aaData.length;a++){H(g,e.aaData[a])}}else{ua(g)}g.aiDisplay=g.aiDisplayMaster.slice();g.bInitialised=!0;!1===i&&ba(g)}});ca=null;return this};j.fnVersionCheck=function(e){for(var h=function(e,h){for(;e.length<h;){e+="0"}return e},m=j.ext.sVersion.split("."),e=e.split("."),k="",n="",l=0,t=e.length;l<t;l++){k+=h(m[l],3),n+=h(e[l],3)}return parseInt(k,10)>=parseInt(n,10)};j.fnIsDataTable=function(e){for(var h=j.settings,m=0;m<h.length;m++){if(h[m].nTable===e||h[m].nScrollHead===e||h[m].nScrollFoot===e){return !0}}return !1};j.fnTables=function(e){var o=[];jQuery.each(j.settings,function(j,k){(!e||!0===e&&h(k.nTable).is(":visible"))&&o.push(k.nTable)});return o};j.version="1.9.4";j.settings=[];j.models={};j.models.ext={afnFiltering:[],afnSortData:[],aoFeatures:[],aTypes:[],fnVersionCheck:j.fnVersionCheck,iApiIndex:0,ofnSearch:{},oApi:{},oStdClasses:{},oJUIClasses:{},oPagination:{},oSort:{},sVersion:j.version,sErrMode:"alert",_oExternConfig:{iNextUnique:0}};j.models.oSearch={bCaseInsensitive:!0,sSearch:"",bRegex:!1,bSmart:!0};j.models.oRow={nTr:null,_aData:[],_aSortData:[],_anHidden:[],_sRowStripe:""};j.models.oColumn={aDataSort:null,asSorting:null,bSearchable:null,bSortable:null,bUseRendered:null,bVisible:null,_bAutoType:!0,fnCreatedCell:null,fnGetData:null,fnRender:null,fnSetData:null,mData:null,mRender:null,nTh:null,nTf:null,sClass:null,sContentPadding:null,sDefaultContent:null,sName:null,sSortDataType:"std",sSortingClass:null,sSortingClassJUI:null,sTitle:null,sType:null,sWidth:null,sWidthOrig:null};j.defaults={aaData:null,aaSorting:[[0,"asc"]],aaSortingFixed:null,aLengthMenu:[10,25,50,100],aoColumns:null,aoColumnDefs:null,aoSearchCols:[],asStripeClasses:null,bAutoWidth:!0,bDeferRender:!1,bDestroy:!1,bFilter:!0,bInfo:!0,bJQueryUI:!1,bLengthChange:!0,bPaginate:!0,bProcessing:!1,bRetrieve:!1,bScrollAutoCss:!0,bScrollCollapse:!1,bScrollInfinite:!1,bServerSide:!1,bSort:!0,bSortCellsTop:!1,bSortClasses:!0,bStateSave:!1,fnCookieCallback:null,fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,fnFormatNumber:function(e){if(1000>e){return e}for(var h=e+"",e=h.split(""),j="",h=h.length,k=0;k<h;k++){0===k%3&&0!==k&&(j=this.oLanguage.sInfoThousands+j),j=e[h-k-1]+j}return j},fnHeaderCallback:null,fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,fnRowCallback:null,fnServerData:function(e,j,m,k){k.jqXHR=h.ajax({url:e,data:j,success:function(e){e.sError&&k.oApi._fnLog(k,0,e.sError);h(k.oInstance).trigger("xhr",[k,e]);m(e)},dataType:"json",cache:!1,type:k.sServerMethod,error:function(e,h){"parsererror"==h&&k.oApi._fnLog(k,0,"DataTables warning: JSON data from server could not be parsed. This is caused by a JSON formatting error.")}})},fnServerParams:null,fnStateLoad:function(e){var e=this.oApi._fnReadCookie(e.sCookiePrefix+e.sInstance),j;try{j="function"===typeof h.parseJSON?h.parseJSON(e):eval("("+e+")")}catch(m){j=null}return j},fnStateLoadParams:null,fnStateLoaded:null,fnStateSave:function(e,h){this.oApi._fnCreateCookie(e.sCookiePrefix+e.sInstance,this.oApi._fnJsonString(h),e.iCookieDuration,e.sCookiePrefix,e.fnCookieCallback)},fnStateSaveParams:null,iCookieDuration:7200,iDeferLoading:null,iDisplayLength:10,iDisplayStart:0,iScrollLoadGap:100,iTabIndex:0,oLanguage:{oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"},oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sInfoThousands:",",sLengthMenu:"Show _MENU_ entries",sLoadingRecords:"Loading...",sProcessing:"Processing...",sSearch:"Search:",sUrl:"",sZeroRecords:"No matching records found"},oSearch:h.extend({},j.models.oSearch),sAjaxDataProp:"aaData",sAjaxSource:null,sCookiePrefix:"SpryMedia_DataTables_",sDom:"lfrtip",sPaginationType:"two_button",sScrollX:"",sScrollXInner:"",sScrollY:"",sServerMethod:"GET"};j.defaults.columns={aDataSort:null,asSorting:["asc","desc"],bSearchable:!0,bSortable:!0,bUseRendered:!0,bVisible:!0,fnCreatedCell:null,fnRender:null,iDataSort:-1,mData:null,mRender:null,sCellType:"td",sClass:"",sContentPadding:"",sDefaultContent:null,sName:"",sSortDataType:"std",sTitle:null,sType:null,sWidth:null};j.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:null,bLengthChange:null,bPaginate:null,bProcessing:null,bServerSide:null,bSort:null,bSortClasses:null,bStateSave:null},oScroll:{bAutoCss:null,bCollapse:null,bInfinite:null,iBarWidth:0,iLoadGap:null,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},oBrowser:{bScrollOversize:!1},aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aoColumns:[],aoHeader:[],aoFooter:[],asDataSearch:[],oPreviousSearch:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:null,asStripeClasses:null,asDestroyStripes:[],sDestroyWidth:0,aoRowCallback:[],aoHeaderCallback:[],aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],aoStateLoadParams:[],aoStateLoaded:[],sTableId:"",nTable:null,nTHead:null,nTFoot:null,nTBody:null,nTableWrapper:null,bDeferLoading:!1,bInitialised:!1,aoOpenRows:[],sDom:null,sPaginationType:"two_button",iCookieDuration:0,sCookiePrefix:"",fnCookieCallback:null,aoStateSave:[],aoStateLoad:[],oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,bAjaxDataGet:!0,jqXHR:null,fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:!1,iDrawError:-1,_iDisplayLength:10,_iDisplayStart:0,_iDisplayEnd:10,_iRecordsTotal:0,_iRecordsDisplay:0,bJUI:null,oClasses:{},bFiltered:!1,bSorted:!1,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){return this.oFeatures.bServerSide?parseInt(this._iRecordsTotal,10):this.aiDisplayMaster.length},fnRecordsDisplay:function(){return this.oFeatures.bServerSide?parseInt(this._iRecordsDisplay,10):this.aiDisplay.length},fnDisplayEnd:function(){return this.oFeatures.bServerSide?!1===this.oFeatures.bPaginate||-1==this._iDisplayLength?this._iDisplayStart+this.aiDisplay.length:Math.min(this._iDisplayStart+this._iDisplayLength,this._iRecordsDisplay):this._iDisplayEnd},oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null};j.ext=h.extend(!0,{},j.models.ext);h.extend(j.ext.oStdClasses,{sTable:"dataTable",sPagePrevEnabled:"paginate_enabled_previous",sPagePrevDisabled:"paginate_disabled_previous",sPageNextEnabled:"paginate_enabled_next",sPageNextDisabled:"paginate_disabled_next",sPageJUINext:"",sPageJUIPrev:"",sPageButton:"paginate_button",sPageButtonActive:"paginate_active",sPageButtonStaticDisabled:"paginate_button paginate_button_disabled",sPageFirst:"first",sPagePrevious:"previous",sPageNext:"next",sPageLast:"last",sStripeOdd:"odd",sStripeEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sFooterTH:"",sJUIHeader:"",sJUIFooter:""});h.extend(j.ext.oJUIClasses,j.ext.oStdClasses,{sPagePrevEnabled:"fg-button ui-button ui-state-default ui-corner-left",sPagePrevDisabled:"fg-button ui-button ui-state-default ui-corner-left ui-state-disabled",sPageNextEnabled:"fg-button ui-button ui-state-default ui-corner-right",sPageNextDisabled:"fg-button ui-button ui-state-default ui-corner-right ui-state-disabled",sPageJUINext:"ui-icon ui-icon-circle-arrow-e",sPageJUIPrev:"ui-icon ui-icon-circle-arrow-w",sPageButton:"fg-button ui-button ui-state-default",sPageButtonActive:"fg-button ui-button ui-state-default ui-state-disabled",sPageButtonStaticDisabled:"fg-button ui-button ui-state-default ui-state-disabled",sPageFirst:"first ui-corner-tl ui-corner-bl",sPageLast:"last ui-corner-tr ui-corner-br",sPaging:"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_",sSortAsc:"ui-state-default",sSortDesc:"ui-state-default",sSortable:"ui-state-default",sSortableAsc:"ui-state-default",sSortableDesc:"ui-state-default",sSortableNone:"ui-state-default",sSortJUIAsc:"css_right ui-icon ui-icon-triangle-1-n",sSortJUIDesc:"css_right ui-icon ui-icon-triangle-1-s",sSortJUI:"css_right ui-icon ui-icon-carat-2-n-s",sSortJUIAscAllowed:"css_right ui-icon ui-icon-carat-1-n",sSortJUIDescAllowed:"css_right ui-icon ui-icon-carat-1-s",sSortJUIWrapper:"DataTables_sort_wrapper",sSortIcon:"DataTables_sort_icon",sScrollHead:"dataTables_scrollHead ui-state-default",sScrollFoot:"dataTables_scrollFoot ui-state-default",sFooterTH:"ui-state-default",sJUIHeader:"fg-toolbar ui-toolbar ui-widget-header ui-corner-tl ui-corner-tr ui-helper-clearfix",sJUIFooter:"fg-toolbar ui-toolbar ui-widget-header ui-corner-bl ui-corner-br ui-helper-clearfix"});h.extend(j.ext.oPagination,{two_button:{fnInit:function(e,j,m){var k=e.oLanguage.oPaginate,n=function(h){e.oApi._fnPageChange(e,h.data.action)&&m(e)},k=!e.bJUI?'<a class="'+e.oClasses.sPagePrevDisabled+'" tabindex="'+e.iTabIndex+'" role="button">'+k.sPrevious+'</a><a class="'+e.oClasses.sPageNextDisabled+'" tabindex="'+e.iTabIndex+'" role="button">'+k.sNext+"</a>":'<a class="'+e.oClasses.sPagePrevDisabled+'" tabindex="'+e.iTabIndex+'" role="button"><span class="'+e.oClasses.sPageJUIPrev+'"></span></a><a class="'+e.oClasses.sPageNextDisabled+'" tabindex="'+e.iTabIndex+'" role="button"><span class="'+e.oClasses.sPageJUINext+'"></span></a>';h(j).append(k);var l=h("a",j),k=l[0],l=l[1];e.oApi._fnBindAction(k,{action:"previous"},n);e.oApi._fnBindAction(l,{action:"next"},n);e.aanFeatures.p||(j.id=e.sTableId+"_paginate",k.id=e.sTableId+"_previous",l.id=e.sTableId+"_next",k.setAttribute("aria-controls",e.sTableId),l.setAttribute("aria-controls",e.sTableId))},fnUpdate:function(e){if(e.aanFeatures.p){for(var h=e.oClasses,j=e.aanFeatures.p,k,l=0,n=j.length;l<n;l++){if(k=j[l].firstChild){k.className=0===e._iDisplayStart?h.sPagePrevDisabled:h.sPagePrevEnabled,k=k.nextSibling,k.className=e.fnDisplayEnd()==e.fnRecordsDisplay()?h.sPageNextDisabled:h.sPageNextEnabled}}}}},iFullNumbersShowPages:5,full_numbers:{fnInit:function(e,j,m){var k=e.oLanguage.oPaginate,l=e.oClasses,n=function(h){e.oApi._fnPageChange(e,h.data.action)&&m(e)};h(j).append('<a  tabindex="'+e.iTabIndex+'" class="'+l.sPageButton+" "+l.sPageFirst+'">'+k.sFirst+'</a><a  tabindex="'+e.iTabIndex+'" class="'+l.sPageButton+" "+l.sPagePrevious+'">'+k.sPrevious+'</a><span></span><a tabindex="'+e.iTabIndex+'" class="'+l.sPageButton+" "+l.sPageNext+'">'+k.sNext+'</a><a tabindex="'+e.iTabIndex+'" class="'+l.sPageButton+" "+l.sPageLast+'">'+k.sLast+"</a>");var t=h("a",j),k=t[0],l=t[1],r=t[2],t=t[3];e.oApi._fnBindAction(k,{action:"first"},n);e.oApi._fnBindAction(l,{action:"previous"},n);e.oApi._fnBindAction(r,{action:"next"},n);e.oApi._fnBindAction(t,{action:"last"},n);e.aanFeatures.p||(j.id=e.sTableId+"_paginate",k.id=e.sTableId+"_first",l.id=e.sTableId+"_previous",r.id=e.sTableId+"_next",t.id=e.sTableId+"_last")},fnUpdate:function(e,o){if(e.aanFeatures.p){var m=j.ext.oPagination.iFullNumbersShowPages,k=Math.floor(m/2),l=Math.ceil(e.fnRecordsDisplay()/e._iDisplayLength),n=Math.ceil(e._iDisplayStart/e._iDisplayLength)+1,t="",r,B=e.oClasses,u,M=e.aanFeatures.p,L=function(h){e.oApi._fnBindAction(this,{page:h+r-1},function(h){e.oApi._fnPageChange(e,h.data.page);o(e);h.preventDefault()})};-1===e._iDisplayLength?n=k=r=1:l<m?(r=1,k=l):n<=k?(r=1,k=m):n>=l-k?(r=l-m+1,k=l):(r=n-Math.ceil(m/2)+1,k=r+m-1);for(m=r;m<=k;m++){t+=n!==m?'<a tabindex="'+e.iTabIndex+'" class="'+B.sPageButton+'">'+e.fnFormatNumber(m)+"</a>":'<a tabindex="'+e.iTabIndex+'" class="'+B.sPageButtonActive+'">'+e.fnFormatNumber(m)+"</a>"}m=0;for(k=M.length;m<k;m++){u=M[m],u.hasChildNodes()&&(h("span:eq(0)",u).html(t).children("a").each(L),u=u.getElementsByTagName("a"),u=[u[0],u[1],u[u.length-2],u[u.length-1]],h(u).removeClass(B.sPageButton+" "+B.sPageButtonActive+" "+B.sPageButtonStaticDisabled),h([u[0],u[1]]).addClass(1==n?B.sPageButtonStaticDisabled:B.sPageButton),h([u[2],u[3]]).addClass(0===l||n===l||-1===e._iDisplayLength?B.sPageButtonStaticDisabled:B.sPageButton))}}}}});h.extend(j.ext.oSort,{"string-pre":function(e){"string"!=typeof e&&(e=null!==e&&e.toString?e.toString():"");return e.toLowerCase()},"string-asc":function(e,h){return e<h?-1:e>h?1:0},"string-desc":function(e,h){return e<h?1:e>h?-1:0},"html-pre":function(e){return e.replace(/<.*?>/g,"").toLowerCase()},"html-asc":function(e,h){return e<h?-1:e>h?1:0},"html-desc":function(e,h){return e<h?1:e>h?-1:0},"date-pre":function(e){e=Date.parse(e);if(isNaN(e)||""===e){e=Date.parse("01/01/1970 00:00:00")}return e},"date-asc":function(e,h){return e-h},"date-desc":function(e,h){return h-e},"numeric-pre":function(e){return"-"==e||""===e?0:1*e},"numeric-asc":function(e,h){return e-h},"numeric-desc":function(e,h){return h-e}});h.extend(j.ext.aTypes,[function(e){if("number"===typeof e){return"numeric"}if("string"!==typeof e){return null}var h,j=!1;h=e.charAt(0);if(-1=="0123456789-".indexOf(h)){return null}for(var k=1;k<e.length;k++){h=e.charAt(k);if(-1=="0123456789.".indexOf(h)){return null}if("."==h){if(j){return null}j=!0}}return"numeric"},function(e){var h=Date.parse(e);return null!==h&&!isNaN(h)||"string"===typeof e&&0===e.length?"date":null},function(e){return"string"===typeof e&&-1!=e.indexOf("<")&&-1!=e.indexOf(">")?"html":null}]);h.fn.DataTable=j;h.fn.dataTable=j;h.fn.dataTableSettings=j.settings;h.fn.dataTableExt=j.ext};"function"===typeof define&&define.amd?define(["jquery"],L):jQuery&&!jQuery.fn.dataTable&&L(jQuery)})(window,document);jQuery.fn.dataTableExt.oSort["numWithNull-asc"]=function(a,c){var b;a=$.trim(a);c=$.trim(c);if(a==c){b=0}else{if(a==""||a=="&nbsp;"){b=1}else{if(c==""||c=="&nbsp;"){b=-1}else{if(a>c){b=1}else{b=-1}}}}return b};jQuery.fn.dataTableExt.oSort["numWithNull-desc"]=function(c,a){var b;a=$.trim(a);c=$.trim(c);if(a==c){b=0}else{if(a==""||a=="&nbsp;"){b=-1}else{if(c==""||c=="&nbsp;"){b=1}else{if(a>c){b=1}else{b=-1}}}}return b};jQuery.fn.dataTableExt.oSort["StringWithNull-asc"]=function(a,c){var b;a=$.trim(a);c=$.trim(c);var a=a.replace(/(<([^>]+)>)/ig,"");var c=c.replace(/(<([^>]+)>)/ig,"");if(a==c){b=0}else{if(a==""||a=="&nbsp;"){b=1}else{if(c==""||c=="&nbsp;"){b=-1}else{if(a>c){b=1}else{b=-1}}}}return b};jQuery.fn.dataTableExt.oSort["StringWithNull-desc"]=function(c,a){var b;a=$.trim(a);c=$.trim(c);var a=a.replace(/(<([^>]+)>)/ig,"");var c=c.replace(/(<([^>]+)>)/ig,"");if(a==c){b=0}else{if(a==""||a=="&nbsp;"){b=-1}else{if(c==""||c=="&nbsp;"){b=1}else{if(a>c){b=1}else{b=-1}}}}return b};jQuery.extend(jQuery.fn.dataTableExt.oSort,{"signed-num-pre":function(b){return(b=="-"||b==="")?0:b.replace("+","")*1},"signed-num-asc":function(d,c){return((d<c)?-1:((d>c)?1:0))},"signed-num-desc":function(d,c){return((d<c)?1:((d>c)?-1:0))}});google.load("search","1",{language:"ru",style:google.loader.themes.V2_DEFAULT});google.setOnLoadCallback(function(){new GoogleSearch().Init()},true);function GoogleSearch(){var a;var d;var c;var b;this.Init=function(){var g=this;g.SearchInput=$("[jq=google_search_input]").get(0);var e=location.hostname;var j="";g.Dialog=$("<div />",{html:j+' <div jq="google_search_place"></div>'});g.GoogleSearchPlace=g.Dialog.find("[jq=google_search_place]").get(0);g.Dialog.dialog({title:"Поиск Google на сайте",position:{my:"center top+100",at:"top",of:window},width:800,autoOpen:false,resizable:true,open:function(k,l){$(this).css("text-align","left");setCaretTo(g.SearchInput,g.GoogleTextareaPos);g.Dialog.dialog("option","position",["center",100])}});var f=new google.search.CustomSearchControl("016362581206544451703:ohhsfm-jcnm");f.setResultSetSize(google.search.Search.FILTERED_CSE_RESULTSET);f.setLinkTarget(google.search.Search.LINK_TARGET_SELF);var h=new google.search.DrawOptions();h.setAutoComplete(true);h.setInput(g.SearchInput);f.draw(g.GoogleSearchPlace,h);f.setSearchStartingCallback(this,g.google_SearchStarting)},this.google_SearchStarting=function(){var e=this;e.GoogleTextareaPos=(getCaretPos(e.SearchInput));if(!e.Dialog.dialog("isOpen")){e.Dialog.dialog("open")}}}function xsSession(){this.Set=function(b){var a=this;a.Session=b};this.Get=function(){var a=this;return a.Session}}$(function(){if($.sceditor){$.sceditor.command.set("image",{exec:function(b){var d=this;var c=uniqid("queueID");var a=$("<div />").html('<div jq="Tabs"><ul><li><a href="#tabs-1">Загрузить на Литмир</a></li><li><a href="#tabs-2">Вставить по ссылке</a></li></ul><div id="tabs-1"><input jq="UploadImg" type="button" value="Загрузить" /><div jq="UploadStatus"></div><div id="'+c+'"></div></div><div id="tabs-2"><input jq="ImgLink" type="text" style="width:400px"/><input jq="AddImg" type="button" value="Добавить" /> </div> </div>');a.dialog({modal:true,title:"Добавить рисунок",autoOpen:true,width:"600",height:"auto",create:function(){var e=$(this);e.find("[jq=Tabs]").tabs();e.find("[jq=AddImg]").click(function(){var h=e.find("[jq=ImgLink]").val();if(h){var g=new Image();g.src=h;g.onload=function(){if((this.width>1)&&(this.height>1)){d.wysiwygEditorInsertHtml('<br /> <img src="'+h+'" width="'+this.width+'" height="'+this.height+'" /> <br />')}else{xsError("Ошибка добавления рисунка")}e.dialog("close")};g.onerror=function(){xsError("Ошибка добавления рисунка");e.dialog("close")}}});var f=e.find("[jq=UploadStatus]");e.find("[jq=UploadImg]").uploadifive({fileObjName:"ImageFile",buttonText:"Выбрать&nbsp;файл",width:100,height:20,queueID:c,buttonClass:"lts50",auto:true,multi:false,fileType:["image/gif","image/jpeg","image/jpg","image/png"],fileSizeLimit:"200MBB",removeCompleted:true,uploadScript:"/ImageAdd",queueSizeLimit:1,onUploadComplete:function(k,l){f.html("");var j=xsJsonParse(l);var h=j.ImageURL;if(h){var g=new Image();g.src=h;g.onload=function(){if((this.width>1)&&(this.height>1)){d.wysiwygEditorInsertHtml('<br /> <img src="'+h+'" width="'+this.width+'" height="'+this.height+'" /> <br />')}else{xsError("Ошибка добавления рисунка")}e.dialog("close")};g.onerror=function(){xsError("Ошибка добавления рисунка");e.dialog("close")}}},onUpload:function(){f.html(""+GetWaitImageHtmlCode()+" Идет добавление рисунка. Пожалуйста подождите...")},onFallback:function(){IncompatibleWithHTML5Error()},onAddQueueItem:function(g){f.html("")}})}})},tooltip:"Добавить рисунок"})}$(document).on("click","img[ImgFullId]",function(){var a=$(this).attr("ImgFullId");$.ajax({url:"/ImageBig",data:({ImgId:a}),success:function(g){var h=xsJsonParse(g);var f=$(window).width();var d=$(window).height();var e=h.Width;var b=h.Height;var j=ImageFit(d-100,f-100,b,e);var c=$("<div />").html('<img style="width:'+j[0]+"px; height:"+j[1]+'px;" src="'+h.Url+'" />');c.dialog({modal:true,title:"",autoOpen:true,resize:false,width:j[0]+35,height:j[1]+60,open:function(k,l){}})}})});new xsWysibbRender().Init()});function xsWysibbRender(){this.Init=function(){var a=this;$(".BBHtmlCodeInner[Handled!='1']").each(function(){var c=$(this);var b=c.width()-50;c.find("img").each(function(){var g=$(this);var f=g.attr("width");var d=g.attr("height");if((f>1)&&(d>1)){var e=ImageFit(Infinity,b,d,f);if(f>e[0]){g.attr("width",e[0]);g.attr("height",e[1]);g.css("cursor","pointer");g.click(function(){var k=$(window).width();var j=$(window).height();var l=ImageFit(j-100,k-100,d,f);var h=$("<div />").html('<img style="width:'+l[0]+"px; height:"+l[1]+'px;" src="'+g.attr("src")+'" />');h.dialog({modal:true,title:"",autoOpen:true,resize:false,width:l[0]+35,height:l[1]+60,open:function(m,n){}})})}}});$(this).attr("Handled","1")})}}$(function(){var a=new xsLitmirAllLikeButton;a.Init()});function xsLitmirAllLikeButton(){this.Parent;this.Init=function(){var a=this;if(a.Parent){a.Parent.find("[jq=LikeButtonBlock]").each(function(){var b=new xsLitmirLikeButtonBlock;b.LikeButtonBlock=$(this);b.Init()})}else{$("[jq=LikeButtonBlock]").each(function(){var b=new xsLitmirLikeButtonBlock;b.LikeButtonBlock=$(this);b.Init()})}}}function xsLitmirLikeButtonBlock(){this.LikeButtonBlock;this.Init=function(){var a=this;a.ObjType=a.LikeButtonBlock.attr("ObjType");a.ObjId=a.LikeButtonBlock.attr("ObjId");a.LikeButton=a.LikeButtonBlock.find("[jq=LikeButton]");a.LikeButton.off("click");var b=function(){a.LikeButton.off("click");$.ajax({url:"/LikeClick",data:({ObjType:a.ObjType,ObjId:a.ObjId}),beforeSend:function(){},success:function(c){var d=xsJsonParse(c);a.LikeButtonBlock.find("[jq=lkc]").html(""+d.LikeCount+"");a.LikeButton.on("click",b)}})};a.LikeButton.on("click",b)};this.ButtonUp=function(){var a=this;a.LikeButtonBlock.find("[jq=LikeButton]").removeAttr("class").addClass("lk1_up");a.LikeButtonBlock.find("[jq=LikeButtonText]").removeAttr("class").addClass("lk2_up");a.LikeButtonBlock.removeAttr("Down")};this.ButtonDown=function(){var a=this;a.LikeButtonBlock.find("[jq=LikeButton]").removeAttr("class").addClass("lk1_down");a.LikeButtonBlock.find("[jq=LikeButtonText]").removeAttr("class").addClass("lk2_down");a.LikeButtonBlock.attr("Down","true")}}function xsAbuse(){this.Init=function(b,c){var a=this;a.ObjType=b;a.ObjId=c;$.ajax({url:"/AbuseAddForm",data:({ObjType:a.ObjType,ObjId:a.ObjId}),success:function(f){var j=xsJsonParse(f);var d=$("<div />",{html:j.Content});d.dialog({width:"auto",modal:true,resizable:false,title:"Редактирование",zIndex:3});var h=d.find("textarea[jq=wysibb]").first();h.sceditor({locale:"ru",resizeEnabled:true,emoticonsCompat:false,style:"/plugin/sceditor.com/BBCodeStyle.css",spellcheck:true,toolbar:"bold,italic,underline,strike,subscript,superscript|left,center,right,justify|font,color,removeformat|cut,copy,paste,pastetext|bulletlist,orderedlist|table|code,quote,spoilers|horizontalrule,image,email,link,unlink|emoticon,youtube,date,time|print,maximize,source",resizeMinHeight:250,toolbarExclude:"ltr,rtl,size",plugins:"bbcode",parserOptions:{breakAfterBlock:false},emoticonsRoot:"/plugin/bbcode/images/smiles/",emoticons:{dropdown:{":d":"1.gif",":)":"2.gif",":(":"3.gif",":heap:":"4.gif",":ooi:":"5.gif",":so:":"6.gif",":surp:":"7.gif",":ag:":"8.gif",":ir:":"9.gif",":oops2:":"10.gif",":p":"11.gif",":cry:":"12.gif",":rage:":"13.gif",":b":"14.gif",":roll:":"15.gif",":wink:":"16.gif",":yes:":"17.gif",":bot:":"18.gif",":z)":"19.gif",":vip:":"21.gif",":Heppy:":"22.gif",":think:":"23.gif",":bye:":"24.gif",":roul:":"25.gif",":pst:":"26.gif",":o:":"27.gif",":cens:":"29.gif",":tani:":"30.gif",":appl:":"31.gif",":idnk:":"32.gif",":sing:":"33.gif",":shock:":"34.gif",":res:":"36.gif",":alc:":"37.gif",":lam:":"38.gif",":box:":"39.gif",":tom:":"40.gif",":idea:":"43.gif",":oops:":"44.gif",":E":"45.gif",":horns:":"47.gif",":poz:":"49.gif",":roza:":"50.gif",":dj:":"52.gif",":stapp:":"56.gif",":heart:":"58.gif",":kiss:":"59.gif",":party:":"61.gif",":eam:":"63.gif",":adore:":"65.gif",":pie:":"66.gif",":foo:":"70.gif",":tog:":"73.gif",":pnk:":"74.gif",":-({|=:":"76.gif",":haaw:":"77.gif",":angel:":"78.gif",":died:":"80.gif",":cof:":"81.gif",":fruit:":"82.gif",":tease:":"83.gif",":evil:":"84.gif",":exc:":"85.gif",":Head:":"87.gif",":gans:":"90.gif",":user:":"91.gif",":mvol:":"93.gif",":boat:":"94.gif",":cop:":"96.gif",":smok:":"97.gif",":bar:":"100.gif",":blush2:":"101.gif",":sm203:":"203.gif",":sm204:":"204.gif",":sm205:":"205.gif",":sm206:":"206.gif",":sm207:":"207.gif",":sm208:":"208.gif",":sm210:":"210.gif",":sm212:":"212.gif",":sm215:":"215.gif",":sm216:":"216.gif",":sm221:":"221.gif",":sm223:":"223.gif",":sm225:":"225.gif",":sm226:":"226.gif",":sm227:":"227.gif",":sm228:":"228.gif",":sm229:":"229.gif",":sm230:":"230.gif",":sm231:":"231.gif",":sm232:":"232.gif",":sm233:":"233.gif",":sm234:":"234.gif",":sm235:":"235.gif",":sm236:":"236.gif",":sm237:":"237.gif",":sm238:":"238.gif",":sm239:":"239.gif",":sm240:":"240.gif",":sm241:":"241.gif",":sm242:":"242.gif",":sm243:":"243.gif",":sm244:":"244.gif",":sm245:":"245.gif",":sm246:":"246.gif",":sm247:":"247.gif",":sm248:":"248.gif",":sm249:":"249.gif",":sm250:":"250.gif",":sm252:":"252.gif",":sm255:":"255.gif",":sm256:":"256.gif",":sm257:":"257.gif",":sm258:":"258.gif",":sm259:":"259.gif",":sm260:":"260.gif",":sm261:":"261.gif",":sm262:":"262.gif",":sm263:":"263.gif",":sm264:":"264.gif",":sm265:":"265.gif",":sm266:":"266.gif",":sm267:":"267.gif",":sm268:":"268.gif",":sm269:":"269.gif",":sm270:":"270.gif",":sm271:":"271.gif",":sm272:":"272.gif",":sm273:":"273.gif",":sm274:":"274.gif",":sm275:":"275.gif",":sm276:":"276.gif",":sm277:":"277.gif",":sm278:":"278.gif",":sm279:":"279.gif",},more:{":tgu:":"35.gif",":vill:":"42.gif",":sex:":"46.gif",":rul:":"53.gif",":spam:":"60.gif",":ser:":"62.gif",":cnrt:":"68.gif",":oftop:":"69.gif",":hoo:":"72.gif",":pati:":"75.gif",":kil:":"79.gif",":granat:":"89.gif",":bic:":"98.gif",":ban:":"99.gif",":ny1:":"ny1.gif",":ny2:":"ny2.gif",":ny3:":"ny3.gif",":ny4:":"ny4.gif",":ny5:":"ny5.gif",":ny6:":"ny6.gif",":ny7:":"ny7.gif",":ny8:":"ny8.gif",":ny9:":"ny9.gif",":ny10:":"ny10.gif",":ny11:":"ny11.gif",":ny12:":"ny12.gif",":ny13:":"ny13.gif",":ny14:":"ny14.gif",":ny15:":"ny15.gif",":ny16:":"ny16.gif",":ny17:":"ny17.gif",":ny18:":"ny18.gif",":ny19:":"ny19.gif",":ny20:":"ny20.gif",":ny21:":"ny21.gif",":ny22:":"ny22.gif",":ny23:":"ny23.gif",":ny24:":"ny24.gif",":ny25:":"ny25.gif",":ny26:":"ny26.gif",":ny27:":"ny27.gif",":ny28:":"ny28.gif",":ny29:":"ny29.gif",":ny30:":"ny30.gif",":ny31:":"ny31.gif",":ny32:":"ny32.gif",":ny33:":"ny33.gif",":ny34:":"ny34.gif",":ny35:":"ny35.gif",":ny36:":"ny36.gif",":ny37:":"ny37.gif",":ny38:":"ny38.gif",":ny39:":"ny39.gif",":sm200:":"200.gif",":sm201:":"201.gif",":sm202:":"202.gif",":sm209:":"209.gif",":sm211:":"211.gif",":sm213:":"213.gif",":sm214:":"214.gif",":sm217:":"217.gif",":sm218:":"218.gif",":sm219:":"219.gif",":sm220:":"220.gif",":sm222:":"222.gif",":sm224:":"224.gif",":sm251:":"251.gif",":sm253:":"253.png",":sm254:":"252.png",},hidden:{":arrow:":"20.gif",":closed:":"28.gif",":lol:":"41.gif",":love:":"48.gif",":meg:":"51.gif",":offln:":"54.gif",":sp:":"55.gif",":girl:":"57.gif",":gift:":"64.gif",":egg:":"67.gif",":mob:":"71.gif",":niah:":"86.gif",":gl:":"88.gif",":ny:":"92.gif",":phone:":"95.gif",},},});var e=d.find("[jq=AbuseAddForm]");var g=e.find("[type=submit]");e.ajaxForm({url:"/AbuseAddSave",data:({ObjType:a.ObjType,ObjId:a.ObjId}),beforeSubmit:function(){g.attr("disabled","disabled")},error:function(){g.removeAttr("disabled")},success:function(k){var m=xsJsonParse(k);e.find("[jq=Output]").html(m.Content);var l=new ViewFormErrors();l.Array=m.FormError;l.Container=e;l.Init();g.removeAttr("disabled");if(!l.IsErrorExists()){e.clearForm();d.dialog("close")}}})}})}};