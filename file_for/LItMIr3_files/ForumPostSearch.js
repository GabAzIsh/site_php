$(function(){new xsForumPostSearchJs().Init()});function xsForumPostSearchJs(){this.Init=function(){var a=this;$("[jq=Post]").each(function(){var b=new xsForumPostSearchItem;b.Post=$(this);b.Init()})}}function xsForumPostSearchItem(){this.Post;this.PostId;this.Init=function(){var a=this;a.PostId=a.Post.attr("PostId");a.PostBlock=a.Post.find("[jq=PostBlock]:first");a.SubPostList=a.Post.find("[jq=SubPostList]:first");a.PostTextContainer=a.PostBlock.find("[jq=PostTextContainer]");a.PostTextContainer.find("[jq=Open]:first").click(function(){$(this).next(".hide").show();$(this).remove()});a.PostTextContainer.xsTextHide({maxHeight:300,onHide:function(){if(!isScrolledIntoView(a.Post)){jQuery.scrollTo(a.Post,100,{offset:{top:-10}})}}});a.PostBlock.find("[jq=Edit]").click(function(){new xsEditPost().Init(a.PostId)});a.PostBlock.find("[jq=Delete]").click(function(){var b=$("<div />",{html:'<div>Вы действительно хотите удалить сообщение?</div><div><input name="DeleteChilds" type="checkbox"> Удалить подсообщения</div>'});b.dialog({resizable:false,modal:true,title:"Удаление сообщения",buttons:{"Удалить":function(){var c=$(this);$.ajax({url:"/ForumDeletePost",data:{PostId:a.PostId,DeleteChilds:b.find("input:checkbox:checked").val()},success:function(d){var e=xsJsonParse(d);c.dialog("close");a.PostBlock.remove()}})},"Нет":function(){$(this).dialog("close")}}})});a.PostBlock.find("[jq=Complain]").click(function(){$.ajax({url:"/ForumPostComplain",data:{PostId:a.PostId},success:function(b){var c=xsJsonParse(b);a.PostBlock.remove()}})});a.PostBlock.find("[jq=PostCheck]").click(function(){$.ajax({url:"/ForumPostCheck",data:{PostId:a.PostId},success:function(b){var c=xsJsonParse(b);a.PostBlock.remove()}})})}};